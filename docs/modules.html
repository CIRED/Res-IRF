

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Module &mdash; Res-IRF 0.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="License" href="LICENSE.html" />
    <link rel="prev" title="Additional information" href="appendix.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Res-IRF
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Res-IRF</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Additional information</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="TODO.html">Todo</a></li>
<li class="toctree-l1"><a class="reference internal" href="future_development.html">Future developments</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">Tutorials Res-IRF fondation</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html#Building-stock">Building stock</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html#Energy-use">Energy use</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html#Transition-economics">Transition economics</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html#Stock-dynamics">Stock dynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="Documentation.html">Documentation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Res-IRF</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/modules.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="module-buildings">
<span id="module"></span><h1>Module<a class="headerlink" href="#module-buildings" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="buildings.HousingStock">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">buildings.</span></span><span class="sig-name descname"><span class="pre">HousingStock</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stock_seg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levels_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2018</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label2area</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label2horizon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label2discount</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label2income</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label2consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price_behavior</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'myopic'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock" title="Permalink to this definition">¶</a></dt>
<dd><p>Class represents housing stocks. Housing is a building and household/owner archetype.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="buildings.HousingStock.stock_seg">
<span class="sig-name descname"><span class="pre">stock_seg</span></span><a class="headerlink" href="#buildings.HousingStock.stock_seg" title="Permalink to this definition">¶</a></dt>
<dd><p>MultiIndex pd.Series that contains the number of archetypes by attribute</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="buildings.HousingStock.label2area">
<span class="sig-name descname"><span class="pre">label2area</span></span><a class="headerlink" href="#buildings.HousingStock.label2area" title="Permalink to this definition">¶</a></dt>
<dd><p>pd.Series that returns area (m2) of the building based on archetypes attribute</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="buildings.HousingStock.label2horizon">
<span class="sig-name descname"><span class="pre">label2horizon</span></span><a class="headerlink" href="#buildings.HousingStock.label2horizon" title="Permalink to this definition">¶</a></dt>
<dd><p>pd.Series that returns investment horizon (yrs) of the building owner based on archetypes attribute</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="buildings.HousingStock.label2discount">
<span class="sig-name descname"><span class="pre">label2discount</span></span><a class="headerlink" href="#buildings.HousingStock.label2discount" title="Permalink to this definition">¶</a></dt>
<dd><p>pd.Series that returns discount rate (%/yr) of the building owner based on archetypes attribute</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="buildings.HousingStock.label2income">
<span class="sig-name descname"><span class="pre">label2income</span></span><a class="headerlink" href="#buildings.HousingStock.label2income" title="Permalink to this definition">¶</a></dt>
<dd><p>pd.Series that returns income (€/yr) of the building owner based on archetypes attribute</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="buildings.HousingStock.label2consumption">
<span class="sig-name descname"><span class="pre">label2consumption</span></span><a class="headerlink" href="#buildings.HousingStock.label2consumption" title="Permalink to this definition">¶</a></dt>
<dd><p>pd.Series that returns conventional consumption (kWh/m2.yr) of the building based on archetypes attribute</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_consumption_actual">
<span class="sig-name descname"><span class="pre">to_consumption_actual</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scenario</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_consumption_actual" title="Permalink to this definition">¶</a></dt>
<dd><p>returns actual consumption considering household specific behavior</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.acceleration_information">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">acceleration_information</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">knowledge</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_intangible</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info_max</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">learning_rate</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.acceleration_information" title="Permalink to this definition">¶</a></dt>
<dd><p>Decrease intangible cost to capture peer effects and knowledge diffusion.</p>
<p>Intangible renovation costs decrease according to a logistic curve with the same cumulative production so as
to capture peer effects and knowledge diffusion.
The rate of decrease (learning_rate) is set at 25% for a doubling of cumulative production.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>knowledge</strong> (<em>pd.Series</em>) – knowledge indexes match cost columns to reach final state after transition</p></li>
<li><p><strong>cost_intangible</strong> (<em>pd.DataFrame</em>) – </p></li>
<li><p><strong>info_max</strong> (<em>float</em>) – </p></li>
<li><p><strong>learning_rate</strong> (<em>float</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>cost_intangible</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.information_rate">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">information_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">knowledge</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">learning_rate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info_max</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.information_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns information rate.</p>
<p>More info_rate is high, more intangible_cost are low.
Intangible renovation costs decrease according to a logistic curve with the same cumulative
production so as to capture peer effects and knowledge diffusion.
intangible_cost[yr] = intangible_cost[calibrationyear] * info_rate with info rate [1-info_rate_max ; 1]
This function calibrate a logistic function, so rate of decrease is set at 25% for a doubling of cumulative
production.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>knowledge</strong> (<em>pd.Series</em>) – knowledge indexes match cost columns to reach final state after transition</p></li>
<li><p><strong>info_max</strong> (<em>float</em>) – </p></li>
<li><p><strong>learning_rate</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.ini_all_indexes">
<span class="sig-name descname"><span class="pre">ini_all_indexes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.ini_all_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize values for all segments and transition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy_price</strong> (<em>pd.DataFrame</em>) – </p></li>
<li><p><strong>levels</strong> (<em>list</em><em>, </em><em>optional</em>) – stock built will only consider levels as input</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.ini_energy_cash_flows">
<span class="sig-name descname"><span class="pre">ini_energy_cash_flows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_price</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.ini_energy_cash_flows" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize exogenous variable that doesn’t depend on dynamic to fasten the script.</p>
<p>For instance budget_share only depends on energy_price, and income that are exogenous variables.
So does, heating_intensity and consumption_actual.</p>
<p>List of attribute initialized:
Initialized by launching self.to_consumption_actual(energy_price)
- buildings.area: pd.Series (doesn’t depend on time)
- buildings.budget_share: pd.DataFrame (depends on energy_price and income so depend on time)
- buildings.heating_intensity: pd.DataFrame (depends on energy_price and income so depend on time)
- buildings.consumption_conventional: pd.Series (doesn’t depend on time)
- buildings.consumption_actual: pd.DataFrame (depends on energy_price and income so depend on time)</p>
<ul class="simple">
<li><p>buildings.energy_cash_flows[‘conventional’]: pd.DataFrame</p></li>
<li><p>buildings.energy_cash_flows_disc[‘conventional’]: pd.DataFrame</p></li>
<li><p>buildings.energy_cash_flows[‘actual’]: pd.DataFrame</p></li>
<li><p>buildings.energy_cash_flows_disc[‘actual’]: pd.DataFrame</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>energy_price</strong> (<em>pd.DataFrame</em>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.initial2final">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">initial2final</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">idx_full</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.initial2final" title="Permalink to this definition">¶</a></dt>
<dd><p>Catch final state segment values as the initial state of another segment.</p>
<p>When a segment final state match another segment initial state,
it’s therefore fasten to directly catch the value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ds</strong> (<em>pd.Series</em>) – Data to pick values</p></li>
<li><p><strong>idx_full</strong> (<em>pd.MultiIndex</em>) – Corresponds to final state data index</p></li>
<li><p><strong>transition</strong> (<em>list</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.lcc2market_share">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">lcc2market_share</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lcc_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.lcc2market_share" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns market share for each segment based on lcc_df.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>lcc_df</strong> (<em>pd.DataFrame</em><em> or </em><em>pd.Series</em>) – </p></li>
<li><p><strong>nu</strong> (<em>int</em><em>, </em><em>optional</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>DataFrame if lcc_df is DataFrame or Series if lcc_df is Series.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.learning_by_doing">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">learning_by_doing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">knowledge</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">learning_rate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_lim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.learning_by_doing" title="Permalink to this definition">¶</a></dt>
<dd><p>Decrease capital cost after considering learning-by-doing effect.</p>
<p>Investment costs decrease exponentially with the cumulative sum of operations so as to capture
a “learning-by-doing” process.
The rate of cost reduction is set at 15% in new construction and 10% in renovation for a doubling of production.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>knowledge</strong> (<em>pd.Series</em>) – knowledge indexes match cost columns to reach final state after transition</p></li>
<li><p><strong>cost</strong> (<em>pd.DataFrame</em>) – </p></li>
<li><p><strong>learning_rate</strong> (<em>float</em>) – </p></li>
<li><p><strong>cost_lim</strong> (<em>optional</em><em>, </em><em>pd.DataFrame</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.mul_consumption">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">mul_consumption</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">consumption</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mul_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">option</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'initial'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.mul_consumption" title="Permalink to this definition">¶</a></dt>
<dd><p>Multiply any pd.DataFrame to consumption.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>consumption</strong> (<em>pd.DataFrame</em><em> or </em><em>pd.Series</em>) – </p></li>
<li><p><strong>mul_df</strong> (<em>pd.DataFrame</em><em> or </em><em>pd.Series</em>) – </p></li>
<li><p><strong>option</strong> (<em>str</em><em>, </em><em>{'initial'</em><em>, </em><em>'final'}</em><em>, </em><em>default 'initial'</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame or pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_calibration_market_share">
<span class="sig-name descname"><span class="pre">to_calibration_market_share</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_prices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">market_share_objective</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_invest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conventional'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_calibration_market_share" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns intangible costs by calibrating market_share.</p>
<p>Intangible costs are calibrated so that the observed market shares are reproduced in the initial year.
Intangible costs are calibrated so that the life-cycle cost model, fed with the investment costs,
matches the observed market shares.</p>
<p>For each segment:
LCC final is calculated (depends on Occupancy status, Housing type, Income class owner,
Energy performance initial, Heating energy initial, transition), then Market Share.
transition here is Energy performance
NB: MS doesn’t depend on Income class (tenant), so to fasten the function it can be first removed.
Solver finds Intangible cost for each segment to match the observed market share.
–&gt; Intangible cost(Occupancy status, Housing type, Income class owner, Energy performance initial,
Heating energy initial, Energy performance final)</p>
<p>NB: Observed market share only depends on Energy performance initial and Energy performance final.
Each segment with the same performance transition need to match the same observed market shares.</p>
<p>energy_prices: pd.DataFrame
market_share_objective: pd.DataFrame</p>
<blockquote>
<div><p>observed market share to match</p>
</div></blockquote>
<dl class="simple">
<dt>folder_output: str, optional</dt><dd><p>if not None, will dump cost_intangible in .pkl file</p>
</dd>
</dl>
<p>cost_invest: pd.DataFrame, optional
consumption: {‘conventional’, ‘actual’}, default ‘conventional’
policies: list, optional</p>
<blockquote>
<div><p>policies to consider in the market share</p>
</div></blockquote>
<dl class="simple">
<dt>pd.DataFrame</dt><dd><p>Intangible cost,</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_consumption">
<span class="sig-name descname"><span class="pre">to_consumption</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">consumption</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_consumption" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns consumption conventional or actual based on consumption parameter.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>consumption</strong> (<em>str</em><em>, </em><em>{'conventional'</em><em>, </em><em>'actual'}</em>) – </p></li>
<li><p><strong>segments</strong> (<em>pd.Index</em><em>, </em><em>optional</em>) – If segments is not filled, use self.segments.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id0">
<span class="sig-name descname"><span class="pre">to_consumption_actual</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_prices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detailed_output</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd><p>Return energy consumption for every segment and all years.</p>
<p>A growing number of academic studies point to a gap between the conventional energy consumption predicted
by energy performance certificates and actual energy consumption.
The most common explanation is a more intense heating of the heating infrastructure after an energy efficiency
improvement – a phenomenon commonly referred to as the “rebound effect.”</p>
<p>Heating Intensity = -0.191 * log(Income Share) + 0.1105</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy_prices</strong> (<em>pd.DataFrame</em>) – </p></li>
<li><p><strong>detailed_output</strong> (<em>boolean</em><em>, </em><em>default False</em>) – </p></li>
<li><p><strong>segments</strong> (<em>pd.Index</em><em>, </em><em>optional</em>) – If segments is not filled, use self.segments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>consumption_actual (rows: segments, columns: years)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_discount_factor">
<span class="sig-name descname"><span class="pre">to_discount_factor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scenario_horizon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scenario_discount</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_discount_factor" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate discount factor for all segments.</p>
<p>Discount factor can be used when agents doesn’t anticipate prices evolution.
Discount factor does not depend on the year it is calculated.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_discounted">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">to_discounted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rate</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_discounted" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns discounted DataFrame from DataFrame.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – </p></li>
<li><p><strong>rate</strong> (<em>float</em><em> or </em><em>pd.Series</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_emission_saving">
<span class="sig-name descname"><span class="pre">to_emission_saving</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">co2_content</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conventional'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_emission_saving" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate emission saving between initial and final state.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>co2_content</strong> (<em>pd.DataFrame</em>) – </p></li>
<li><p><strong>transition</strong> (<em>{</em><em>(</em><em>Energy performance</em><em>, </em><em>)</em><em>, </em><em>(</em><em>Heating energy</em><em>, </em><em>)</em><em>, </em><em>(</em><em>Energy performance</em><em>, </em><em>Heating energy</em><em>)</em>) – </p></li>
<li><p><strong>consumption</strong> (<em>{'conventional'</em><em>, </em><em>'actual'}</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>{transition: {consumption: pd.Series or pd.DataFrame}}</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_emission_saving_lc">
<span class="sig-name descname"><span class="pre">to_emission_saving_lc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">co2_content</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conventional'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">discount</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.04</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_emission_saving_lc" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate life-cycle emission saving between initial and final state for the entire project duration)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>co2_content</strong> (<em>pd.DataFrame</em>) – </p></li>
<li><p><strong>transition</strong> (<em>{</em><em>(</em><em>Energy performance</em><em>, </em><em>)</em><em>, </em><em>(</em><em>Heating energy</em><em>, </em><em>)</em><em>, </em><em>(</em><em>Energy performance</em><em>, </em><em>Heating energy</em><em>)</em>) – </p></li>
<li><p><strong>consumption</strong> (<em>{'conventional'</em><em>, </em><em>'actual'}</em>) – </p></li>
<li><p><strong>discount</strong> (<em>float</em><em>, </em><em>default 0.04</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>{transition: {consumption: pd.Series}}</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_energy_lcc">
<span class="sig-name descname"><span class="pre">to_energy_lcc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_prices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conventional'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_energy_lcc" title="Permalink to this definition">¶</a></dt>
<dd><p>Return segmented energy-life-cycle-cost discounted from segments, and energy prices year=yr.</p>
<p>Energy LCC is calculated on an segment-specific horizon, and using a segment-specific discount rate.
Because, time horizon depends of type of renovation (label, or heating energy), lcc needs to know which transition.
NB: transition defined the investment horizon.
Energy LCC depends on (Occupancy status, Housing type, Income class owner, Energy performance, Heating energy,
and transition).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy_prices</strong> (<em>pd.DataFrame</em>) – </p></li>
<li><p><strong>transition</strong> (<em>list</em><em>, </em><em>default</em><em> [</em><em>'Energy performance'</em><em>]</em>) – </p></li>
<li><p><strong>consumption</strong> (<em>str</em><em>, </em><em>{'conventional'</em><em>, </em><em>'actual}</em><em>, </em><em>default 'conventional'</em>) – </p></li>
<li><p><strong>segments</strong> (<em>pd.Index</em><em>, </em><em>optional</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_energy_lcc_final">
<span class="sig-name descname"><span class="pre">to_energy_lcc_final</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_prices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conventional'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_energy_lcc_final" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate energy life-cycle cost based on transition.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_final">
<span class="sig-name descname"><span class="pre">to_final</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_final" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pd.DataFrame</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ds</strong> (<em>pd.Series</em>) – </p></li>
<li><p><strong>transition</strong> (<em>list</em><em>, </em><em>default</em><em> [</em><em>'Energy performance'</em><em>, </em><em>'Heating energy'</em><em>]</em>) – </p></li>
<li><p><strong>segments</strong> (<em>pd.Index</em><em>, </em><em>optional</em>) – Use self.segments if input is not filled.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_lcc_final">
<span class="sig-name descname"><span class="pre">to_lcc_final</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_prices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_invest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_intangible</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conventional'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_lcc_final" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate life-cycle-cost of home-energy retrofits for every segment and every possible transition.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy_prices</strong> (<em>pd.DataFrame</em>) – index are heating energy and columns are years.</p></li>
<li><p><strong>cost_invest</strong> (<em>dict</em><em>, </em><em>optional</em>) – keys are transition (cost_invest[‘Energy performance’]) and item are pd.DataFrame</p></li>
<li><p><strong>cost_intangible</strong> (<em>dict</em><em>, </em><em>optional</em>) – keys are transition (cost_intangible[‘Energy performance’]) and item are pd.DataFrame</p></li>
<li><p><strong>consumption</strong> (<em>{'conventional'</em><em>, </em><em>'actual'}</em><em>, </em><em>default 'conventional</em>) – </p></li>
<li><p><strong>transition</strong> (<em>list</em><em>, </em><em>default</em><em> [</em><em>'Energy performance'</em><em>]</em>) – define transition. Transition can be defined as label transition, energy transition, or label-energy transition.</p></li>
<li><p><strong>policies</strong> (<em>list</em><em>, </em><em>optional</em>) – list of Policies object</p></li>
<li><p><strong>segments</strong> (<em>pd.MultiIndex</em><em>, </em><em>optional</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>life-cycle-cost DataFrame is structured for every initial state (index) to every final state defined by transition (columns).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_market_share">
<span class="sig-name descname"><span class="pre">to_market_share</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_prices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conventional'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_invest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_intangible</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_market_share" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns market share for each segment and each possible final state.</p>
<p>Parameter nu characterizing the heterogeneity of preferences is set to 8 in the model.
Intangible costs are calibrated so that the observed market shares are reproduced in the initial year.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy_prices</strong> (<em>pd.DataFrame</em>) – </p></li>
<li><p><strong>cost_invest</strong> (<em>dict</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>cost_intangible</strong> (<em>dict</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>consumption</strong> (<em>{'conventional'</em><em>, </em><em>'actual'}</em><em>, </em><em>default 'conventional</em>) – </p></li>
<li><p><strong>transition</strong> (<em>list</em><em>, </em><em>{</em><em>[</em><em>'Energy performance'</em><em>]</em><em>, </em><em>[</em><em>'Heating energy'</em><em>]</em><em>, </em><em>[</em><em>'Energy performance'</em><em>, </em><em>'Heating energy'</em><em>]</em><em>}</em><em>,</em>) – default [‘Energy performance’]</p></li>
<li><p><strong>policies</strong> (<em>list</em><em>, </em><em>optional</em>) – List of Policies object</p></li>
<li><p><strong>segments</strong> (<em>pd.MultiIndex</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>nu</strong> (<em>float</em><em> or </em><em>int</em><em>, </em><em>default 8.0</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>market_share, lcc_final</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_segments_construction">
<span class="sig-name descname"><span class="pre">to_segments_construction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">lvl2drop</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_lvl_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_segments_construction" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns segments_new from segments.</p>
<p>Segments_new doesn’t get Income class owner at first and got other Energy performance value.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_share_multi_family_tot">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">to_share_multi_family_tot</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stock_needed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_share_multi_family_tot" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate share of multi-family buildings in the total stock.</p>
<p>In Res-IRF 2.0, the share of single- and multi-family dwellings was held constant in both existing and new
housing stocks, but at different levels; it therefore evolved in the total stock by a simple composition
effect. These dynamics are now more precisely parameterized in Res-IRF 3.0 thanks to recent empirical
work linking the increase in the share of multi-family housing in the total stock to the rate of growth of
the total stock housing growth (Fisch et al., 2015).
This relationship in particular reflects urbanization effects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>stock_needed</strong> (<em>pd.Series</em>) – </p></li>
<li><p><strong>param</strong> (<em>float</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary with year as keys and share of multi-family in the total stock as value.
{2012: 0.393, 2013: 0.394, 2014: 0.395}</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_stock_area_seg">
<span class="sig-name descname"><span class="pre">to_stock_area_seg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scenario</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segments</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_stock_area_seg" title="Permalink to this definition">¶</a></dt>
<dd><p>Suppose that area_seg levels are included in self.levels.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_summed">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">to_summed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yr_ini</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizon</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_summed" title="Permalink to this definition">¶</a></dt>
<dd><p>Summed df based on its horizon.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pd.DataFrame</em>) – pd.MultiIndex as index, and years as columns</p></li>
<li><p><strong>yr_ini</strong> – int</p></li>
<li><p><strong>horizon</strong> (<em>pd.Series</em>) – pd.MultiIndex as index</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStock.to_transition">
<span class="sig-name descname"><span class="pre">to_transition</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStock.to_transition" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns pd.DataFrame from pd.Series by adding final state as column.</p>
<p>Create a MultiIndex columns when it occurs simultaneous transitions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ds</strong> (<em>pd.Series</em>) – </p></li>
<li><p><strong>transition</strong> (<em>list</em><em>, </em><em>default</em><em> [</em><em>'Energy performance'</em><em>]</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="buildings.HousingStockConstructed">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">buildings.</span></span><span class="sig-name descname"><span class="pre">HousingStockConstructed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stock</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levels_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stock_needed_ts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param_share_multi_family</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">os_share_ht</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">io_share_seg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stock_area_existing_seg</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label2area</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label2horizon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label2discount</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label2income</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label2consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockConstructed" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStockConstructed.to_calibration_market_share">
<span class="sig-name descname"><span class="pre">to_calibration_market_share</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">market_share_objective</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_invest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conventional'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockConstructed.to_calibration_market_share" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns intangible costs construction by calibrating market_share.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStockConstructed.to_flow_area_constructed_ini">
<span class="sig-name descname"><span class="pre">to_flow_area_constructed_ini</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stock_area_existing_seg</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockConstructed.to_flow_area_constructed_ini" title="Permalink to this definition">¶</a></dt>
<dd><p>To initialize construction knowledge returns area of 2.5 A DPE and 2 B DPE.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStockConstructed.to_flow_constructed_dm">
<span class="sig-name descname"><span class="pre">to_flow_constructed_dm</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockConstructed.to_flow_constructed_dm" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns flow of constructed buildings segmented by decision-maker (dm) (Housing type, Occupancy status).</p>
<ol class="arabic simple">
<li><p>Increase in the share of multi-family housing in the total stock.</p></li>
<li><p>The share of owner-occupied and rented dwellings is held constant.</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>MultiIndex: (Housing type, Occupancy status), value: buildings constructed</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStockConstructed.to_flow_constructed_dm_he_ep">
<span class="sig-name descname"><span class="pre">to_flow_constructed_dm_he_ep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_intangible</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_invest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conventional'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockConstructed.to_flow_constructed_dm_he_ep" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns flow of constructed buildings segmented.</p>
<ol class="arabic simple">
<li><p>Calculate construction flow segmented by decision-maker:</p></li>
<li><p>Calculate the market-share of Heating energy and Energy performance type by decision-maker: market_share_dm;</p></li>
<li><p>Calculate construction flow segmented by decision-maker and heating energy, energy performance;</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy_price</strong> (<em>pd.DataFrame</em>) – </p></li>
<li><p><strong>cost_intangible</strong> (<em>pd.DataFrame</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>cost_invest</strong> (<em>pd.DataFrame</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>consumption</strong> (<em>{'conventional'</em><em>, </em><em>'actual'}</em><em>, </em><em>default 'conventional'</em>) – </p></li>
<li><p><strong>nu</strong> (<em>float</em><em>, </em><em>default 8.0</em>) – </p></li>
<li><p><strong>policies</strong> (<em>list</em><em>, </em><em>optional</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>flow of constructed housing segmented by (Housing type, Occupancy status, Energy performance,
Heating energy)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStockConstructed.to_flow_constructed_seg">
<span class="sig-name descname"><span class="pre">to_flow_constructed_seg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_intangible</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_invest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockConstructed.to_flow_constructed_seg" title="Permalink to this definition">¶</a></dt>
<dd><p>Add Income class and Income class owner levels to flow_constructed.</p>
<dl class="simple">
<dt>io_share_seg: pd.DataFrame</dt><dd><p>for each segment (rows) distribution of income class owner decile (columns)</p>
</dd>
<dt>ic_share_seg: pd.DataFrame</dt><dd><p>for each segment (rows) distribution of income class owner decile (columns)</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy_price</strong> (<em>pd.DataFrame</em>) – cost_intangible: pd.DataFrame, optional</p></li>
<li><p><strong>cost_intangible</strong> (<em>pd.DataFrame</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>cost_invest</strong> (<em>pd.DataFrame</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>consumption</strong> (<em>{'conventional'</em><em>, </em><em>'actual'}</em><em>, </em><em>default 'conventional'</em>) – </p></li>
<li><p><strong>nu</strong> (<em>float</em><em>, </em><em>default 8.0</em>) – </p></li>
<li><p><strong>policies</strong> (<em>list</em><em>, </em><em>optional</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>flow of constructed housing segmented by (Housing type, Occupancy status, Energy performance,
Heating energy, Income class, Income class owner)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStockConstructed.to_share_housing_type">
<span class="sig-name descname"><span class="pre">to_share_housing_type</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockConstructed.to_share_housing_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns share of Housing type (‘Multi-family’, ‘Single-family’) in the new constructed housings.</p>
<p>Share of multi-family in the total stock to reflect urbanization effects.
Demolition dynamic is made endogenously and therefore construction should reflect the evolution..</p>
<p>Share_multifamily[year] = Stock_multifamily[year] / Stock[year]
Share_multifamily[year] = (Stock_multifamily[year - 1] + Flow_multifamily_construction) / Stock[year]
Share_multifamily[year] = (Share_multifamily[year - 1] * Stock[year - 1] + Flow_multifamily_construction) / Stock[year]
Flow_multifamily_construction = Share_multifamily[year] * Stock[year] - Share_multifamily[year - 1] * Stock[year - 1]</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>index: housing type, value: share of housing type in the stock of constructed buildings.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStockConstructed.update_area_construction">
<span class="sig-name descname"><span class="pre">update_area_construction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">elasticity_area_new_ini</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">available_income_real_pop_ds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">area_max_construction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockConstructed.update_area_construction" title="Permalink to this definition">¶</a></dt>
<dd><p>Every year, average area of new buildings increase with available income.</p>
<p>Trend is based on elasticity area / income.
eps_area_new decrease over time and reduce elasticity while average area converge towards area_max.
exogenous_dict[‘population_total_ds’]</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>elasticity_area_new_ini</strong> – </p></li>
<li><p><strong>available_income_real_pop_ds</strong> (<em>pd.Series</em>) – </p></li>
<li><p><strong>area_max_construction</strong> – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStockConstructed.update_flow_constructed_seg">
<span class="sig-name descname"><span class="pre">update_flow_constructed_seg</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_price</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_intangible</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_invest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conventional'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nu</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockConstructed.update_flow_constructed_seg" title="Permalink to this definition">¶</a></dt>
<dd><p>Update HousingConstructed object flow_constructed_seg attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy_price</strong> (<em>pd.DataFrame</em>) – cost_intangible: pd.DataFrame, optional</p></li>
<li><p><strong>cost_intangible</strong> (<em>dict</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>cost_invest</strong> (<em>dict</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>consumption</strong> (<em>{'conventional'</em><em>, </em><em>'actual'}</em><em>, </em><em>default 'conventional'</em>) – </p></li>
<li><p><strong>nu</strong> (<em>float</em><em>, </em><em>default 8.0</em>) – </p></li>
<li><p><strong>policies</strong> (<em>list</em><em>, </em><em>optional</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="buildings.HousingStockRenovated">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">buildings.</span></span><span class="sig-name descname"><span class="pre">HousingStockRenovated</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stock_seg</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levels_values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">year</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2018</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">residual_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destruction_rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rate_renovation_ini</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">learning_year</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npv_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rate_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rate_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label2area</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label2horizon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label2discount</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label2income</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label2consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockRenovated" title="Permalink to this definition">¶</a></dt>
<dd><p>Class that represents an existing buildings stock that can (i) renovate buildings, (ii) demolition buildings.</p>
<p>Some stocks imply change for other stock: stock_master.
Stock_master should be property as the setter methods need to change all dependencies stock: stock_slave.
As they need to be initialize there is a private attribute in the init.
.. rubric:: Example</p>
<p>A modification of stock_seg will change stock_mobile_seg. stock_mobile_seg cannot change directly.</p>
<p>Some stocks doesn’t have stock_master and stock_slave: they are public.
Example:</p>
<p>Some stocks need to be stored in a dict. Their modification need to be updated in the dict.
Theses stocks are properties as the setter method updates the stock_dict.
As they need to be initialize there is a private attribute in the init.
Dict cannot be change directly as they depend on stock (only when to change in the setter method of the stock)
.. rubric:: Example</p>
<p>_stock_knowledge_dict = _stock_knowledge_dict.append({year: stock_knowledge})</p>
<p>These stocks can be a slave stock. In that case all updates are in the stock master setter methods.
.. rubric:: Example</p>
<p>_stock_seg_mobile &amp; _stock_seg_mobile_dict</p>
<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStockRenovated.calibration_renovation_rate">
<span class="sig-name descname"><span class="pre">calibration_renovation_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_prices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">renovation_rate_obj</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conventional'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_invest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_intangible</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockRenovated.calibration_renovation_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibration of ρ parameter of the renovation rate function (logistic function of the NPV).</p>
<p>Renovation rate of dwellings labelled is calculated as a logistic function of the NPV.
The logistic form captures heterogeneity in heating preference and habits,
assuming they are normally distributed.</p>
<p>Parameter ρ is calibrated, for each type of decision-maker and each initial label (i.e., 6x6=36 values),
so that the NPVs calculated with the subsidies in effect in 2012 (see main article)
reproduce the observed renovation rates.</p>
<p>Renovation rate observed depends on (Occupancy status, Housing type)
NPV that depends on MS and so LCC: (Energy performance initial, Energy performance final,</p>
<blockquote>
<div><p>Occupancy status, Housing type, Income class owner)</p>
</div></blockquote>
<dl class="simple">
<dt>So Parameter ρ should depend on  (Occupancy status, Housing type, Energy performance initial,</dt><dd><p>Energy performance final, Heating energy intial)</p>
</dd>
</dl>
<p>But, function removed Heating energy initial and Income class owner dependency.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy_prices</strong> (<em>pd.DataFrame</em>) – </p></li>
<li><p><strong>renovation_rate_obj</strong> (<em>pd.Series</em>) – </p></li>
<li><p><strong>consumption</strong> (<em>{'conventional'</em><em>, </em><em>'actual'}</em><em>, </em><em>default 'conventional'</em>) – </p></li>
<li><p><strong>cost_invest</strong> (<em>dict</em>) – </p></li>
<li><p><strong>cost_intangible</strong> (<em>dict</em>) – </p></li>
<li><p><strong>policies</strong> (<em>list</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>ρ parameters by segment</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStockRenovated.flow_area_renovated_seg_ini">
<span class="sig-name descname"><span class="pre">flow_area_renovated_seg_ini</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rate_renovation_ini</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">learning_year</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockRenovated.flow_area_renovated_seg_ini" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize flow area renovated.</p>
<dl class="simple">
<dt>Flow area renovation is defined as:</dt><dd><p>renovation rate (2.7%/yr) x number of learning years (10 yrs) x renovated area (m2).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStockRenovated.to_flow_demolition_seg">
<span class="sig-name descname"><span class="pre">to_flow_demolition_seg</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockRenovated.to_flow_demolition_seg" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns stock_demolition -  segmented housing number demolition.</p>
<p>Buildings to destroy are chosen in stock_mobile.
1. type_housing_demolition is respected to match decision-maker proportion; - type_housing_demolition_reindex
2. income_class, income_class_owner, heating_energy match stock_remaining proportion; - type_housing_demolition_wo_performance
3. worst energy_performance_label for each segment are targeted. - stock_demolition</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pd.Series segmented</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStockRenovated.to_flow_knowledge">
<span class="sig-name descname"><span class="pre">to_flow_knowledge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flow_area_renovated_seg</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockRenovated.to_flow_knowledge" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns knowledge renovation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>flow_area_renovated_seg</strong> (<em>pd.DataFrame</em>) – Data array containing renovation are for each segment and each transition.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStockRenovated.to_flow_remained">
<span class="sig-name descname"><span class="pre">to_flow_remained</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_prices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conventional'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_invest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_intangible</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">renovation_obligation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mutation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rotation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockRenovated.to_flow_remained" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate flow_remained for each segment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy_prices</strong> (<em>pd.DataFrame</em>) – </p></li>
<li><p><strong>cost_invest</strong> (<em>dict</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>cost_intangible</strong> (<em>dict</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>consumption</strong> (<em>str</em><em>, </em><em>default 'conventional'</em>) – </p></li>
<li><p><strong>policies</strong> (<em>list</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>renovation_obligation</strong> (<em>RenovationObligation</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>mutation</strong> (<em>pd.Series</em><em> or </em><em>float</em><em>, </em><em>default 0.0</em>) – </p></li>
<li><p><strong>rotation</strong> (<em>pd.Series</em><em> or </em><em>float</em><em>, </em><em>default 0.0</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>flow_remained_seg, pd.Series</em> – positive (+) flow for buildings segment reached by the renovation (final state),
negative (-) flow for buildings segment (initial state) that have been renovated.</p></li>
<li><p><em>flow_area_renovation_seg, pd.Series</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStockRenovated.to_flow_renovation_ep">
<span class="sig-name descname"><span class="pre">to_flow_renovation_ep</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_prices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conventional'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_invest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_intangible</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">renovation_obligation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mutation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rotation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockRenovated.to_flow_renovation_ep" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate flow renovation by energy performance final.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy_prices</strong> (<em>pd.DataFrame</em>) – </p></li>
<li><p><strong>cost_invest</strong> (<em>dict</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>cost_intangible</strong> (<em>dict</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>consumption</strong> (<em>str</em><em>, </em><em>default 'conventional'</em>) – </p></li>
<li><p><strong>policies</strong> (<em>dict</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>renovation_obligation</strong> (<em>RenovationObligation</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>mutation</strong> (<em>pd.Series</em><em> or </em><em>float</em><em>, </em><em>default 0.0</em>) – </p></li>
<li><p><strong>rotation</strong> (<em>pd.Series</em><em> or </em><em>float</em><em>, </em><em>default 0.0</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStockRenovated.to_flow_renovation_ep_energy">
<span class="sig-name descname"><span class="pre">to_flow_renovation_ep_energy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_prices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conventional'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_invest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_intangible</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">renovation_obligation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mutation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rotation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockRenovated.to_flow_renovation_ep_energy" title="Permalink to this definition">¶</a></dt>
<dd><p>De-aggregate stock_renovation_label by final heating energy.</p>
<p>stock_renovation columns segmented by final label and final heating energy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy_prices</strong> (<em>pd.DataFrame</em>) – </p></li>
<li><p><strong>cost_invest</strong> (<em>dict</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>cost_intangible</strong> (<em>dict</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>consumption</strong> (<em>str</em><em>, </em><em>default 'conventional'</em>) – </p></li>
<li><p><strong>policies</strong> (<em>list</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>renovation_obligation</strong> (<em>RenovationObligation</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>mutation</strong> (<em>pd.Series</em><em> or </em><em>float</em><em>, </em><em>default 0.0</em>) – </p></li>
<li><p><strong>rotation</strong> (<em>pd.Series</em><em> or </em><em>float</em><em>, </em><em>default 0.0</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="buildings.HousingStockRenovated.to_renovation_rate">
<span class="sig-name descname"><span class="pre">to_renovation_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_prices</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consumption</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conventional'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_invest</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_intangible</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policies</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#buildings.HousingStockRenovated.to_renovation_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>Routine calculating renovation rate from segments for a particular yr.</p>
<p>Cost (energy, investment) &amp; rho parameter are also required.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy_prices</strong> (<em>pd.DataFrame</em>) – </p></li>
<li><p><strong>transition</strong> (<em>list</em>) – </p></li>
<li><p><strong>cost_invest</strong> (<em>dict</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>cost_intangible</strong> (<em>dict</em><em>, </em><em>optional</em>) – </p></li>
<li><p><strong>consumption</strong> (<em>str</em><em>, </em><em>default 'conventional'</em>) – </p></li>
<li><p><strong>policies</strong> (<em>list</em><em>, </em><em>optional</em>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-policies"></span><dl class="py class">
<dt class="sig sig-object py" id="policies.EnergyTaxes">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">policies.</span></span><span class="sig-name descname"><span class="pre">EnergyTaxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calibration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#policies.EnergyTaxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents energy taxes.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="policies.EnergyTaxes.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#policies.EnergyTaxes.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the policy.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.EnergyTaxes.start">
<span class="sig-name descname"><span class="pre">start</span></span><a class="headerlink" href="#policies.EnergyTaxes.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Year policy starts.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.EnergyTaxes.end">
<span class="sig-name descname"><span class="pre">end</span></span><a class="headerlink" href="#policies.EnergyTaxes.end" title="Permalink to this definition">¶</a></dt>
<dd><p>Year policy ends.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.EnergyTaxes.calibration">
<span class="sig-name descname"><span class="pre">calibration</span></span><a class="headerlink" href="#policies.EnergyTaxes.calibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Should policy be used for the calibration step?</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool, default: False</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.EnergyTaxes.kind">
<span class="sig-name descname"><span class="pre">kind</span></span><a class="headerlink" href="#policies.EnergyTaxes.kind" title="Permalink to this definition">¶</a></dt>
<dd><p>Unit of measure of the value attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>{‘%’, ‘€/kWh’, ‘€/gCO2’}</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.EnergyTaxes.value">
<span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#policies.EnergyTaxes.value" title="Permalink to this definition">¶</a></dt>
<dd><p>Value of energy taxes.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float, pd.Series or pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="policies.EnergyTaxes.price_to_taxes">
<span class="sig-name descname"><span class="pre">price_to_taxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_prices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">co2_content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#policies.EnergyTaxes.price_to_taxes" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate energy taxes cost.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id1">
<span class="sig-name descname"><span class="pre">price_to_taxes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">energy_prices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">co2_content</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#id1" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate energy taxes cost based on self.kind unit of measure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>energy_prices</strong> (<em>pd.Series</em><em> or </em><em>pd.DataFrame</em><em>, </em><em>optional</em>) – Energy prices in €/kWh. Heating energy as index, and years as columns.</p></li>
<li><p><strong>co2_content</strong> (<em>pd.Series</em><em> or </em><em>pd.DataFrame</em><em>, </em><em>optional</em>) – CO2 content in gCO2/kWh. Heating energy as index, and years as columns.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Energy tax cost in €/kWh.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="policies.PublicPolicy">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">policies.</span></span><span class="sig-name descname"><span class="pre">PublicPolicy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">policy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calibration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#policies.PublicPolicy" title="Permalink to this definition">¶</a></dt>
<dd><p>Public policy parent class.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="policies.PublicPolicy.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#policies.PublicPolicy.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the policy.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.PublicPolicy.start">
<span class="sig-name descname"><span class="pre">start</span></span><a class="headerlink" href="#policies.PublicPolicy.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Year policy starts.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.PublicPolicy.end">
<span class="sig-name descname"><span class="pre">end</span></span><a class="headerlink" href="#policies.PublicPolicy.end" title="Permalink to this definition">¶</a></dt>
<dd><p>Year policy ends.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.PublicPolicy.policy">
<span class="sig-name descname"><span class="pre">policy</span></span><a class="headerlink" href="#policies.PublicPolicy.policy" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>{‘energy_taxes’, ‘subsidies’}</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.PublicPolicy.calibration">
<span class="sig-name descname"><span class="pre">calibration</span></span><a class="headerlink" href="#policies.PublicPolicy.calibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Should policy be used for the calibration step?</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool, default: False</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="policies.RegulatedLoan">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">policies.</span></span><span class="sig-name descname"><span class="pre">RegulatedLoan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ir_regulated</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ir_market</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">principal_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">principal_min</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizon</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">targets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calibration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#policies.RegulatedLoan" title="Permalink to this definition">¶</a></dt>
<dd><p>Loan backed by the state to buy technology capex.</p>
<p>Instead of paying interest rate at ir_market (%/yr), households only pays ir_regulated.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="policies.RegulatedLoan.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#policies.RegulatedLoan.name" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.RegulatedLoan.start">
<span class="sig-name descname"><span class="pre">start</span></span><a class="headerlink" href="#policies.RegulatedLoan.start" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.RegulatedLoan.end">
<span class="sig-name descname"><span class="pre">end</span></span><a class="headerlink" href="#policies.RegulatedLoan.end" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.RegulatedLoan.ir_regulated">
<span class="sig-name descname"><span class="pre">ir_regulated</span></span><a class="headerlink" href="#policies.RegulatedLoan.ir_regulated" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float or pd.Series, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.RegulatedLoan.ir_market">
<span class="sig-name descname"><span class="pre">ir_market</span></span><a class="headerlink" href="#policies.RegulatedLoan.ir_market" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float or pd.Series, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.RegulatedLoan.principal_max">
<span class="sig-name descname"><span class="pre">principal_max</span></span><a class="headerlink" href="#policies.RegulatedLoan.principal_max" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float or pd.Series, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.RegulatedLoan.horizon">
<span class="sig-name descname"><span class="pre">horizon</span></span><a class="headerlink" href="#policies.RegulatedLoan.horizon" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int or pd.Series, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.RegulatedLoan.horizon_max">
<span class="sig-name descname"><span class="pre">horizon_max</span></span><a class="headerlink" href="#policies.RegulatedLoan.horizon_max" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int or pd.Series, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.RegulatedLoan.horizon_min">
<span class="sig-name descname"><span class="pre">horizon_min</span></span><a class="headerlink" href="#policies.RegulatedLoan.horizon_min" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int or pd.Series, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.RegulatedLoan.targets">
<span class="sig-name descname"><span class="pre">targets</span></span><a class="headerlink" href="#policies.RegulatedLoan.targets" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>pd.DataFrame, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">interest_cost:</span> <span class="pre">calculate</span> <span class="pre">interest_cost</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">loan_approximate2subsidy(principal):</span> <span class="pre">calculate</span> <span class="pre">subsidies</span> <span class="pre">as</span> <span class="pre">opportunity</span> <span class="pre">cost</span> <span class="pre">for</span> <span class="pre">the</span> <span class="pre">household</span> <span class="pre">for</span> <span class="pre">a</span> <span class="pre">principal.</span></span></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">principal</span> <span class="pre">is</span> <span class="pre">a</span> <span class="pre">capex</span> <span class="pre">from</span> <span class="pre">a</span> <span class="pre">initial</span> <span class="pre">state</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">final</span> <span class="pre">state.</span></span></dt>
<dd></dd></dl>

<p class="rubric">Examples</p>
<dl class="simple">
<dt>eptz = RegulatedLoan(‘test’, 2018, 2030,</dt><dd><p>ir_regulated=None, ir_market=0.05,
principal_max=1000,
horizon=10)</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">eptz</span><span class="o">.</span><span class="n">to_opportunity_cost</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">eptz</span><span class="o">.</span><span class="n">to_opportunity_cost</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="policies.RegulatedLoan.apply_targets">
<span class="sig-name descname"><span class="pre">apply_targets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">principal</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#policies.RegulatedLoan.apply_targets" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns principal for transition that are targeted by the regulated loan.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>self.targets</strong> (<em>pd.DataFrame</em>) – 1 when targeted, otherwise 0</p></li>
<li><p><strong>principal</strong> (<em>pd.DataFrame</em>) – capex of a transition from row to column</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="policies.RegulatedLoan.interest_cost">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">interest_cost</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">interest_rate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_period</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">principal</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#policies.RegulatedLoan.interest_cost" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns total interest cost.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>interest_rate</strong> (<em>float</em>) – loan interest rate (%/period)</p></li>
<li><p><strong>n_period</strong> (<em>float</em>) – number of periods</p></li>
<li><p><strong>principal</strong> (<em>float</em>) – loan amount</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">interest_cost</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">interest_cost</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">100000</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="policies.RegulatedLoan.to_opp_cost">
<span class="sig-name descname"><span class="pre">to_opp_cost</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ir_market</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">horizon</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">principal</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#policies.RegulatedLoan.to_opp_cost" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the opportunity cost to get the regulated loan.</p>
<p>Calls self.apply_targets to restrict transition that are targeted by the policy.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ir_market</strong> (<em>float</em><em> or </em><em>pd.Series</em>) – market interest rate that would be paid without the regulated loan</p></li>
<li><p><strong>horizon</strong> (<em>int</em><em> or </em><em>pd.Series</em>) – loan horizon</p></li>
<li><p><strong>principal</strong> (<em>float</em><em> or </em><em>pd.Series</em><em> or </em><em>pd.DataFrame</em>) – capex of a transition from row to column</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float, pd.Series, pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="policies.RegulatedLoan.to_opportunity_cost">
<span class="sig-name descname"><span class="pre">to_opportunity_cost</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">principal</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#policies.RegulatedLoan.to_opportunity_cost" title="Permalink to this definition">¶</a></dt>
<dd><p>Every parameter must be the same shape.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="policies.Subsidies">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">policies.</span></span><span class="sig-name descname"><span class="pre">Subsidies</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transition</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cost_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subsidy_max</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calibration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#policies.Subsidies" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents energy taxes.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="policies.Subsidies.name">
<span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#policies.Subsidies.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the policy.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.Subsidies.start">
<span class="sig-name descname"><span class="pre">start</span></span><a class="headerlink" href="#policies.Subsidies.start" title="Permalink to this definition">¶</a></dt>
<dd><p>Year policy starts.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.Subsidies.end">
<span class="sig-name descname"><span class="pre">end</span></span><a class="headerlink" href="#policies.Subsidies.end" title="Permalink to this definition">¶</a></dt>
<dd><p>Year policy ends.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.Subsidies.calibration">
<span class="sig-name descname"><span class="pre">calibration</span></span><a class="headerlink" href="#policies.Subsidies.calibration" title="Permalink to this definition">¶</a></dt>
<dd><p>Should policy be used for the calibration step?</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>bool, default: False</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.Subsidies.kind">
<span class="sig-name descname"><span class="pre">kind</span></span><a class="headerlink" href="#policies.Subsidies.kind" title="Permalink to this definition">¶</a></dt>
<dd><p>Unit of measure of the value attribute.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>{‘%’, ‘€/kWh’, ‘€/gCO2’}</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.Subsidies.value">
<span class="sig-name descname"><span class="pre">value</span></span><a class="headerlink" href="#policies.Subsidies.value" title="Permalink to this definition">¶</a></dt>
<dd><p>Value of subsidies.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float, pd.Series or pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.Subsidies.transition">
<span class="sig-name descname"><span class="pre">transition</span></span><a class="headerlink" href="#policies.Subsidies.transition" title="Permalink to this definition">¶</a></dt>
<dd><p>Transition to apply the subsidy.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list, default: [‘Energy performance’]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.Subsidies.cost_max">
<span class="sig-name descname"><span class="pre">cost_max</span></span><a class="headerlink" href="#policies.Subsidies.cost_max" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum capex cost to receive a subsidy.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float, optional</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="policies.Subsidies.subsidy_max">
<span class="sig-name descname"><span class="pre">subsidy_max</span></span><a class="headerlink" href="#policies.Subsidies.subsidy_max" title="Permalink to this definition">¶</a></dt>
<dd><p>Maximum subsidy.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>float, optional</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<span class="target" id="module-utils"></span><dl class="py function">
<dt class="sig sig-object py" id="utils.add_level">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">add_level</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.add_level" title="Permalink to this definition">¶</a></dt>
<dd><p>Add index as a new level for ds.index or ds.columns.</p>
<p>Values of data does not depend on the new level (i.e. only defined by other levels).</p>
<p>ds: pd.Series
index: pd.Index or list-like
axis: {0, 1}, default 0</p>
<p>pd.Series</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.add_level_nan">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">add_level_nan</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.add_level_nan" title="Permalink to this definition">¶</a></dt>
<dd><p>Add level to ds with ‘nan’ as value index.</p>
<p>Value of pd.Series doesn’t change.</p>
<p>ds: pd.Series
level: str</p>
<p>pd.Series</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.apply_linear_rate">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">apply_linear_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.apply_linear_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a linear rate for a value based on years index.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>value</strong> (<em>float</em><em> or </em><em>int</em>) – </p></li>
<li><p><strong>rate</strong> (<em>float</em>) – </p></li>
<li><p><strong>index</strong> (<em>list of int</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.de_aggregate_columns">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">de_aggregate_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df2</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.de_aggregate_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Cumulate 2 share df based on the same level to get a de-aggregate DataFrame.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.de_aggregate_series">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">de_aggregate_series</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">df_share</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.de_aggregate_series" title="Permalink to this definition">¶</a></dt>
<dd><p>TOKEEP:Add new levels to ds_val using df_share.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ds_val</strong> – index: segments</p></li>
<li><p><strong>df_share</strong> (<em>pd.DataFrame</em>) – index: segments, columns: new level,
ds_share and ds_val segment must share at least on level.</p></li>
<li><p><strong>Returns</strong> – </p></li>
<li><p><strong>--------</strong> – </p></li>
<li><p><strong>pd.Series</strong> – MultiIndex series with</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.de_aggregating_series">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">de_aggregating_series</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds_val</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level_share_tot</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.de_aggregating_series" title="Permalink to this definition">¶</a></dt>
<dd><p>De-aggregate ds based on ds_prop by adding level.</p>
<p>ds_prop can be independent of ds, or some levels can match.</p>
<p>Example:</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.get_levels_values">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">get_levels_values</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">miindex</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levels</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.get_levels_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns MultiIndex for levels passed based on miiindex.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>miindex</strong> (<em>pd.MultiIndex</em>) – </p></li>
<li><p><strong>levels</strong> (<em>list</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.MultiIndex</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.miiindex_loc">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">miiindex_loc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slicing_midx</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.miiindex_loc" title="Permalink to this definition">¶</a></dt>
<dd><p>Select multiindex slices based on slice_midx when all levels are not passed.</p>
<p>slicing_midx must have at least on common level name with ds MultiIndex.
.. rubric:: Example</p>
<p>miiindex_loc(ds, slicing_midx)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.multi_index2tuple">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">multi_index2tuple</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">list_levels</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.multi_index2tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>Aggregate levels of a MultiIndex into a tuple based on specified levels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ds</strong> (<em>pd.Series</em>) – </p></li>
<li><p><strong>list_levels</strong> (<em>list</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.reindex_mi">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">reindex_mi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">miindex</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">levels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.reindex_mi" title="Permalink to this definition">¶</a></dt>
<dd><p>Return re-indexed DataFrame based on miindex using only few labels.</p>
<dl class="simple">
<dt>df: pd.DataFrame or pd.Series</dt><dd><p>data to reindex</p>
</dd>
<dt>miindex: pd.MultiIndex</dt><dd><p>master to index to reindex df</p>
</dd>
<dt>levels: list, default df.index.names</dt><dd><p>list of levels to use to reindex df</p>
</dd>
<dt>axis: {0, 1}, default 0</dt><dd><p>axis to reindex df</p>
</dd>
</dl>
<p>pd.DataFrame or pd.Series</p>
<blockquote>
<div><p>reindex_mi(surface_ds, segments, [‘Occupancy status’, ‘Housing type’]))
reindex_mi(cost_invest_ds, segments, [‘Heating energy final’, ‘Heating energy’]))</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.remove_rows">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">remove_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">level</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value_to_drop</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.remove_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove rows based on value a level of pandas MultiIndex.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ds</strong> (<em>pd.Series</em><em> or </em><em>pd.DataFrame</em>) – </p></li>
<li><p><strong>level</strong> (<em>str</em>) – name of MultiIndex levels</p></li>
<li><p><strong>value_to_drop</strong> – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.replace">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">replace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">replace_dict</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.replace" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace string in pandas Series (multiindexes included) with regex.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<em>pd.Series</em><em> or </em><em>pd.DataFrame</em>) – </p></li>
<li><p><strong>replace_dict</strong> (<em>dict</em>) – example: replace_dict = {‘old_val0’: ‘new_val0’, ‘old_val0’: ‘new_val0’}</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="utils.val2share">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">val2share</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">ds</span></em>, <em class="sig-param"><span class="pre">levels</span></em>, <em class="sig-param"><span class="pre">func=&lt;function</span> <span class="pre">&lt;lambda&gt;&gt;</span></em>, <em class="sig-param"><span class="pre">option='row'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#utils.val2share" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the share of value based on levels.</p>
<p>Get the proportion for every other levels than levels in ds.index.names.
If option = ‘columns’, return pd DataFrame with levels in index. Sum of each row is equal to 1.</p>
</dd></dl>

</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="LICENSE.html" class="btn btn-neutral float-right" title="License" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="appendix.html" class="btn btn-neutral float-left" title="Additional information" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Lucas Vivier.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>