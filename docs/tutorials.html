

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Tutorials Res-IRF fondation &mdash; Res-IRF 0.0 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Future developments" href="future_development.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Res-IRF
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Res-IRF</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Additional information</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="CHANGELOG.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="TODO.html">Todo</a></li>
<li class="toctree-l1"><a class="reference internal" href="future_development.html">Future developments</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorials Res-IRF fondation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Input">Input</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#Building-stock">Building stock</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Scope">Scope</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#Energy-use">Energy use</a></li>
<li class="toctree-l1"><a class="reference internal" href="#Transition-economics">Transition economics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Renovation-cost">Renovation cost</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Calculation-of-life-cycle-cost">Calculation of life-cycle-cost</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Energy-life-cycle-cost">Energy life-cycle cost</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Transition-life-cycle-cost">Transition life-cycle cost</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Discrete-choice-model:-Market-share">Discrete choice model: Market share</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Calibration">Calibration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Market-share-observed-–&gt;-Cost-intangible">Market share observed –&gt; Cost intangible</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Market-share-and-NPV">Market share and NPV</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="#Stock-dynamics">Stock dynamics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#Specific-input">Specific input</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Calibration-Renovation-rate-–&gt;-rho">Calibration Renovation rate –&gt; rho</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Investment-decision:-Renovation-rate">Investment decision: Renovation rate</a></li>
<li class="toctree-l2"><a class="reference internal" href="#Renovation-flow">Renovation flow</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Discrete choice model: Market share</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Flow-renovation-by-energy-performance-final">Flow renovation by energy performance final</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Flow-renovation-by-energy-performance-final-and-heating-energy-final">Flow renovation by energy performance final and heating energy final</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Market-share-heating-energy-final">Market share heating energy final</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Direct-functions">Direct functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#Endougeneous-technical-change">Endougeneous technical change</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Learning-by-doing">Learning by doing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Information-rate">Information rate</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Res-IRF</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Tutorials Res-IRF fondation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/tutorials.ipynb.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<section id="Tutorials-Res-IRF-fondation">
<h1>Tutorials Res-IRF fondation<a class="headerlink" href="#Tutorials-Res-IRF-fondation" title="Permalink to this headline">¶</a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">IPython.core.display</span> <span class="kn">import</span> <span class="n">display</span>


<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s1">&#39;../..&#39;</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;project&#39;</span><span class="p">)</span>

<span class="kn">from</span> <span class="nn">project.parse_input</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">project.buildings</span> <span class="kn">import</span> <span class="n">HousingStockRenovated</span><span class="p">,</span> <span class="n">HousingStock</span>
<span class="kn">from</span> <span class="nn">project.ui_utils</span> <span class="kn">import</span> <span class="n">economic_subplots</span><span class="p">,</span> <span class="n">stock_attributes_subplots</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&#39;/Users/lucas/PycharmProjects/Res-IRF&#39;
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">performance_order</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">]</span>
<span class="n">income_order</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;D1&#39;</span><span class="p">,</span> <span class="s1">&#39;D2&#39;</span><span class="p">,</span> <span class="s1">&#39;D3&#39;</span><span class="p">,</span> <span class="s1">&#39;D4&#39;</span><span class="p">,</span> <span class="s1">&#39;D5&#39;</span><span class="p">,</span> <span class="s1">&#39;D6&#39;</span><span class="p">,</span> <span class="s1">&#39;D7&#39;</span><span class="p">,</span> <span class="s1">&#39;D8&#39;</span><span class="p">,</span> <span class="s1">&#39;D9&#39;</span><span class="p">,</span> <span class="s1">&#39;D10&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">simple_plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">xlabel</span><span class="p">,</span> <span class="n">ylabel</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Make simple Line2D plot.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    x: list-like</span>
<span class="sd">    y: list-like</span>
<span class="sd">    x_label: str</span>
<span class="sd">    y_label: str</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="n">xlabel</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="n">ylabel</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;top&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;bottom&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">spines</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="sa">u</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_tick_params</span><span class="p">(</span><span class="n">which</span><span class="o">=</span><span class="sa">u</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">folder_output</span> <span class="o">=</span> <span class="s1">&#39;output_tutorial&#39;</span>
</pre></div>
</div>
</div>
<section id="Input">
<h2>Input<a class="headerlink" href="#Input" title="Permalink to this headline">¶</a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">scenario_dict</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">&#39;investor&#39;</span><span class="p">:</span> <span class="s2">&quot;Reference&quot;</span><span class="p">,</span>
<span class="s1">&#39;cost_intangible&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="s1">&#39;lbd_renovation&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="s1">&#39;info_renovation&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="s1">&#39;carbon_tax&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="s1">&#39;carbon_tax_behavior&#39;</span><span class="p">:</span> <span class="s2">&quot;myopic&quot;</span><span class="p">,</span>
<span class="s1">&#39;cite&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="s1">&#39;cite_plus&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="s1">&#39;cee_subsidy&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="s1">&#39;cee_taxes&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="s1">&#39;reduced_tax&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="s1">&#39;eptz&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="s1">&#39;eptz_plus&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="s1">&#39;renovation_obligation&#39;</span><span class="p">:</span> <span class="kc">False</span>
<span class="p">}</span>

<span class="c1"># function of scenario_dict</span>
<span class="c1"># TODO: do it manually</span>
<span class="n">label2horizon</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2horizon_heater&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2horizon_heater&#39;</span><span class="p">][</span><span class="n">scenario_dict</span><span class="p">[</span><span class="s1">&#39;investor&#39;</span><span class="p">]]</span>
<span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2horizon_envelope&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2horizon_envelope&#39;</span><span class="p">][</span><span class="n">scenario_dict</span><span class="p">[</span><span class="s1">&#39;investor&#39;</span><span class="p">]]</span>
<span class="n">label2horizon</span><span class="p">[</span><span class="s1">&#39;envelope&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2horizon_envelope&#39;</span><span class="p">]</span>
<span class="n">label2horizon</span><span class="p">[</span><span class="s1">&#39;heater&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2horizon_heater&#39;</span><span class="p">]</span>
<span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2horizon&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">label2horizon</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">energy_price</span> <span class="o">=</span> <span class="n">energy_prices_dict</span><span class="p">[</span><span class="s1">&#39;energy_price_forecast&#39;</span><span class="p">]</span>
<span class="n">economic_subplots</span><span class="p">(</span><span class="n">energy_price</span><span class="p">,</span> <span class="s1">&#39;Energy price (€/kWh)&#39;</span><span class="p">,</span> <span class="n">n_columns</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">format_val</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{:.2f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorials_8_0.png" src="_images/tutorials_8_0.png" />
</div>
</div>
<p>Before understanding if objectives are fulfilled or assessing public policies, it is important to observe technologies diffusion.</p>
<ol class="arabic simple">
<li><p>Demolition</p></li>
<li><p>Renovation</p></li>
</ol>
<p>Diffusion of technologies? - evolution of discrete choices (market share) - learning-by-doing effect - renovation rate // number of renovations</p>
</section>
</section>
<section id="Building-stock">
<h1>Building stock<a class="headerlink" href="#Building-stock" title="Permalink to this headline">¶</a></h1>
<p>TODO: option to show all parameters manually</p>
<p>The model contains 6,720 types of dwellings divided into: - Nine energy performance levels – EPC labels A to G for existing dwellings, Low Energy Building (LE) and Net Zero Energy Building (NZ) levels for new dwellings; - Four main heating fuels – electricity, natural gas, fuel oil and fuel wood; - Six types of investors – owner-occupiers, landlords or social housing managers, each in single- and multi-family dwellings; - Ten categories of household income, the boundaries of which are aligned
with those of INSEE deciles.</p>
<section id="Scope">
<h2>Scope<a class="headerlink" href="#Scope" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">display</span><span class="p">(</span><span class="n">stock_ini_seg</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total number of buildings: </span><span class="si">{:.1f}</span><span class="s1">M&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">stock_ini_seg</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="mi">1000000</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Total number of segments (/agents): </span><span class="si">{:,.0f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">stock_ini_seg</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
</style><table id="T_918ff_" ><thead>    <tr>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank level0" ></th>        <th class="col_heading level0 col0" >Stock buildings</th>    </tr>    <tr>        <th class="index_name level0" >Occupancy status</th>        <th class="index_name level1" >Housing type</th>        <th class="index_name level2" >Income class</th>        <th class="index_name level3" >Heating energy</th>        <th class="index_name level4" >Energy performance</th>        <th class="index_name level5" >Income class owner</th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_918ff_level0_row0" class="row_heading level0 row0" rowspan="2">Social-housing</th>
                        <th id="T_918ff_level1_row0" class="row_heading level1 row0" >Multi-family</th>
                        <th id="T_918ff_level2_row0" class="row_heading level2 row0" >D1</th>
                        <th id="T_918ff_level3_row0" class="row_heading level3 row0" >Power</th>
                        <th id="T_918ff_level4_row0" class="row_heading level4 row0" >A</th>
                        <th id="T_918ff_level5_row0" class="row_heading level5 row0" >D10</th>
                        <td id="T_918ff_row0_col0" class="data row0 col0" >4162.3</td>
            </tr>
            <tr>
                                <th id="T_918ff_level1_row1" class="row_heading level1 row1" >Single-family</th>
                        <th id="T_918ff_level2_row1" class="row_heading level2 row1" >D1</th>
                        <th id="T_918ff_level3_row1" class="row_heading level3 row1" >Power</th>
                        <th id="T_918ff_level4_row1" class="row_heading level4 row1" >A</th>
                        <th id="T_918ff_level5_row1" class="row_heading level5 row1" >D10</th>
                        <td id="T_918ff_row1_col0" class="data row1 col0" >1618.7</td>
            </tr>
            <tr>
                        <th id="T_918ff_level0_row2" class="row_heading level0 row2" rowspan="2">Homeowners</th>
                        <th id="T_918ff_level1_row2" class="row_heading level1 row2" >Multi-family</th>
                        <th id="T_918ff_level2_row2" class="row_heading level2 row2" >D1</th>
                        <th id="T_918ff_level3_row2" class="row_heading level3 row2" >Power</th>
                        <th id="T_918ff_level4_row2" class="row_heading level4 row2" >A</th>
                        <th id="T_918ff_level5_row2" class="row_heading level5 row2" >D1</th>
                        <td id="T_918ff_row2_col0" class="data row2 col0" >1154.7</td>
            </tr>
            <tr>
                                <th id="T_918ff_level1_row3" class="row_heading level1 row3" >Single-family</th>
                        <th id="T_918ff_level2_row3" class="row_heading level2 row3" >D1</th>
                        <th id="T_918ff_level3_row3" class="row_heading level3 row3" >Power</th>
                        <th id="T_918ff_level4_row3" class="row_heading level4 row3" >A</th>
                        <th id="T_918ff_level5_row3" class="row_heading level5 row3" >D1</th>
                        <td id="T_918ff_row3_col0" class="data row3 col0" >5032.8</td>
            </tr>
            <tr>
                        <th id="T_918ff_level0_row4" class="row_heading level0 row4" >Social-housing</th>
                        <th id="T_918ff_level1_row4" class="row_heading level1 row4" >Multi-family</th>
                        <th id="T_918ff_level2_row4" class="row_heading level2 row4" >D2</th>
                        <th id="T_918ff_level3_row4" class="row_heading level3 row4" >Power</th>
                        <th id="T_918ff_level4_row4" class="row_heading level4 row4" >A</th>
                        <th id="T_918ff_level5_row4" class="row_heading level5 row4" >D10</th>
                        <td id="T_918ff_row4_col0" class="data row4 col0" >4298.2</td>
            </tr>
    </tbody></table></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Total number of buildings: 25.0M
Total number of segments (/agents): 6,720
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dict_order</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Income class&#39;</span><span class="p">:</span> <span class="n">income_order</span><span class="p">,</span> <span class="s1">&#39;Income class owner&#39;</span><span class="p">:</span> <span class="n">income_order</span><span class="p">,</span> <span class="s1">&#39;Energy performance&#39;</span><span class="p">:</span> <span class="n">performance_order</span><span class="p">}</span>
<span class="n">stock_attributes_subplots</span><span class="p">(</span><span class="n">stock_ini_seg</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="s1">&#39;million&#39;</span><span class="p">,</span> <span class="n">dict_color</span><span class="o">=</span><span class="n">colors_dict</span><span class="p">,</span> <span class="n">dict_order</span><span class="o">=</span><span class="n">dict_order</span><span class="p">)</span>
<span class="n">stock_attributes_subplots</span><span class="p">(</span><span class="n">stock_ini_seg</span><span class="p">,</span> <span class="n">option</span><span class="o">=</span><span class="s1">&#39;percent&#39;</span><span class="p">,</span> <span class="n">dict_color</span><span class="o">=</span><span class="n">colors_dict</span><span class="p">,</span> <span class="n">dict_order</span><span class="o">=</span><span class="n">dict_order</span><span class="p">,</span> <span class="n">sharey</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorials_14_0.png" src="_images/tutorials_14_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorials_14_1.png" src="_images/tutorials_14_1.png" />
</div>
</div>
</section>
</section>
<section id="Energy-use">
<h1>Energy use<a class="headerlink" href="#Energy-use" title="Permalink to this headline">¶</a></h1>
<div class="line-block">
<div class="line">The model uses two metrics for energy use: the <strong>conventional consumption</strong> predicted by the EPC label of the dwelling; and the <strong>actual consumption</strong> that determines energy expenditure.</div>
<div class="line">The two are linked by the <em>intensity of heating</em> of the heating infrastructure, which is an endogenous function of the model.</div>
</div>
<div class="line-block">
<div class="line">Application:</div>
<div class="line"><strong>HousingStock</strong> is the main Python class to easly calculate energy use.</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">buildings</span> <span class="o">=</span> <span class="n">HousingStock</span><span class="p">(</span><span class="n">stock_ini_seg</span><span class="p">,</span>
                         <span class="n">levels_dict</span><span class="p">,</span>
                         <span class="n">year</span><span class="o">=</span><span class="mi">2018</span><span class="p">,</span>
                         <span class="n">price_behavior</span><span class="o">=</span><span class="s1">&#39;myopic&#39;</span><span class="p">,</span>
                         <span class="n">label2area</span><span class="o">=</span><span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2area&#39;</span><span class="p">],</span>
                         <span class="n">label2horizon</span><span class="o">=</span><span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2horizon&#39;</span><span class="p">],</span>
                         <span class="n">label2discount</span><span class="o">=</span><span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2discount&#39;</span><span class="p">],</span>
                         <span class="n">label2income</span><span class="o">=</span><span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2income&#39;</span><span class="p">],</span>
                         <span class="n">label2consumption</span><span class="o">=</span><span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2consumption&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="line-block">
<div class="line">Application:</div>
<div class="line">Initialize energy use using <strong>ini_energy_cash_flows</strong> method of class HousingStock</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">help</span><span class="p">(</span><span class="n">buildings</span><span class="o">.</span><span class="n">ini_energy_cash_flows</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Help on method ini_energy_cash_flows in module project.buildings:

ini_energy_cash_flows(energy_price) method of project.buildings.HousingStock instance
    Initialize exogenous variable that doesn&#39;t depend on dynamic to fasten the script.

    List of attribute initialized:
    - buildings.area: pd.Series (doesn&#39;t depend on time)
    - buildings.budget_share: pd.DataFrame (depends on energy_price and income so depend on time)
    - buildings.use_intensity: pd.DataFrame (depends on energy_price and income so depend on time)
    - buildings.consumption_conventional: pd.Series (doesn&#39;t depend on time)
    - buildings.consumption_actual: pd.DataFrame (depends on energy_price and income so depend on time)
    - buildings.energy_cash_flows[&#39;conventional&#39;]: pd.DataFrame
    - buildings.energy_cash_flows_disc[&#39;conventional&#39;]: pd.DataFrame
    - buildings.energy_cash_flows[&#39;actual&#39;]: pd.DataFrame
    - buildings.energy_cash_flows_disc[&#39;actual&#39;]: pd.DataFrame

    Parameters
    ----------
    energy_price: pd.DataFrame

</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">buildings</span><span class="o">.</span><span class="n">ini_energy_cash_flows</span><span class="p">(</span><span class="n">energy_price</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>A growing number of academic studies point to a gap between the conventional energy consumption predicted by energy performance certificates and actual energy consumption. The most common explanation is a more intense heating of the heating infrastructure after an energy efficiency improvement – a phenomenon commonly referred to as the “rebound effect.”</p>
<p>Heating Intensity = -0.191 * log(Income Share) + 0.1105</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">display</span><span class="p">(</span><span class="n">buildings</span><span class="o">.</span><span class="n">use_intensity</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{:.1%}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
</style><table id="T_44f81_" ><thead>    <tr>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank level0" ></th>        <th class="col_heading level0 col0" >2018</th>        <th class="col_heading level0 col1" >2019</th>        <th class="col_heading level0 col2" >2020</th>        <th class="col_heading level0 col3" >2021</th>        <th class="col_heading level0 col4" >2022</th>        <th class="col_heading level0 col5" >2023</th>        <th class="col_heading level0 col6" >2024</th>        <th class="col_heading level0 col7" >2025</th>        <th class="col_heading level0 col8" >2026</th>        <th class="col_heading level0 col9" >2027</th>        <th class="col_heading level0 col10" >2028</th>        <th class="col_heading level0 col11" >2029</th>        <th class="col_heading level0 col12" >2030</th>        <th class="col_heading level0 col13" >2031</th>        <th class="col_heading level0 col14" >2032</th>        <th class="col_heading level0 col15" >2033</th>        <th class="col_heading level0 col16" >2034</th>        <th class="col_heading level0 col17" >2035</th>        <th class="col_heading level0 col18" >2036</th>        <th class="col_heading level0 col19" >2037</th>        <th class="col_heading level0 col20" >2038</th>        <th class="col_heading level0 col21" >2039</th>        <th class="col_heading level0 col22" >2040</th>        <th class="col_heading level0 col23" >2041</th>        <th class="col_heading level0 col24" >2042</th>        <th class="col_heading level0 col25" >2043</th>        <th class="col_heading level0 col26" >2044</th>        <th class="col_heading level0 col27" >2045</th>        <th class="col_heading level0 col28" >2046</th>        <th class="col_heading level0 col29" >2047</th>        <th class="col_heading level0 col30" >2048</th>        <th class="col_heading level0 col31" >2049</th>        <th class="col_heading level0 col32" >2050</th>        <th class="col_heading level0 col33" >2051</th>        <th class="col_heading level0 col34" >2052</th>        <th class="col_heading level0 col35" >2053</th>        <th class="col_heading level0 col36" >2054</th>        <th class="col_heading level0 col37" >2055</th>        <th class="col_heading level0 col38" >2056</th>        <th class="col_heading level0 col39" >2057</th>        <th class="col_heading level0 col40" >2058</th>        <th class="col_heading level0 col41" >2059</th>        <th class="col_heading level0 col42" >2060</th>        <th class="col_heading level0 col43" >2061</th>        <th class="col_heading level0 col44" >2062</th>        <th class="col_heading level0 col45" >2063</th>        <th class="col_heading level0 col46" >2064</th>        <th class="col_heading level0 col47" >2065</th>        <th class="col_heading level0 col48" >2066</th>        <th class="col_heading level0 col49" >2067</th>        <th class="col_heading level0 col50" >2068</th>        <th class="col_heading level0 col51" >2069</th>        <th class="col_heading level0 col52" >2070</th>        <th class="col_heading level0 col53" >2071</th>        <th class="col_heading level0 col54" >2072</th>        <th class="col_heading level0 col55" >2073</th>        <th class="col_heading level0 col56" >2074</th>        <th class="col_heading level0 col57" >2075</th>        <th class="col_heading level0 col58" >2076</th>        <th class="col_heading level0 col59" >2077</th>        <th class="col_heading level0 col60" >2078</th>        <th class="col_heading level0 col61" >2079</th>        <th class="col_heading level0 col62" >2080</th>    </tr>    <tr>        <th class="index_name level0" >Housing type</th>        <th class="index_name level1" >Occupancy status</th>        <th class="index_name level2" >Income class</th>        <th class="index_name level3" >Heating energy</th>        <th class="index_name level4" >Energy performance</th>        <th class="index_name level5" >Income class owner</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_44f81_level0_row0" class="row_heading level0 row0" rowspan="5">Multi-family</th>
                        <th id="T_44f81_level1_row0" class="row_heading level1 row0" rowspan="5">Homeowners</th>
                        <th id="T_44f81_level2_row0" class="row_heading level2 row0" rowspan="5">D1</th>
                        <th id="T_44f81_level3_row0" class="row_heading level3 row0" rowspan="5">Natural gas</th>
                        <th id="T_44f81_level4_row0" class="row_heading level4 row0" >A</th>
                        <th id="T_44f81_level5_row0" class="row_heading level5 row0" >D1</th>
                        <td id="T_44f81_row0_col0" class="data row0 col0" >85.5%</td>
                        <td id="T_44f81_row0_col1" class="data row0 col1" >85.5%</td>
                        <td id="T_44f81_row0_col2" class="data row0 col2" >85.5%</td>
                        <td id="T_44f81_row0_col3" class="data row0 col3" >85.4%</td>
                        <td id="T_44f81_row0_col4" class="data row0 col4" >85.4%</td>
                        <td id="T_44f81_row0_col5" class="data row0 col5" >85.3%</td>
                        <td id="T_44f81_row0_col6" class="data row0 col6" >85.3%</td>
                        <td id="T_44f81_row0_col7" class="data row0 col7" >85.2%</td>
                        <td id="T_44f81_row0_col8" class="data row0 col8" >85.2%</td>
                        <td id="T_44f81_row0_col9" class="data row0 col9" >85.2%</td>
                        <td id="T_44f81_row0_col10" class="data row0 col10" >85.1%</td>
                        <td id="T_44f81_row0_col11" class="data row0 col11" >85.1%</td>
                        <td id="T_44f81_row0_col12" class="data row0 col12" >85.0%</td>
                        <td id="T_44f81_row0_col13" class="data row0 col13" >85.0%</td>
                        <td id="T_44f81_row0_col14" class="data row0 col14" >85.0%</td>
                        <td id="T_44f81_row0_col15" class="data row0 col15" >84.9%</td>
                        <td id="T_44f81_row0_col16" class="data row0 col16" >84.9%</td>
                        <td id="T_44f81_row0_col17" class="data row0 col17" >84.8%</td>
                        <td id="T_44f81_row0_col18" class="data row0 col18" >84.8%</td>
                        <td id="T_44f81_row0_col19" class="data row0 col19" >84.8%</td>
                        <td id="T_44f81_row0_col20" class="data row0 col20" >84.7%</td>
                        <td id="T_44f81_row0_col21" class="data row0 col21" >84.7%</td>
                        <td id="T_44f81_row0_col22" class="data row0 col22" >84.6%</td>
                        <td id="T_44f81_row0_col23" class="data row0 col23" >84.6%</td>
                        <td id="T_44f81_row0_col24" class="data row0 col24" >84.5%</td>
                        <td id="T_44f81_row0_col25" class="data row0 col25" >84.5%</td>
                        <td id="T_44f81_row0_col26" class="data row0 col26" >84.5%</td>
                        <td id="T_44f81_row0_col27" class="data row0 col27" >84.4%</td>
                        <td id="T_44f81_row0_col28" class="data row0 col28" >84.4%</td>
                        <td id="T_44f81_row0_col29" class="data row0 col29" >84.3%</td>
                        <td id="T_44f81_row0_col30" class="data row0 col30" >84.3%</td>
                        <td id="T_44f81_row0_col31" class="data row0 col31" >84.3%</td>
                        <td id="T_44f81_row0_col32" class="data row0 col32" >84.2%</td>
                        <td id="T_44f81_row0_col33" class="data row0 col33" >84.2%</td>
                        <td id="T_44f81_row0_col34" class="data row0 col34" >84.1%</td>
                        <td id="T_44f81_row0_col35" class="data row0 col35" >84.1%</td>
                        <td id="T_44f81_row0_col36" class="data row0 col36" >84.0%</td>
                        <td id="T_44f81_row0_col37" class="data row0 col37" >84.0%</td>
                        <td id="T_44f81_row0_col38" class="data row0 col38" >84.0%</td>
                        <td id="T_44f81_row0_col39" class="data row0 col39" >83.9%</td>
                        <td id="T_44f81_row0_col40" class="data row0 col40" >83.9%</td>
                        <td id="T_44f81_row0_col41" class="data row0 col41" >83.8%</td>
                        <td id="T_44f81_row0_col42" class="data row0 col42" >83.8%</td>
                        <td id="T_44f81_row0_col43" class="data row0 col43" >83.8%</td>
                        <td id="T_44f81_row0_col44" class="data row0 col44" >83.7%</td>
                        <td id="T_44f81_row0_col45" class="data row0 col45" >83.7%</td>
                        <td id="T_44f81_row0_col46" class="data row0 col46" >83.6%</td>
                        <td id="T_44f81_row0_col47" class="data row0 col47" >83.6%</td>
                        <td id="T_44f81_row0_col48" class="data row0 col48" >83.5%</td>
                        <td id="T_44f81_row0_col49" class="data row0 col49" >83.5%</td>
                        <td id="T_44f81_row0_col50" class="data row0 col50" >83.5%</td>
                        <td id="T_44f81_row0_col51" class="data row0 col51" >83.4%</td>
                        <td id="T_44f81_row0_col52" class="data row0 col52" >83.4%</td>
                        <td id="T_44f81_row0_col53" class="data row0 col53" >83.3%</td>
                        <td id="T_44f81_row0_col54" class="data row0 col54" >83.3%</td>
                        <td id="T_44f81_row0_col55" class="data row0 col55" >83.3%</td>
                        <td id="T_44f81_row0_col56" class="data row0 col56" >83.2%</td>
                        <td id="T_44f81_row0_col57" class="data row0 col57" >83.2%</td>
                        <td id="T_44f81_row0_col58" class="data row0 col58" >83.1%</td>
                        <td id="T_44f81_row0_col59" class="data row0 col59" >83.1%</td>
                        <td id="T_44f81_row0_col60" class="data row0 col60" >83.1%</td>
                        <td id="T_44f81_row0_col61" class="data row0 col61" >83.0%</td>
                        <td id="T_44f81_row0_col62" class="data row0 col62" >83.0%</td>
            </tr>
            <tr>
                                                        <th id="T_44f81_level4_row1" class="row_heading level4 row1" >B</th>
                        <th id="T_44f81_level5_row1" class="row_heading level5 row1" >D1</th>
                        <td id="T_44f81_row1_col0" class="data row1 col0" >80.0%</td>
                        <td id="T_44f81_row1_col1" class="data row1 col1" >79.9%</td>
                        <td id="T_44f81_row1_col2" class="data row1 col2" >79.9%</td>
                        <td id="T_44f81_row1_col3" class="data row1 col3" >79.8%</td>
                        <td id="T_44f81_row1_col4" class="data row1 col4" >79.8%</td>
                        <td id="T_44f81_row1_col5" class="data row1 col5" >79.7%</td>
                        <td id="T_44f81_row1_col6" class="data row1 col6" >79.7%</td>
                        <td id="T_44f81_row1_col7" class="data row1 col7" >79.7%</td>
                        <td id="T_44f81_row1_col8" class="data row1 col8" >79.6%</td>
                        <td id="T_44f81_row1_col9" class="data row1 col9" >79.6%</td>
                        <td id="T_44f81_row1_col10" class="data row1 col10" >79.5%</td>
                        <td id="T_44f81_row1_col11" class="data row1 col11" >79.5%</td>
                        <td id="T_44f81_row1_col12" class="data row1 col12" >79.5%</td>
                        <td id="T_44f81_row1_col13" class="data row1 col13" >79.4%</td>
                        <td id="T_44f81_row1_col14" class="data row1 col14" >79.4%</td>
                        <td id="T_44f81_row1_col15" class="data row1 col15" >79.3%</td>
                        <td id="T_44f81_row1_col16" class="data row1 col16" >79.3%</td>
                        <td id="T_44f81_row1_col17" class="data row1 col17" >79.2%</td>
                        <td id="T_44f81_row1_col18" class="data row1 col18" >79.2%</td>
                        <td id="T_44f81_row1_col19" class="data row1 col19" >79.2%</td>
                        <td id="T_44f81_row1_col20" class="data row1 col20" >79.1%</td>
                        <td id="T_44f81_row1_col21" class="data row1 col21" >79.1%</td>
                        <td id="T_44f81_row1_col22" class="data row1 col22" >79.0%</td>
                        <td id="T_44f81_row1_col23" class="data row1 col23" >79.0%</td>
                        <td id="T_44f81_row1_col24" class="data row1 col24" >79.0%</td>
                        <td id="T_44f81_row1_col25" class="data row1 col25" >78.9%</td>
                        <td id="T_44f81_row1_col26" class="data row1 col26" >78.9%</td>
                        <td id="T_44f81_row1_col27" class="data row1 col27" >78.8%</td>
                        <td id="T_44f81_row1_col28" class="data row1 col28" >78.8%</td>
                        <td id="T_44f81_row1_col29" class="data row1 col29" >78.8%</td>
                        <td id="T_44f81_row1_col30" class="data row1 col30" >78.7%</td>
                        <td id="T_44f81_row1_col31" class="data row1 col31" >78.7%</td>
                        <td id="T_44f81_row1_col32" class="data row1 col32" >78.6%</td>
                        <td id="T_44f81_row1_col33" class="data row1 col33" >78.6%</td>
                        <td id="T_44f81_row1_col34" class="data row1 col34" >78.5%</td>
                        <td id="T_44f81_row1_col35" class="data row1 col35" >78.5%</td>
                        <td id="T_44f81_row1_col36" class="data row1 col36" >78.5%</td>
                        <td id="T_44f81_row1_col37" class="data row1 col37" >78.4%</td>
                        <td id="T_44f81_row1_col38" class="data row1 col38" >78.4%</td>
                        <td id="T_44f81_row1_col39" class="data row1 col39" >78.3%</td>
                        <td id="T_44f81_row1_col40" class="data row1 col40" >78.3%</td>
                        <td id="T_44f81_row1_col41" class="data row1 col41" >78.3%</td>
                        <td id="T_44f81_row1_col42" class="data row1 col42" >78.2%</td>
                        <td id="T_44f81_row1_col43" class="data row1 col43" >78.2%</td>
                        <td id="T_44f81_row1_col44" class="data row1 col44" >78.1%</td>
                        <td id="T_44f81_row1_col45" class="data row1 col45" >78.1%</td>
                        <td id="T_44f81_row1_col46" class="data row1 col46" >78.0%</td>
                        <td id="T_44f81_row1_col47" class="data row1 col47" >78.0%</td>
                        <td id="T_44f81_row1_col48" class="data row1 col48" >78.0%</td>
                        <td id="T_44f81_row1_col49" class="data row1 col49" >77.9%</td>
                        <td id="T_44f81_row1_col50" class="data row1 col50" >77.9%</td>
                        <td id="T_44f81_row1_col51" class="data row1 col51" >77.8%</td>
                        <td id="T_44f81_row1_col52" class="data row1 col52" >77.8%</td>
                        <td id="T_44f81_row1_col53" class="data row1 col53" >77.8%</td>
                        <td id="T_44f81_row1_col54" class="data row1 col54" >77.7%</td>
                        <td id="T_44f81_row1_col55" class="data row1 col55" >77.7%</td>
                        <td id="T_44f81_row1_col56" class="data row1 col56" >77.6%</td>
                        <td id="T_44f81_row1_col57" class="data row1 col57" >77.6%</td>
                        <td id="T_44f81_row1_col58" class="data row1 col58" >77.5%</td>
                        <td id="T_44f81_row1_col59" class="data row1 col59" >77.5%</td>
                        <td id="T_44f81_row1_col60" class="data row1 col60" >77.5%</td>
                        <td id="T_44f81_row1_col61" class="data row1 col61" >77.4%</td>
                        <td id="T_44f81_row1_col62" class="data row1 col62" >77.4%</td>
            </tr>
            <tr>
                                                        <th id="T_44f81_level4_row2" class="row_heading level4 row2" >C</th>
                        <th id="T_44f81_level5_row2" class="row_heading level5 row2" >D1</th>
                        <td id="T_44f81_row2_col0" class="data row2 col0" >71.7%</td>
                        <td id="T_44f81_row2_col1" class="data row2 col1" >71.7%</td>
                        <td id="T_44f81_row2_col2" class="data row2 col2" >71.6%</td>
                        <td id="T_44f81_row2_col3" class="data row2 col3" >71.6%</td>
                        <td id="T_44f81_row2_col4" class="data row2 col4" >71.6%</td>
                        <td id="T_44f81_row2_col5" class="data row2 col5" >71.5%</td>
                        <td id="T_44f81_row2_col6" class="data row2 col6" >71.5%</td>
                        <td id="T_44f81_row2_col7" class="data row2 col7" >71.4%</td>
                        <td id="T_44f81_row2_col8" class="data row2 col8" >71.4%</td>
                        <td id="T_44f81_row2_col9" class="data row2 col9" >71.4%</td>
                        <td id="T_44f81_row2_col10" class="data row2 col10" >71.3%</td>
                        <td id="T_44f81_row2_col11" class="data row2 col11" >71.3%</td>
                        <td id="T_44f81_row2_col12" class="data row2 col12" >71.2%</td>
                        <td id="T_44f81_row2_col13" class="data row2 col13" >71.2%</td>
                        <td id="T_44f81_row2_col14" class="data row2 col14" >71.2%</td>
                        <td id="T_44f81_row2_col15" class="data row2 col15" >71.1%</td>
                        <td id="T_44f81_row2_col16" class="data row2 col16" >71.1%</td>
                        <td id="T_44f81_row2_col17" class="data row2 col17" >71.0%</td>
                        <td id="T_44f81_row2_col18" class="data row2 col18" >71.0%</td>
                        <td id="T_44f81_row2_col19" class="data row2 col19" >70.9%</td>
                        <td id="T_44f81_row2_col20" class="data row2 col20" >70.9%</td>
                        <td id="T_44f81_row2_col21" class="data row2 col21" >70.9%</td>
                        <td id="T_44f81_row2_col22" class="data row2 col22" >70.8%</td>
                        <td id="T_44f81_row2_col23" class="data row2 col23" >70.8%</td>
                        <td id="T_44f81_row2_col24" class="data row2 col24" >70.7%</td>
                        <td id="T_44f81_row2_col25" class="data row2 col25" >70.7%</td>
                        <td id="T_44f81_row2_col26" class="data row2 col26" >70.7%</td>
                        <td id="T_44f81_row2_col27" class="data row2 col27" >70.6%</td>
                        <td id="T_44f81_row2_col28" class="data row2 col28" >70.6%</td>
                        <td id="T_44f81_row2_col29" class="data row2 col29" >70.5%</td>
                        <td id="T_44f81_row2_col30" class="data row2 col30" >70.5%</td>
                        <td id="T_44f81_row2_col31" class="data row2 col31" >70.4%</td>
                        <td id="T_44f81_row2_col32" class="data row2 col32" >70.4%</td>
                        <td id="T_44f81_row2_col33" class="data row2 col33" >70.4%</td>
                        <td id="T_44f81_row2_col34" class="data row2 col34" >70.3%</td>
                        <td id="T_44f81_row2_col35" class="data row2 col35" >70.3%</td>
                        <td id="T_44f81_row2_col36" class="data row2 col36" >70.2%</td>
                        <td id="T_44f81_row2_col37" class="data row2 col37" >70.2%</td>
                        <td id="T_44f81_row2_col38" class="data row2 col38" >70.2%</td>
                        <td id="T_44f81_row2_col39" class="data row2 col39" >70.1%</td>
                        <td id="T_44f81_row2_col40" class="data row2 col40" >70.1%</td>
                        <td id="T_44f81_row2_col41" class="data row2 col41" >70.0%</td>
                        <td id="T_44f81_row2_col42" class="data row2 col42" >70.0%</td>
                        <td id="T_44f81_row2_col43" class="data row2 col43" >69.9%</td>
                        <td id="T_44f81_row2_col44" class="data row2 col44" >69.9%</td>
                        <td id="T_44f81_row2_col45" class="data row2 col45" >69.9%</td>
                        <td id="T_44f81_row2_col46" class="data row2 col46" >69.8%</td>
                        <td id="T_44f81_row2_col47" class="data row2 col47" >69.8%</td>
                        <td id="T_44f81_row2_col48" class="data row2 col48" >69.7%</td>
                        <td id="T_44f81_row2_col49" class="data row2 col49" >69.7%</td>
                        <td id="T_44f81_row2_col50" class="data row2 col50" >69.7%</td>
                        <td id="T_44f81_row2_col51" class="data row2 col51" >69.6%</td>
                        <td id="T_44f81_row2_col52" class="data row2 col52" >69.6%</td>
                        <td id="T_44f81_row2_col53" class="data row2 col53" >69.5%</td>
                        <td id="T_44f81_row2_col54" class="data row2 col54" >69.5%</td>
                        <td id="T_44f81_row2_col55" class="data row2 col55" >69.5%</td>
                        <td id="T_44f81_row2_col56" class="data row2 col56" >69.4%</td>
                        <td id="T_44f81_row2_col57" class="data row2 col57" >69.4%</td>
                        <td id="T_44f81_row2_col58" class="data row2 col58" >69.3%</td>
                        <td id="T_44f81_row2_col59" class="data row2 col59" >69.3%</td>
                        <td id="T_44f81_row2_col60" class="data row2 col60" >69.2%</td>
                        <td id="T_44f81_row2_col61" class="data row2 col61" >69.2%</td>
                        <td id="T_44f81_row2_col62" class="data row2 col62" >69.2%</td>
            </tr>
            <tr>
                                                        <th id="T_44f81_level4_row3" class="row_heading level4 row3" >D</th>
                        <th id="T_44f81_level5_row3" class="row_heading level5 row3" >D1</th>
                        <td id="T_44f81_row3_col0" class="data row3 col0" >63.1%</td>
                        <td id="T_44f81_row3_col1" class="data row3 col1" >63.1%</td>
                        <td id="T_44f81_row3_col2" class="data row3 col2" >63.0%</td>
                        <td id="T_44f81_row3_col3" class="data row3 col3" >63.0%</td>
                        <td id="T_44f81_row3_col4" class="data row3 col4" >62.9%</td>
                        <td id="T_44f81_row3_col5" class="data row3 col5" >62.9%</td>
                        <td id="T_44f81_row3_col6" class="data row3 col6" >62.9%</td>
                        <td id="T_44f81_row3_col7" class="data row3 col7" >62.8%</td>
                        <td id="T_44f81_row3_col8" class="data row3 col8" >62.8%</td>
                        <td id="T_44f81_row3_col9" class="data row3 col9" >62.7%</td>
                        <td id="T_44f81_row3_col10" class="data row3 col10" >62.7%</td>
                        <td id="T_44f81_row3_col11" class="data row3 col11" >62.7%</td>
                        <td id="T_44f81_row3_col12" class="data row3 col12" >62.6%</td>
                        <td id="T_44f81_row3_col13" class="data row3 col13" >62.6%</td>
                        <td id="T_44f81_row3_col14" class="data row3 col14" >62.5%</td>
                        <td id="T_44f81_row3_col15" class="data row3 col15" >62.5%</td>
                        <td id="T_44f81_row3_col16" class="data row3 col16" >62.4%</td>
                        <td id="T_44f81_row3_col17" class="data row3 col17" >62.4%</td>
                        <td id="T_44f81_row3_col18" class="data row3 col18" >62.4%</td>
                        <td id="T_44f81_row3_col19" class="data row3 col19" >62.3%</td>
                        <td id="T_44f81_row3_col20" class="data row3 col20" >62.3%</td>
                        <td id="T_44f81_row3_col21" class="data row3 col21" >62.2%</td>
                        <td id="T_44f81_row3_col22" class="data row3 col22" >62.2%</td>
                        <td id="T_44f81_row3_col23" class="data row3 col23" >62.2%</td>
                        <td id="T_44f81_row3_col24" class="data row3 col24" >62.1%</td>
                        <td id="T_44f81_row3_col25" class="data row3 col25" >62.1%</td>
                        <td id="T_44f81_row3_col26" class="data row3 col26" >62.0%</td>
                        <td id="T_44f81_row3_col27" class="data row3 col27" >62.0%</td>
                        <td id="T_44f81_row3_col28" class="data row3 col28" >61.9%</td>
                        <td id="T_44f81_row3_col29" class="data row3 col29" >61.9%</td>
                        <td id="T_44f81_row3_col30" class="data row3 col30" >61.9%</td>
                        <td id="T_44f81_row3_col31" class="data row3 col31" >61.8%</td>
                        <td id="T_44f81_row3_col32" class="data row3 col32" >61.8%</td>
                        <td id="T_44f81_row3_col33" class="data row3 col33" >61.7%</td>
                        <td id="T_44f81_row3_col34" class="data row3 col34" >61.7%</td>
                        <td id="T_44f81_row3_col35" class="data row3 col35" >61.7%</td>
                        <td id="T_44f81_row3_col36" class="data row3 col36" >61.6%</td>
                        <td id="T_44f81_row3_col37" class="data row3 col37" >61.6%</td>
                        <td id="T_44f81_row3_col38" class="data row3 col38" >61.5%</td>
                        <td id="T_44f81_row3_col39" class="data row3 col39" >61.5%</td>
                        <td id="T_44f81_row3_col40" class="data row3 col40" >61.5%</td>
                        <td id="T_44f81_row3_col41" class="data row3 col41" >61.4%</td>
                        <td id="T_44f81_row3_col42" class="data row3 col42" >61.4%</td>
                        <td id="T_44f81_row3_col43" class="data row3 col43" >61.3%</td>
                        <td id="T_44f81_row3_col44" class="data row3 col44" >61.3%</td>
                        <td id="T_44f81_row3_col45" class="data row3 col45" >61.2%</td>
                        <td id="T_44f81_row3_col46" class="data row3 col46" >61.2%</td>
                        <td id="T_44f81_row3_col47" class="data row3 col47" >61.2%</td>
                        <td id="T_44f81_row3_col48" class="data row3 col48" >61.1%</td>
                        <td id="T_44f81_row3_col49" class="data row3 col49" >61.1%</td>
                        <td id="T_44f81_row3_col50" class="data row3 col50" >61.0%</td>
                        <td id="T_44f81_row3_col51" class="data row3 col51" >61.0%</td>
                        <td id="T_44f81_row3_col52" class="data row3 col52" >61.0%</td>
                        <td id="T_44f81_row3_col53" class="data row3 col53" >60.9%</td>
                        <td id="T_44f81_row3_col54" class="data row3 col54" >60.9%</td>
                        <td id="T_44f81_row3_col55" class="data row3 col55" >60.8%</td>
                        <td id="T_44f81_row3_col56" class="data row3 col56" >60.8%</td>
                        <td id="T_44f81_row3_col57" class="data row3 col57" >60.7%</td>
                        <td id="T_44f81_row3_col58" class="data row3 col58" >60.7%</td>
                        <td id="T_44f81_row3_col59" class="data row3 col59" >60.7%</td>
                        <td id="T_44f81_row3_col60" class="data row3 col60" >60.6%</td>
                        <td id="T_44f81_row3_col61" class="data row3 col61" >60.6%</td>
                        <td id="T_44f81_row3_col62" class="data row3 col62" >60.5%</td>
            </tr>
            <tr>
                                                        <th id="T_44f81_level4_row4" class="row_heading level4 row4" >E</th>
                        <th id="T_44f81_level5_row4" class="row_heading level5 row4" >D1</th>
                        <td id="T_44f81_row4_col0" class="data row4 col0" >55.0%</td>
                        <td id="T_44f81_row4_col1" class="data row4 col1" >55.0%</td>
                        <td id="T_44f81_row4_col2" class="data row4 col2" >55.0%</td>
                        <td id="T_44f81_row4_col3" class="data row4 col3" >54.9%</td>
                        <td id="T_44f81_row4_col4" class="data row4 col4" >54.9%</td>
                        <td id="T_44f81_row4_col5" class="data row4 col5" >54.8%</td>
                        <td id="T_44f81_row4_col6" class="data row4 col6" >54.8%</td>
                        <td id="T_44f81_row4_col7" class="data row4 col7" >54.8%</td>
                        <td id="T_44f81_row4_col8" class="data row4 col8" >54.7%</td>
                        <td id="T_44f81_row4_col9" class="data row4 col9" >54.7%</td>
                        <td id="T_44f81_row4_col10" class="data row4 col10" >54.6%</td>
                        <td id="T_44f81_row4_col11" class="data row4 col11" >54.6%</td>
                        <td id="T_44f81_row4_col12" class="data row4 col12" >54.5%</td>
                        <td id="T_44f81_row4_col13" class="data row4 col13" >54.5%</td>
                        <td id="T_44f81_row4_col14" class="data row4 col14" >54.5%</td>
                        <td id="T_44f81_row4_col15" class="data row4 col15" >54.4%</td>
                        <td id="T_44f81_row4_col16" class="data row4 col16" >54.4%</td>
                        <td id="T_44f81_row4_col17" class="data row4 col17" >54.3%</td>
                        <td id="T_44f81_row4_col18" class="data row4 col18" >54.3%</td>
                        <td id="T_44f81_row4_col19" class="data row4 col19" >54.3%</td>
                        <td id="T_44f81_row4_col20" class="data row4 col20" >54.2%</td>
                        <td id="T_44f81_row4_col21" class="data row4 col21" >54.2%</td>
                        <td id="T_44f81_row4_col22" class="data row4 col22" >54.1%</td>
                        <td id="T_44f81_row4_col23" class="data row4 col23" >54.1%</td>
                        <td id="T_44f81_row4_col24" class="data row4 col24" >54.1%</td>
                        <td id="T_44f81_row4_col25" class="data row4 col25" >54.0%</td>
                        <td id="T_44f81_row4_col26" class="data row4 col26" >54.0%</td>
                        <td id="T_44f81_row4_col27" class="data row4 col27" >53.9%</td>
                        <td id="T_44f81_row4_col28" class="data row4 col28" >53.9%</td>
                        <td id="T_44f81_row4_col29" class="data row4 col29" >53.8%</td>
                        <td id="T_44f81_row4_col30" class="data row4 col30" >53.8%</td>
                        <td id="T_44f81_row4_col31" class="data row4 col31" >53.8%</td>
                        <td id="T_44f81_row4_col32" class="data row4 col32" >53.7%</td>
                        <td id="T_44f81_row4_col33" class="data row4 col33" >53.7%</td>
                        <td id="T_44f81_row4_col34" class="data row4 col34" >53.6%</td>
                        <td id="T_44f81_row4_col35" class="data row4 col35" >53.6%</td>
                        <td id="T_44f81_row4_col36" class="data row4 col36" >53.6%</td>
                        <td id="T_44f81_row4_col37" class="data row4 col37" >53.5%</td>
                        <td id="T_44f81_row4_col38" class="data row4 col38" >53.5%</td>
                        <td id="T_44f81_row4_col39" class="data row4 col39" >53.4%</td>
                        <td id="T_44f81_row4_col40" class="data row4 col40" >53.4%</td>
                        <td id="T_44f81_row4_col41" class="data row4 col41" >53.3%</td>
                        <td id="T_44f81_row4_col42" class="data row4 col42" >53.3%</td>
                        <td id="T_44f81_row4_col43" class="data row4 col43" >53.3%</td>
                        <td id="T_44f81_row4_col44" class="data row4 col44" >53.2%</td>
                        <td id="T_44f81_row4_col45" class="data row4 col45" >53.2%</td>
                        <td id="T_44f81_row4_col46" class="data row4 col46" >53.1%</td>
                        <td id="T_44f81_row4_col47" class="data row4 col47" >53.1%</td>
                        <td id="T_44f81_row4_col48" class="data row4 col48" >53.1%</td>
                        <td id="T_44f81_row4_col49" class="data row4 col49" >53.0%</td>
                        <td id="T_44f81_row4_col50" class="data row4 col50" >53.0%</td>
                        <td id="T_44f81_row4_col51" class="data row4 col51" >52.9%</td>
                        <td id="T_44f81_row4_col52" class="data row4 col52" >52.9%</td>
                        <td id="T_44f81_row4_col53" class="data row4 col53" >52.8%</td>
                        <td id="T_44f81_row4_col54" class="data row4 col54" >52.8%</td>
                        <td id="T_44f81_row4_col55" class="data row4 col55" >52.8%</td>
                        <td id="T_44f81_row4_col56" class="data row4 col56" >52.7%</td>
                        <td id="T_44f81_row4_col57" class="data row4 col57" >52.7%</td>
                        <td id="T_44f81_row4_col58" class="data row4 col58" >52.6%</td>
                        <td id="T_44f81_row4_col59" class="data row4 col59" >52.6%</td>
                        <td id="T_44f81_row4_col60" class="data row4 col60" >52.6%</td>
                        <td id="T_44f81_row4_col61" class="data row4 col61" >52.5%</td>
                        <td id="T_44f81_row4_col62" class="data row4 col62" >52.5%</td>
            </tr>
    </tbody></table></div>
</div>
<p>Here we calculated the average heating intensity weighted by dwellings.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">use_intensity_average</span> <span class="o">=</span> <span class="p">(</span><span class="n">buildings</span><span class="o">.</span><span class="n">use_intensity</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="mi">2018</span><span class="p">]</span> <span class="o">*</span> <span class="n">stock_ini_seg</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">stock_ini_seg</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Energy use intensity average: </span><span class="si">{:.2f}</span><span class="s1">%&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">use_intensity_average</span> <span class="o">*</span> <span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Energy use intensity average: 79.26%
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">relation</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">((</span><span class="n">buildings</span><span class="o">.</span><span class="n">budget_share</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="mi">2018</span><span class="p">],</span> <span class="n">buildings</span><span class="o">.</span><span class="n">use_intensity</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="mi">2018</span><span class="p">]),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">relation</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Budget share&#39;</span><span class="p">,</span> <span class="s1">&#39;Use intensity&#39;</span><span class="p">]</span>
<span class="n">relation</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Budget share&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">simple_plot</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="s1">&#39;Budget share&#39;</span><span class="p">],</span> <span class="n">relation</span><span class="p">[</span><span class="s1">&#39;Use intensity&#39;</span><span class="p">],</span> <span class="s1">&#39;Budget share&#39;</span><span class="p">,</span> <span class="s1">&#39;Use intensity&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorials_26_0.png" src="_images/tutorials_26_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">display</span><span class="p">(</span><span class="n">buildings</span><span class="o">.</span><span class="n">consumption_actual</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="p">))</span>
<span class="n">consumption_unit_average</span> <span class="o">=</span> <span class="p">(</span><span class="n">buildings</span><span class="o">.</span><span class="n">consumption_actual</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="mi">2018</span><span class="p">]</span> <span class="o">*</span> <span class="n">stock_ini_seg</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">stock_ini_seg</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Consumption average: </span><span class="si">{:.0f}</span><span class="s1"> kWh/m2.yr&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">consumption_unit_average</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
</style><table id="T_fe28f_" ><thead>    <tr>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank level0" ></th>        <th class="col_heading level0 col0" >2018</th>        <th class="col_heading level0 col1" >2019</th>        <th class="col_heading level0 col2" >2020</th>        <th class="col_heading level0 col3" >2021</th>        <th class="col_heading level0 col4" >2022</th>        <th class="col_heading level0 col5" >2023</th>        <th class="col_heading level0 col6" >2024</th>        <th class="col_heading level0 col7" >2025</th>        <th class="col_heading level0 col8" >2026</th>        <th class="col_heading level0 col9" >2027</th>        <th class="col_heading level0 col10" >2028</th>        <th class="col_heading level0 col11" >2029</th>        <th class="col_heading level0 col12" >2030</th>        <th class="col_heading level0 col13" >2031</th>        <th class="col_heading level0 col14" >2032</th>        <th class="col_heading level0 col15" >2033</th>        <th class="col_heading level0 col16" >2034</th>        <th class="col_heading level0 col17" >2035</th>        <th class="col_heading level0 col18" >2036</th>        <th class="col_heading level0 col19" >2037</th>        <th class="col_heading level0 col20" >2038</th>        <th class="col_heading level0 col21" >2039</th>        <th class="col_heading level0 col22" >2040</th>        <th class="col_heading level0 col23" >2041</th>        <th class="col_heading level0 col24" >2042</th>        <th class="col_heading level0 col25" >2043</th>        <th class="col_heading level0 col26" >2044</th>        <th class="col_heading level0 col27" >2045</th>        <th class="col_heading level0 col28" >2046</th>        <th class="col_heading level0 col29" >2047</th>        <th class="col_heading level0 col30" >2048</th>        <th class="col_heading level0 col31" >2049</th>        <th class="col_heading level0 col32" >2050</th>        <th class="col_heading level0 col33" >2051</th>        <th class="col_heading level0 col34" >2052</th>        <th class="col_heading level0 col35" >2053</th>        <th class="col_heading level0 col36" >2054</th>        <th class="col_heading level0 col37" >2055</th>        <th class="col_heading level0 col38" >2056</th>        <th class="col_heading level0 col39" >2057</th>        <th class="col_heading level0 col40" >2058</th>        <th class="col_heading level0 col41" >2059</th>        <th class="col_heading level0 col42" >2060</th>        <th class="col_heading level0 col43" >2061</th>        <th class="col_heading level0 col44" >2062</th>        <th class="col_heading level0 col45" >2063</th>        <th class="col_heading level0 col46" >2064</th>        <th class="col_heading level0 col47" >2065</th>        <th class="col_heading level0 col48" >2066</th>        <th class="col_heading level0 col49" >2067</th>        <th class="col_heading level0 col50" >2068</th>        <th class="col_heading level0 col51" >2069</th>        <th class="col_heading level0 col52" >2070</th>        <th class="col_heading level0 col53" >2071</th>        <th class="col_heading level0 col54" >2072</th>        <th class="col_heading level0 col55" >2073</th>        <th class="col_heading level0 col56" >2074</th>        <th class="col_heading level0 col57" >2075</th>        <th class="col_heading level0 col58" >2076</th>        <th class="col_heading level0 col59" >2077</th>        <th class="col_heading level0 col60" >2078</th>        <th class="col_heading level0 col61" >2079</th>        <th class="col_heading level0 col62" >2080</th>    </tr>    <tr>        <th class="index_name level0" >Housing type</th>        <th class="index_name level1" >Occupancy status</th>        <th class="index_name level2" >Income class</th>        <th class="index_name level3" >Heating energy</th>        <th class="index_name level4" >Energy performance</th>        <th class="index_name level5" >Income class owner</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_fe28f_level0_row0" class="row_heading level0 row0" rowspan="5">Multi-family</th>
                        <th id="T_fe28f_level1_row0" class="row_heading level1 row0" rowspan="5">Homeowners</th>
                        <th id="T_fe28f_level2_row0" class="row_heading level2 row0" rowspan="5">D1</th>
                        <th id="T_fe28f_level3_row0" class="row_heading level3 row0" rowspan="5">Natural gas</th>
                        <th id="T_fe28f_level4_row0" class="row_heading level4 row0" >A</th>
                        <th id="T_fe28f_level5_row0" class="row_heading level5 row0" >D1</th>
                        <td id="T_fe28f_row0_col0" class="data row0 col0" >37.4</td>
                        <td id="T_fe28f_row0_col1" class="data row0 col1" >37.3</td>
                        <td id="T_fe28f_row0_col2" class="data row0 col2" >37.3</td>
                        <td id="T_fe28f_row0_col3" class="data row0 col3" >37.3</td>
                        <td id="T_fe28f_row0_col4" class="data row0 col4" >37.3</td>
                        <td id="T_fe28f_row0_col5" class="data row0 col5" >37.3</td>
                        <td id="T_fe28f_row0_col6" class="data row0 col6" >37.3</td>
                        <td id="T_fe28f_row0_col7" class="data row0 col7" >37.2</td>
                        <td id="T_fe28f_row0_col8" class="data row0 col8" >37.2</td>
                        <td id="T_fe28f_row0_col9" class="data row0 col9" >37.2</td>
                        <td id="T_fe28f_row0_col10" class="data row0 col10" >37.2</td>
                        <td id="T_fe28f_row0_col11" class="data row0 col11" >37.2</td>
                        <td id="T_fe28f_row0_col12" class="data row0 col12" >37.1</td>
                        <td id="T_fe28f_row0_col13" class="data row0 col13" >37.1</td>
                        <td id="T_fe28f_row0_col14" class="data row0 col14" >37.1</td>
                        <td id="T_fe28f_row0_col15" class="data row0 col15" >37.1</td>
                        <td id="T_fe28f_row0_col16" class="data row0 col16" >37.1</td>
                        <td id="T_fe28f_row0_col17" class="data row0 col17" >37.1</td>
                        <td id="T_fe28f_row0_col18" class="data row0 col18" >37.0</td>
                        <td id="T_fe28f_row0_col19" class="data row0 col19" >37.0</td>
                        <td id="T_fe28f_row0_col20" class="data row0 col20" >37.0</td>
                        <td id="T_fe28f_row0_col21" class="data row0 col21" >37.0</td>
                        <td id="T_fe28f_row0_col22" class="data row0 col22" >37.0</td>
                        <td id="T_fe28f_row0_col23" class="data row0 col23" >36.9</td>
                        <td id="T_fe28f_row0_col24" class="data row0 col24" >36.9</td>
                        <td id="T_fe28f_row0_col25" class="data row0 col25" >36.9</td>
                        <td id="T_fe28f_row0_col26" class="data row0 col26" >36.9</td>
                        <td id="T_fe28f_row0_col27" class="data row0 col27" >36.9</td>
                        <td id="T_fe28f_row0_col28" class="data row0 col28" >36.9</td>
                        <td id="T_fe28f_row0_col29" class="data row0 col29" >36.8</td>
                        <td id="T_fe28f_row0_col30" class="data row0 col30" >36.8</td>
                        <td id="T_fe28f_row0_col31" class="data row0 col31" >36.8</td>
                        <td id="T_fe28f_row0_col32" class="data row0 col32" >36.8</td>
                        <td id="T_fe28f_row0_col33" class="data row0 col33" >36.8</td>
                        <td id="T_fe28f_row0_col34" class="data row0 col34" >36.7</td>
                        <td id="T_fe28f_row0_col35" class="data row0 col35" >36.7</td>
                        <td id="T_fe28f_row0_col36" class="data row0 col36" >36.7</td>
                        <td id="T_fe28f_row0_col37" class="data row0 col37" >36.7</td>
                        <td id="T_fe28f_row0_col38" class="data row0 col38" >36.7</td>
                        <td id="T_fe28f_row0_col39" class="data row0 col39" >36.7</td>
                        <td id="T_fe28f_row0_col40" class="data row0 col40" >36.6</td>
                        <td id="T_fe28f_row0_col41" class="data row0 col41" >36.6</td>
                        <td id="T_fe28f_row0_col42" class="data row0 col42" >36.6</td>
                        <td id="T_fe28f_row0_col43" class="data row0 col43" >36.6</td>
                        <td id="T_fe28f_row0_col44" class="data row0 col44" >36.6</td>
                        <td id="T_fe28f_row0_col45" class="data row0 col45" >36.5</td>
                        <td id="T_fe28f_row0_col46" class="data row0 col46" >36.5</td>
                        <td id="T_fe28f_row0_col47" class="data row0 col47" >36.5</td>
                        <td id="T_fe28f_row0_col48" class="data row0 col48" >36.5</td>
                        <td id="T_fe28f_row0_col49" class="data row0 col49" >36.5</td>
                        <td id="T_fe28f_row0_col50" class="data row0 col50" >36.5</td>
                        <td id="T_fe28f_row0_col51" class="data row0 col51" >36.4</td>
                        <td id="T_fe28f_row0_col52" class="data row0 col52" >36.4</td>
                        <td id="T_fe28f_row0_col53" class="data row0 col53" >36.4</td>
                        <td id="T_fe28f_row0_col54" class="data row0 col54" >36.4</td>
                        <td id="T_fe28f_row0_col55" class="data row0 col55" >36.4</td>
                        <td id="T_fe28f_row0_col56" class="data row0 col56" >36.3</td>
                        <td id="T_fe28f_row0_col57" class="data row0 col57" >36.3</td>
                        <td id="T_fe28f_row0_col58" class="data row0 col58" >36.3</td>
                        <td id="T_fe28f_row0_col59" class="data row0 col59" >36.3</td>
                        <td id="T_fe28f_row0_col60" class="data row0 col60" >36.3</td>
                        <td id="T_fe28f_row0_col61" class="data row0 col61" >36.3</td>
                        <td id="T_fe28f_row0_col62" class="data row0 col62" >36.2</td>
            </tr>
            <tr>
                                                        <th id="T_fe28f_level4_row1" class="row_heading level4 row1" >B</th>
                        <th id="T_fe28f_level5_row1" class="row_heading level5 row1" >D1</th>
                        <td id="T_fe28f_row1_col0" class="data row1 col0" >46.8</td>
                        <td id="T_fe28f_row1_col1" class="data row1 col1" >46.8</td>
                        <td id="T_fe28f_row1_col2" class="data row1 col2" >46.7</td>
                        <td id="T_fe28f_row1_col3" class="data row1 col3" >46.7</td>
                        <td id="T_fe28f_row1_col4" class="data row1 col4" >46.7</td>
                        <td id="T_fe28f_row1_col5" class="data row1 col5" >46.7</td>
                        <td id="T_fe28f_row1_col6" class="data row1 col6" >46.6</td>
                        <td id="T_fe28f_row1_col7" class="data row1 col7" >46.6</td>
                        <td id="T_fe28f_row1_col8" class="data row1 col8" >46.6</td>
                        <td id="T_fe28f_row1_col9" class="data row1 col9" >46.6</td>
                        <td id="T_fe28f_row1_col10" class="data row1 col10" >46.5</td>
                        <td id="T_fe28f_row1_col11" class="data row1 col11" >46.5</td>
                        <td id="T_fe28f_row1_col12" class="data row1 col12" >46.5</td>
                        <td id="T_fe28f_row1_col13" class="data row1 col13" >46.5</td>
                        <td id="T_fe28f_row1_col14" class="data row1 col14" >46.4</td>
                        <td id="T_fe28f_row1_col15" class="data row1 col15" >46.4</td>
                        <td id="T_fe28f_row1_col16" class="data row1 col16" >46.4</td>
                        <td id="T_fe28f_row1_col17" class="data row1 col17" >46.4</td>
                        <td id="T_fe28f_row1_col18" class="data row1 col18" >46.4</td>
                        <td id="T_fe28f_row1_col19" class="data row1 col19" >46.3</td>
                        <td id="T_fe28f_row1_col20" class="data row1 col20" >46.3</td>
                        <td id="T_fe28f_row1_col21" class="data row1 col21" >46.3</td>
                        <td id="T_fe28f_row1_col22" class="data row1 col22" >46.3</td>
                        <td id="T_fe28f_row1_col23" class="data row1 col23" >46.2</td>
                        <td id="T_fe28f_row1_col24" class="data row1 col24" >46.2</td>
                        <td id="T_fe28f_row1_col25" class="data row1 col25" >46.2</td>
                        <td id="T_fe28f_row1_col26" class="data row1 col26" >46.2</td>
                        <td id="T_fe28f_row1_col27" class="data row1 col27" >46.1</td>
                        <td id="T_fe28f_row1_col28" class="data row1 col28" >46.1</td>
                        <td id="T_fe28f_row1_col29" class="data row1 col29" >46.1</td>
                        <td id="T_fe28f_row1_col30" class="data row1 col30" >46.1</td>
                        <td id="T_fe28f_row1_col31" class="data row1 col31" >46.0</td>
                        <td id="T_fe28f_row1_col32" class="data row1 col32" >46.0</td>
                        <td id="T_fe28f_row1_col33" class="data row1 col33" >46.0</td>
                        <td id="T_fe28f_row1_col34" class="data row1 col34" >46.0</td>
                        <td id="T_fe28f_row1_col35" class="data row1 col35" >45.9</td>
                        <td id="T_fe28f_row1_col36" class="data row1 col36" >45.9</td>
                        <td id="T_fe28f_row1_col37" class="data row1 col37" >45.9</td>
                        <td id="T_fe28f_row1_col38" class="data row1 col38" >45.9</td>
                        <td id="T_fe28f_row1_col39" class="data row1 col39" >45.8</td>
                        <td id="T_fe28f_row1_col40" class="data row1 col40" >45.8</td>
                        <td id="T_fe28f_row1_col41" class="data row1 col41" >45.8</td>
                        <td id="T_fe28f_row1_col42" class="data row1 col42" >45.8</td>
                        <td id="T_fe28f_row1_col43" class="data row1 col43" >45.7</td>
                        <td id="T_fe28f_row1_col44" class="data row1 col44" >45.7</td>
                        <td id="T_fe28f_row1_col45" class="data row1 col45" >45.7</td>
                        <td id="T_fe28f_row1_col46" class="data row1 col46" >45.7</td>
                        <td id="T_fe28f_row1_col47" class="data row1 col47" >45.6</td>
                        <td id="T_fe28f_row1_col48" class="data row1 col48" >45.6</td>
                        <td id="T_fe28f_row1_col49" class="data row1 col49" >45.6</td>
                        <td id="T_fe28f_row1_col50" class="data row1 col50" >45.6</td>
                        <td id="T_fe28f_row1_col51" class="data row1 col51" >45.6</td>
                        <td id="T_fe28f_row1_col52" class="data row1 col52" >45.5</td>
                        <td id="T_fe28f_row1_col53" class="data row1 col53" >45.5</td>
                        <td id="T_fe28f_row1_col54" class="data row1 col54" >45.5</td>
                        <td id="T_fe28f_row1_col55" class="data row1 col55" >45.5</td>
                        <td id="T_fe28f_row1_col56" class="data row1 col56" >45.4</td>
                        <td id="T_fe28f_row1_col57" class="data row1 col57" >45.4</td>
                        <td id="T_fe28f_row1_col58" class="data row1 col58" >45.4</td>
                        <td id="T_fe28f_row1_col59" class="data row1 col59" >45.4</td>
                        <td id="T_fe28f_row1_col60" class="data row1 col60" >45.3</td>
                        <td id="T_fe28f_row1_col61" class="data row1 col61" >45.3</td>
                        <td id="T_fe28f_row1_col62" class="data row1 col62" >45.3</td>
            </tr>
            <tr>
                                                        <th id="T_fe28f_level4_row2" class="row_heading level4 row2" >C</th>
                        <th id="T_fe28f_level5_row2" class="row_heading level5 row2" >D1</th>
                        <td id="T_fe28f_row2_col0" class="data row2 col0" >64.6</td>
                        <td id="T_fe28f_row2_col1" class="data row2 col1" >64.5</td>
                        <td id="T_fe28f_row2_col2" class="data row2 col2" >64.5</td>
                        <td id="T_fe28f_row2_col3" class="data row2 col3" >64.4</td>
                        <td id="T_fe28f_row2_col4" class="data row2 col4" >64.4</td>
                        <td id="T_fe28f_row2_col5" class="data row2 col5" >64.4</td>
                        <td id="T_fe28f_row2_col6" class="data row2 col6" >64.3</td>
                        <td id="T_fe28f_row2_col7" class="data row2 col7" >64.3</td>
                        <td id="T_fe28f_row2_col8" class="data row2 col8" >64.3</td>
                        <td id="T_fe28f_row2_col9" class="data row2 col9" >64.2</td>
                        <td id="T_fe28f_row2_col10" class="data row2 col10" >64.2</td>
                        <td id="T_fe28f_row2_col11" class="data row2 col11" >64.1</td>
                        <td id="T_fe28f_row2_col12" class="data row2 col12" >64.1</td>
                        <td id="T_fe28f_row2_col13" class="data row2 col13" >64.1</td>
                        <td id="T_fe28f_row2_col14" class="data row2 col14" >64.0</td>
                        <td id="T_fe28f_row2_col15" class="data row2 col15" >64.0</td>
                        <td id="T_fe28f_row2_col16" class="data row2 col16" >64.0</td>
                        <td id="T_fe28f_row2_col17" class="data row2 col17" >63.9</td>
                        <td id="T_fe28f_row2_col18" class="data row2 col18" >63.9</td>
                        <td id="T_fe28f_row2_col19" class="data row2 col19" >63.8</td>
                        <td id="T_fe28f_row2_col20" class="data row2 col20" >63.8</td>
                        <td id="T_fe28f_row2_col21" class="data row2 col21" >63.8</td>
                        <td id="T_fe28f_row2_col22" class="data row2 col22" >63.7</td>
                        <td id="T_fe28f_row2_col23" class="data row2 col23" >63.7</td>
                        <td id="T_fe28f_row2_col24" class="data row2 col24" >63.7</td>
                        <td id="T_fe28f_row2_col25" class="data row2 col25" >63.6</td>
                        <td id="T_fe28f_row2_col26" class="data row2 col26" >63.6</td>
                        <td id="T_fe28f_row2_col27" class="data row2 col27" >63.6</td>
                        <td id="T_fe28f_row2_col28" class="data row2 col28" >63.5</td>
                        <td id="T_fe28f_row2_col29" class="data row2 col29" >63.5</td>
                        <td id="T_fe28f_row2_col30" class="data row2 col30" >63.4</td>
                        <td id="T_fe28f_row2_col31" class="data row2 col31" >63.4</td>
                        <td id="T_fe28f_row2_col32" class="data row2 col32" >63.4</td>
                        <td id="T_fe28f_row2_col33" class="data row2 col33" >63.3</td>
                        <td id="T_fe28f_row2_col34" class="data row2 col34" >63.3</td>
                        <td id="T_fe28f_row2_col35" class="data row2 col35" >63.3</td>
                        <td id="T_fe28f_row2_col36" class="data row2 col36" >63.2</td>
                        <td id="T_fe28f_row2_col37" class="data row2 col37" >63.2</td>
                        <td id="T_fe28f_row2_col38" class="data row2 col38" >63.1</td>
                        <td id="T_fe28f_row2_col39" class="data row2 col39" >63.1</td>
                        <td id="T_fe28f_row2_col40" class="data row2 col40" >63.1</td>
                        <td id="T_fe28f_row2_col41" class="data row2 col41" >63.0</td>
                        <td id="T_fe28f_row2_col42" class="data row2 col42" >63.0</td>
                        <td id="T_fe28f_row2_col43" class="data row2 col43" >63.0</td>
                        <td id="T_fe28f_row2_col44" class="data row2 col44" >62.9</td>
                        <td id="T_fe28f_row2_col45" class="data row2 col45" >62.9</td>
                        <td id="T_fe28f_row2_col46" class="data row2 col46" >62.8</td>
                        <td id="T_fe28f_row2_col47" class="data row2 col47" >62.8</td>
                        <td id="T_fe28f_row2_col48" class="data row2 col48" >62.8</td>
                        <td id="T_fe28f_row2_col49" class="data row2 col49" >62.7</td>
                        <td id="T_fe28f_row2_col50" class="data row2 col50" >62.7</td>
                        <td id="T_fe28f_row2_col51" class="data row2 col51" >62.7</td>
                        <td id="T_fe28f_row2_col52" class="data row2 col52" >62.6</td>
                        <td id="T_fe28f_row2_col53" class="data row2 col53" >62.6</td>
                        <td id="T_fe28f_row2_col54" class="data row2 col54" >62.5</td>
                        <td id="T_fe28f_row2_col55" class="data row2 col55" >62.5</td>
                        <td id="T_fe28f_row2_col56" class="data row2 col56" >62.5</td>
                        <td id="T_fe28f_row2_col57" class="data row2 col57" >62.4</td>
                        <td id="T_fe28f_row2_col58" class="data row2 col58" >62.4</td>
                        <td id="T_fe28f_row2_col59" class="data row2 col59" >62.4</td>
                        <td id="T_fe28f_row2_col60" class="data row2 col60" >62.3</td>
                        <td id="T_fe28f_row2_col61" class="data row2 col61" >62.3</td>
                        <td id="T_fe28f_row2_col62" class="data row2 col62" >62.2</td>
            </tr>
            <tr>
                                                        <th id="T_fe28f_level4_row3" class="row_heading level4 row3" >D</th>
                        <th id="T_fe28f_level5_row3" class="row_heading level5 row3" >D1</th>
                        <td id="T_fe28f_row3_col0" class="data row3 col0" >89.2</td>
                        <td id="T_fe28f_row3_col1" class="data row3 col1" >89.1</td>
                        <td id="T_fe28f_row3_col2" class="data row3 col2" >89.1</td>
                        <td id="T_fe28f_row3_col3" class="data row3 col3" >89.0</td>
                        <td id="T_fe28f_row3_col4" class="data row3 col4" >89.0</td>
                        <td id="T_fe28f_row3_col5" class="data row3 col5" >88.9</td>
                        <td id="T_fe28f_row3_col6" class="data row3 col6" >88.8</td>
                        <td id="T_fe28f_row3_col7" class="data row3 col7" >88.8</td>
                        <td id="T_fe28f_row3_col8" class="data row3 col8" >88.7</td>
                        <td id="T_fe28f_row3_col9" class="data row3 col9" >88.7</td>
                        <td id="T_fe28f_row3_col10" class="data row3 col10" >88.6</td>
                        <td id="T_fe28f_row3_col11" class="data row3 col11" >88.6</td>
                        <td id="T_fe28f_row3_col12" class="data row3 col12" >88.5</td>
                        <td id="T_fe28f_row3_col13" class="data row3 col13" >88.4</td>
                        <td id="T_fe28f_row3_col14" class="data row3 col14" >88.4</td>
                        <td id="T_fe28f_row3_col15" class="data row3 col15" >88.3</td>
                        <td id="T_fe28f_row3_col16" class="data row3 col16" >88.3</td>
                        <td id="T_fe28f_row3_col17" class="data row3 col17" >88.2</td>
                        <td id="T_fe28f_row3_col18" class="data row3 col18" >88.1</td>
                        <td id="T_fe28f_row3_col19" class="data row3 col19" >88.1</td>
                        <td id="T_fe28f_row3_col20" class="data row3 col20" >88.0</td>
                        <td id="T_fe28f_row3_col21" class="data row3 col21" >88.0</td>
                        <td id="T_fe28f_row3_col22" class="data row3 col22" >87.9</td>
                        <td id="T_fe28f_row3_col23" class="data row3 col23" >87.9</td>
                        <td id="T_fe28f_row3_col24" class="data row3 col24" >87.8</td>
                        <td id="T_fe28f_row3_col25" class="data row3 col25" >87.7</td>
                        <td id="T_fe28f_row3_col26" class="data row3 col26" >87.7</td>
                        <td id="T_fe28f_row3_col27" class="data row3 col27" >87.6</td>
                        <td id="T_fe28f_row3_col28" class="data row3 col28" >87.6</td>
                        <td id="T_fe28f_row3_col29" class="data row3 col29" >87.5</td>
                        <td id="T_fe28f_row3_col30" class="data row3 col30" >87.4</td>
                        <td id="T_fe28f_row3_col31" class="data row3 col31" >87.4</td>
                        <td id="T_fe28f_row3_col32" class="data row3 col32" >87.3</td>
                        <td id="T_fe28f_row3_col33" class="data row3 col33" >87.3</td>
                        <td id="T_fe28f_row3_col34" class="data row3 col34" >87.2</td>
                        <td id="T_fe28f_row3_col35" class="data row3 col35" >87.1</td>
                        <td id="T_fe28f_row3_col36" class="data row3 col36" >87.1</td>
                        <td id="T_fe28f_row3_col37" class="data row3 col37" >87.0</td>
                        <td id="T_fe28f_row3_col38" class="data row3 col38" >87.0</td>
                        <td id="T_fe28f_row3_col39" class="data row3 col39" >86.9</td>
                        <td id="T_fe28f_row3_col40" class="data row3 col40" >86.9</td>
                        <td id="T_fe28f_row3_col41" class="data row3 col41" >86.8</td>
                        <td id="T_fe28f_row3_col42" class="data row3 col42" >86.7</td>
                        <td id="T_fe28f_row3_col43" class="data row3 col43" >86.7</td>
                        <td id="T_fe28f_row3_col44" class="data row3 col44" >86.6</td>
                        <td id="T_fe28f_row3_col45" class="data row3 col45" >86.6</td>
                        <td id="T_fe28f_row3_col46" class="data row3 col46" >86.5</td>
                        <td id="T_fe28f_row3_col47" class="data row3 col47" >86.4</td>
                        <td id="T_fe28f_row3_col48" class="data row3 col48" >86.4</td>
                        <td id="T_fe28f_row3_col49" class="data row3 col49" >86.3</td>
                        <td id="T_fe28f_row3_col50" class="data row3 col50" >86.3</td>
                        <td id="T_fe28f_row3_col51" class="data row3 col51" >86.2</td>
                        <td id="T_fe28f_row3_col52" class="data row3 col52" >86.2</td>
                        <td id="T_fe28f_row3_col53" class="data row3 col53" >86.1</td>
                        <td id="T_fe28f_row3_col54" class="data row3 col54" >86.0</td>
                        <td id="T_fe28f_row3_col55" class="data row3 col55" >86.0</td>
                        <td id="T_fe28f_row3_col56" class="data row3 col56" >85.9</td>
                        <td id="T_fe28f_row3_col57" class="data row3 col57" >85.9</td>
                        <td id="T_fe28f_row3_col58" class="data row3 col58" >85.8</td>
                        <td id="T_fe28f_row3_col59" class="data row3 col59" >85.7</td>
                        <td id="T_fe28f_row3_col60" class="data row3 col60" >85.7</td>
                        <td id="T_fe28f_row3_col61" class="data row3 col61" >85.6</td>
                        <td id="T_fe28f_row3_col62" class="data row3 col62" >85.6</td>
            </tr>
            <tr>
                                                        <th id="T_fe28f_level4_row4" class="row_heading level4 row4" >E</th>
                        <th id="T_fe28f_level5_row4" class="row_heading level5 row4" >D1</th>
                        <td id="T_fe28f_row4_col0" class="data row4 col0" >118.7</td>
                        <td id="T_fe28f_row4_col1" class="data row4 col1" >118.6</td>
                        <td id="T_fe28f_row4_col2" class="data row4 col2" >118.5</td>
                        <td id="T_fe28f_row4_col3" class="data row4 col3" >118.4</td>
                        <td id="T_fe28f_row4_col4" class="data row4 col4" >118.3</td>
                        <td id="T_fe28f_row4_col5" class="data row4 col5" >118.2</td>
                        <td id="T_fe28f_row4_col6" class="data row4 col6" >118.1</td>
                        <td id="T_fe28f_row4_col7" class="data row4 col7" >118.1</td>
                        <td id="T_fe28f_row4_col8" class="data row4 col8" >118.0</td>
                        <td id="T_fe28f_row4_col9" class="data row4 col9" >117.9</td>
                        <td id="T_fe28f_row4_col10" class="data row4 col10" >117.8</td>
                        <td id="T_fe28f_row4_col11" class="data row4 col11" >117.7</td>
                        <td id="T_fe28f_row4_col12" class="data row4 col12" >117.6</td>
                        <td id="T_fe28f_row4_col13" class="data row4 col13" >117.5</td>
                        <td id="T_fe28f_row4_col14" class="data row4 col14" >117.4</td>
                        <td id="T_fe28f_row4_col15" class="data row4 col15" >117.3</td>
                        <td id="T_fe28f_row4_col16" class="data row4 col16" >117.2</td>
                        <td id="T_fe28f_row4_col17" class="data row4 col17" >117.2</td>
                        <td id="T_fe28f_row4_col18" class="data row4 col18" >117.1</td>
                        <td id="T_fe28f_row4_col19" class="data row4 col19" >117.0</td>
                        <td id="T_fe28f_row4_col20" class="data row4 col20" >116.9</td>
                        <td id="T_fe28f_row4_col21" class="data row4 col21" >116.8</td>
                        <td id="T_fe28f_row4_col22" class="data row4 col22" >116.7</td>
                        <td id="T_fe28f_row4_col23" class="data row4 col23" >116.6</td>
                        <td id="T_fe28f_row4_col24" class="data row4 col24" >116.5</td>
                        <td id="T_fe28f_row4_col25" class="data row4 col25" >116.4</td>
                        <td id="T_fe28f_row4_col26" class="data row4 col26" >116.4</td>
                        <td id="T_fe28f_row4_col27" class="data row4 col27" >116.3</td>
                        <td id="T_fe28f_row4_col28" class="data row4 col28" >116.2</td>
                        <td id="T_fe28f_row4_col29" class="data row4 col29" >116.1</td>
                        <td id="T_fe28f_row4_col30" class="data row4 col30" >116.0</td>
                        <td id="T_fe28f_row4_col31" class="data row4 col31" >115.9</td>
                        <td id="T_fe28f_row4_col32" class="data row4 col32" >115.8</td>
                        <td id="T_fe28f_row4_col33" class="data row4 col33" >115.7</td>
                        <td id="T_fe28f_row4_col34" class="data row4 col34" >115.6</td>
                        <td id="T_fe28f_row4_col35" class="data row4 col35" >115.5</td>
                        <td id="T_fe28f_row4_col36" class="data row4 col36" >115.5</td>
                        <td id="T_fe28f_row4_col37" class="data row4 col37" >115.4</td>
                        <td id="T_fe28f_row4_col38" class="data row4 col38" >115.3</td>
                        <td id="T_fe28f_row4_col39" class="data row4 col39" >115.2</td>
                        <td id="T_fe28f_row4_col40" class="data row4 col40" >115.1</td>
                        <td id="T_fe28f_row4_col41" class="data row4 col41" >115.0</td>
                        <td id="T_fe28f_row4_col42" class="data row4 col42" >114.9</td>
                        <td id="T_fe28f_row4_col43" class="data row4 col43" >114.8</td>
                        <td id="T_fe28f_row4_col44" class="data row4 col44" >114.7</td>
                        <td id="T_fe28f_row4_col45" class="data row4 col45" >114.7</td>
                        <td id="T_fe28f_row4_col46" class="data row4 col46" >114.6</td>
                        <td id="T_fe28f_row4_col47" class="data row4 col47" >114.5</td>
                        <td id="T_fe28f_row4_col48" class="data row4 col48" >114.4</td>
                        <td id="T_fe28f_row4_col49" class="data row4 col49" >114.3</td>
                        <td id="T_fe28f_row4_col50" class="data row4 col50" >114.2</td>
                        <td id="T_fe28f_row4_col51" class="data row4 col51" >114.1</td>
                        <td id="T_fe28f_row4_col52" class="data row4 col52" >114.0</td>
                        <td id="T_fe28f_row4_col53" class="data row4 col53" >113.9</td>
                        <td id="T_fe28f_row4_col54" class="data row4 col54" >113.9</td>
                        <td id="T_fe28f_row4_col55" class="data row4 col55" >113.8</td>
                        <td id="T_fe28f_row4_col56" class="data row4 col56" >113.7</td>
                        <td id="T_fe28f_row4_col57" class="data row4 col57" >113.6</td>
                        <td id="T_fe28f_row4_col58" class="data row4 col58" >113.5</td>
                        <td id="T_fe28f_row4_col59" class="data row4 col59" >113.4</td>
                        <td id="T_fe28f_row4_col60" class="data row4 col60" >113.3</td>
                        <td id="T_fe28f_row4_col61" class="data row4 col61" >113.2</td>
                        <td id="T_fe28f_row4_col62" class="data row4 col62" >113.1</td>
            </tr>
    </tbody></table></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Consumption average: 94 kWh/m2.yr
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">relation</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">((</span><span class="n">stock_ini_seg</span><span class="p">,</span> <span class="n">buildings</span><span class="o">.</span><span class="n">consumption_actual</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="mi">2018</span><span class="p">]),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">relation</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Stock&#39;</span><span class="p">,</span> <span class="s1">&#39;Consumption&#39;</span><span class="p">]</span>
<span class="n">relation</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Consumption&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">relation</span><span class="p">[</span><span class="s1">&#39;Stock cumulated&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="s1">&#39;Stock&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>

<span class="n">simple_plot</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="s1">&#39;Stock cumulated&#39;</span><span class="p">],</span> <span class="n">relation</span><span class="p">[</span><span class="s1">&#39;Consumption&#39;</span><span class="p">],</span> <span class="s1">&#39;Stock cumulated&#39;</span><span class="p">,</span> <span class="s1">&#39;Consumption&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorials_30_0.png" src="_images/tutorials_30_0.png" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">consumption</span> <span class="o">=</span> <span class="p">(</span><span class="n">buildings</span><span class="o">.</span><span class="n">consumption_actual</span><span class="o">.</span><span class="n">T</span> <span class="o">*</span> <span class="n">buildings</span><span class="o">.</span><span class="n">area</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="n">display</span><span class="p">(</span><span class="n">consumption</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
<span class="n">consumption_average</span> <span class="o">=</span> <span class="p">(</span><span class="n">consumption</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="mi">2018</span><span class="p">]</span> <span class="o">*</span> <span class="n">stock_ini_seg</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">stock_ini_seg</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Consumption average: </span><span class="si">{:.0f}</span><span class="s1"> kWh/yr&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">consumption_average</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th>2018</th>
      <th>2019</th>
      <th>2020</th>
      <th>2021</th>
      <th>2022</th>
      <th>2023</th>
      <th>2024</th>
      <th>2025</th>
      <th>2026</th>
      <th>2027</th>
      <th>...</th>
      <th>2071</th>
      <th>2072</th>
      <th>2073</th>
      <th>2074</th>
      <th>2075</th>
      <th>2076</th>
      <th>2077</th>
      <th>2078</th>
      <th>2079</th>
      <th>2080</th>
    </tr>
    <tr>
      <th>Housing type</th>
      <th>Occupancy status</th>
      <th>Income class</th>
      <th>Heating energy</th>
      <th>Energy performance</th>
      <th>Income class owner</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th rowspan="5" valign="top">Multi-family</th>
      <th rowspan="5" valign="top">Homeowners</th>
      <th rowspan="5" valign="top">D1</th>
      <th rowspan="5" valign="top">Natural gas</th>
      <th>A</th>
      <th>D1</th>
      <td>2776.126093</td>
      <td>2774.779999</td>
      <td>2773.433905</td>
      <td>2772.087811</td>
      <td>2770.741717</td>
      <td>2769.395623</td>
      <td>2768.049530</td>
      <td>2766.703436</td>
      <td>2765.357342</td>
      <td>2764.011248</td>
      <td>...</td>
      <td>2704.783118</td>
      <td>2703.437024</td>
      <td>2702.090930</td>
      <td>2700.744836</td>
      <td>2699.398742</td>
      <td>2698.052648</td>
      <td>2696.706554</td>
      <td>2695.360460</td>
      <td>2694.014367</td>
      <td>2692.668273</td>
    </tr>
    <tr>
      <th>B</th>
      <th>D1</th>
      <td>3476.401303</td>
      <td>3474.597882</td>
      <td>3472.794462</td>
      <td>3470.991041</td>
      <td>3469.187621</td>
      <td>3467.384200</td>
      <td>3465.580779</td>
      <td>3463.777359</td>
      <td>3461.973938</td>
      <td>3460.170517</td>
      <td>...</td>
      <td>3380.820009</td>
      <td>3379.016589</td>
      <td>3377.213168</td>
      <td>3375.409748</td>
      <td>3373.606327</td>
      <td>3371.802906</td>
      <td>3369.999486</td>
      <td>3368.196065</td>
      <td>3366.392644</td>
      <td>3364.589224</td>
    </tr>
    <tr>
      <th>C</th>
      <th>D1</th>
      <td>4796.715157</td>
      <td>4793.941612</td>
      <td>4791.168067</td>
      <td>4788.394522</td>
      <td>4785.620977</td>
      <td>4782.847432</td>
      <td>4780.073887</td>
      <td>4777.300342</td>
      <td>4774.526796</td>
      <td>4771.753251</td>
      <td>...</td>
      <td>4649.717269</td>
      <td>4646.943724</td>
      <td>4644.170178</td>
      <td>4641.396633</td>
      <td>4638.623088</td>
      <td>4635.849543</td>
      <td>4633.075998</td>
      <td>4630.302453</td>
      <td>4627.528908</td>
      <td>4624.755363</td>
    </tr>
    <tr>
      <th>D</th>
      <th>D1</th>
      <td>6627.640208</td>
      <td>6623.284510</td>
      <td>6618.928811</td>
      <td>6614.573113</td>
      <td>6610.217414</td>
      <td>6605.861716</td>
      <td>6601.506018</td>
      <td>6597.150319</td>
      <td>6592.794621</td>
      <td>6588.438922</td>
      <td>...</td>
      <td>6396.788191</td>
      <td>6392.432493</td>
      <td>6388.076794</td>
      <td>6383.721096</td>
      <td>6379.365397</td>
      <td>6375.009699</td>
      <td>6370.654000</td>
      <td>6366.298302</td>
      <td>6361.942603</td>
      <td>6357.586905</td>
    </tr>
    <tr>
      <th>E</th>
      <th>D1</th>
      <td>8817.845989</td>
      <td>8811.201808</td>
      <td>8804.557626</td>
      <td>8797.913445</td>
      <td>8791.269264</td>
      <td>8784.625083</td>
      <td>8777.980901</td>
      <td>8771.336720</td>
      <td>8764.692539</td>
      <td>8758.048357</td>
      <td>...</td>
      <td>8465.704381</td>
      <td>8459.060199</td>
      <td>8452.416018</td>
      <td>8445.771837</td>
      <td>8439.127656</td>
      <td>8432.483474</td>
      <td>8425.839293</td>
      <td>8419.195112</td>
      <td>8412.550930</td>
      <td>8405.906749</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 63 columns</p>
</div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Consumption average: 7791 kWh/yr
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">relation</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">((</span><span class="n">stock_ini_seg</span><span class="p">,</span> <span class="n">consumption</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="mi">2018</span><span class="p">]),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">relation</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Stock&#39;</span><span class="p">,</span> <span class="s1">&#39;Consumption&#39;</span><span class="p">]</span>
<span class="n">relation</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Consumption&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">relation</span><span class="p">[</span><span class="s1">&#39;Stock cumulated&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="s1">&#39;Stock&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>

<span class="n">simple_plot</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="s1">&#39;Stock cumulated&#39;</span><span class="p">],</span> <span class="n">relation</span><span class="p">[</span><span class="s1">&#39;Consumption&#39;</span><span class="p">],</span> <span class="s1">&#39;Stock cumulated&#39;</span><span class="p">,</span> <span class="s1">&#39;Consumption&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorials_33_0.png" src="_images/tutorials_33_0.png" />
</div>
</div>
</section>
<section id="Transition-economics">
<h1>Transition economics<a class="headerlink" href="#Transition-economics" title="Permalink to this headline">¶</a></h1>
<div class="line-block">
<div class="line">The energy performance of the housing stock in Res-IRF is affected by both the construction of new dwellings and the renovation of existing ones. Both effects are modelled by discrete choice functions. Generally speaking, the owner of a dwelling of initial performance i∈{1…n} chooses to upgrade it to an option of final performance f∈{i+1,…,n} by comparing its life-cycle cost to that of other options. The life-cycle cost <span class="math notranslate nohighlight">\(LCC_{(i,f)}\)</span> of an option is the sum of three terms:</div>
<div class="line"><br /></div>
</div>
<blockquote>
<div><div class="math notranslate nohighlight">
\[LCC_{(i,f)}=INV_{(i,f)}+ γ * ENER_f+ IC_{(i,f)}\]</div>
</div></blockquote>
<div class="line-block">
<div class="line">where:</div>
<div class="line">- INV is the investment cost;</div>
<div class="line">- ENER is the life-cycle discounted cost of conventional energy use, calculated using the energy price for the year under consideration;</div>
<div class="line">- IC are some “intangible costs,” representing non-energy attributes of the investment, such as aesthetic or acoustic benefits, inconvenience generated by insulation works, etc..</div>
</div>
<div class="line-block">
<div class="line">The assumption of myopic expectation, which materializes by applying the discount factor to the contemporaneous energy price, is justified by a number of econometric studies. The discount factor γ depends on the discount rate r and the investment horizon l according to the following relationship:</div>
<div class="line"><br /></div>
</div>
<blockquote>
<div><div class="math notranslate nohighlight">
\[γ(r,l)=∑_{(t=0)}(1+r)^{-t} =\frac{(1-(1+r)^{-l})}{r}\]</div>
</div></blockquote>
<p>The two parameters are set in Res-IRF so as to capture various barriers to home renovation: - The discount rate captures both the tighter credit constraints facing lower-income households and the barriers to decision-making within homeowner associations. - The investment horizon reflects the intensity with which real estate and rental markets capitalize the “green value” of the housing, i.e., magnitude of the rental or resale premium for a property that has just undergone energy efficiency
improvements.</p>
<p>The market share <span class="math notranslate nohighlight">\(MS_{i,f}\)</span> of upgrades from labels i to f, resulting from the aggregation of individual choices, is determined by their life-cycle cost from the following equation:</p>
<div class="math notranslate nohighlight">
\[MS_{i,f}=\frac{LCC_{i,f}^{-v}}{∑_{k=i+1}LCC_{i,k}^{-v}}\]</div>
<ul class="simple">
<li><p>Parameter v characterizing the heterogeneity of preferences is set to 8 in the model.</p></li>
<li><p>Intangible costs are calibrated so that the observed market shares are reproduced in the initial year.</p></li>
</ul>
<p>The model simultaneously determines (i) the number of renovations and (ii) their performance.</p>
<section id="Renovation-cost">
<h2>Renovation cost<a class="headerlink" href="#Renovation-cost" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">display</span><span class="p">(</span><span class="n">cost_invest</span><span class="p">[</span><span class="s1">&#39;Energy performance&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{:.1f}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
</style><table id="T_7a486_" ><thead>    <tr>        <th class="index_name level0" >Energy performance final</th>        <th class="col_heading level0 col0" >G</th>        <th class="col_heading level0 col1" >F</th>        <th class="col_heading level0 col2" >E</th>        <th class="col_heading level0 col3" >D</th>        <th class="col_heading level0 col4" >C</th>        <th class="col_heading level0 col5" >B</th>        <th class="col_heading level0 col6" >A</th>    </tr>    <tr>        <th class="index_name level0" >Energy performance</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_7a486_level0_row0" class="row_heading level0 row0" >G</th>
                        <td id="T_7a486_row0_col0" class="data row0 col0" >-</td>
                        <td id="T_7a486_row0_col1" class="data row0 col1" >79.2</td>
                        <td id="T_7a486_row0_col2" class="data row0 col2" >142.0</td>
                        <td id="T_7a486_row0_col3" class="data row0 col3" >209.2</td>
                        <td id="T_7a486_row0_col4" class="data row0 col4" >282.3</td>
                        <td id="T_7a486_row0_col5" class="data row0 col5" >365.5</td>
                        <td id="T_7a486_row0_col6" class="data row0 col6" >460.7</td>
            </tr>
            <tr>
                        <th id="T_7a486_level0_row1" class="row_heading level0 row1" >F</th>
                        <td id="T_7a486_row1_col0" class="data row1 col0" >-</td>
                        <td id="T_7a486_row1_col1" class="data row1 col1" >-</td>
                        <td id="T_7a486_row1_col2" class="data row1 col2" >65.7</td>
                        <td id="T_7a486_row1_col3" class="data row1 col3" >135.9</td>
                        <td id="T_7a486_row1_col4" class="data row1 col4" >212.2</td>
                        <td id="T_7a486_row1_col5" class="data row1 col5" >298.9</td>
                        <td id="T_7a486_row1_col6" class="data row1 col6" >398.1</td>
            </tr>
            <tr>
                        <th id="T_7a486_level0_row2" class="row_heading level0 row2" >E</th>
                        <td id="T_7a486_row2_col0" class="data row2 col0" >-</td>
                        <td id="T_7a486_row2_col1" class="data row2 col1" >-</td>
                        <td id="T_7a486_row2_col2" class="data row2 col2" >-</td>
                        <td id="T_7a486_row2_col3" class="data row2 col3" >73.0</td>
                        <td id="T_7a486_row2_col4" class="data row2 col4" >152.2</td>
                        <td id="T_7a486_row2_col5" class="data row2 col5" >242.2</td>
                        <td id="T_7a486_row2_col6" class="data row2 col6" >345.0</td>
            </tr>
            <tr>
                        <th id="T_7a486_level0_row3" class="row_heading level0 row3" >D</th>
                        <td id="T_7a486_row3_col0" class="data row3 col0" >-</td>
                        <td id="T_7a486_row3_col1" class="data row3 col1" >-</td>
                        <td id="T_7a486_row3_col2" class="data row3 col2" >-</td>
                        <td id="T_7a486_row3_col3" class="data row3 col3" >-</td>
                        <td id="T_7a486_row3_col4" class="data row3 col4" >82.4</td>
                        <td id="T_7a486_row3_col5" class="data row3 col5" >175.7</td>
                        <td id="T_7a486_row3_col6" class="data row3 col6" >282.3</td>
            </tr>
            <tr>
                        <th id="T_7a486_level0_row4" class="row_heading level0 row4" >C</th>
                        <td id="T_7a486_row4_col0" class="data row4 col0" >-</td>
                        <td id="T_7a486_row4_col1" class="data row4 col1" >-</td>
                        <td id="T_7a486_row4_col2" class="data row4 col2" >-</td>
                        <td id="T_7a486_row4_col3" class="data row4 col3" >-</td>
                        <td id="T_7a486_row4_col4" class="data row4 col4" >-</td>
                        <td id="T_7a486_row4_col5" class="data row4 col5" >97.0</td>
                        <td id="T_7a486_row4_col6" class="data row4 col6" >207.4</td>
            </tr>
            <tr>
                        <th id="T_7a486_level0_row5" class="row_heading level0 row5" >B</th>
                        <td id="T_7a486_row5_col0" class="data row5 col0" >-</td>
                        <td id="T_7a486_row5_col1" class="data row5 col1" >-</td>
                        <td id="T_7a486_row5_col2" class="data row5 col2" >-</td>
                        <td id="T_7a486_row5_col3" class="data row5 col3" >-</td>
                        <td id="T_7a486_row5_col4" class="data row5 col4" >-</td>
                        <td id="T_7a486_row5_col5" class="data row5 col5" >-</td>
                        <td id="T_7a486_row5_col6" class="data row5 col6" >114.7</td>
            </tr>
            <tr>
                        <th id="T_7a486_level0_row6" class="row_heading level0 row6" >A</th>
                        <td id="T_7a486_row6_col0" class="data row6 col0" >-</td>
                        <td id="T_7a486_row6_col1" class="data row6 col1" >-</td>
                        <td id="T_7a486_row6_col2" class="data row6 col2" >-</td>
                        <td id="T_7a486_row6_col3" class="data row6 col3" >-</td>
                        <td id="T_7a486_row6_col4" class="data row6 col4" >-</td>
                        <td id="T_7a486_row6_col5" class="data row6 col5" >-</td>
                        <td id="T_7a486_row6_col6" class="data row6 col6" >-</td>
            </tr>
    </tbody></table></div>
</div>
<p>The matrix equally applies to single- and multi-family dwellings, in both private and social housing.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">display</span><span class="p">(</span><span class="n">cost_invest</span><span class="p">[</span><span class="s1">&#39;Heating energy&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{:.1f}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
</style><table id="T_9cb40_" ><thead>    <tr>        <th class="index_name level0" >Heating energy final</th>        <th class="col_heading level0 col0" >Power</th>        <th class="col_heading level0 col1" >Natural gas</th>        <th class="col_heading level0 col2" >Oil fuel</th>        <th class="col_heading level0 col3" >Wood fuel</th>    </tr>    <tr>        <th class="index_name level0" >Heating energy</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_9cb40_level0_row0" class="row_heading level0 row0" >Power</th>
                        <td id="T_9cb40_row0_col0" class="data row0 col0" >0.0</td>
                        <td id="T_9cb40_row0_col1" class="data row0 col1" >73.0</td>
                        <td id="T_9cb40_row0_col2" class="data row0 col2" >104.3</td>
                        <td id="T_9cb40_row0_col3" class="data row0 col3" >125.1</td>
            </tr>
            <tr>
                        <th id="T_9cb40_level0_row1" class="row_heading level0 row1" >Natural gas</th>
                        <td id="T_9cb40_row1_col0" class="data row1 col0" >57.3</td>
                        <td id="T_9cb40_row1_col1" class="data row1 col1" >0.0</td>
                        <td id="T_9cb40_row1_col2" class="data row1 col2" >83.4</td>
                        <td id="T_9cb40_row1_col3" class="data row1 col3" >104.3</td>
            </tr>
            <tr>
                        <th id="T_9cb40_level0_row2" class="row_heading level0 row2" >Oil fuel</th>
                        <td id="T_9cb40_row2_col0" class="data row2 col0" >57.3</td>
                        <td id="T_9cb40_row2_col1" class="data row2 col1" >52.1</td>
                        <td id="T_9cb40_row2_col2" class="data row2 col2" >0.0</td>
                        <td id="T_9cb40_row2_col3" class="data row2 col3" >104.3</td>
            </tr>
            <tr>
                        <th id="T_9cb40_level0_row3" class="row_heading level0 row3" >Wood fuel</th>
                        <td id="T_9cb40_row3_col0" class="data row3 col0" >57.3</td>
                        <td id="T_9cb40_row3_col1" class="data row3 col1" >52.1</td>
                        <td id="T_9cb40_row3_col2" class="data row3 col2" >83.4</td>
                        <td id="T_9cb40_row3_col3" class="data row3 col3" >0.0</td>
            </tr>
    </tbody></table></div>
</div>
</section>
<section id="Calculation-of-life-cycle-cost">
<h2>Calculation of life-cycle-cost<a class="headerlink" href="#Calculation-of-life-cycle-cost" title="Permalink to this headline">¶</a></h2>
<section id="Energy-life-cycle-cost">
<h3>Energy life-cycle cost<a class="headerlink" href="#Energy-life-cycle-cost" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">help</span><span class="p">(</span><span class="n">buildings</span><span class="o">.</span><span class="n">to_energy_lcc</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Help on method to_energy_lcc in module project.buildings:

to_energy_lcc(energy_prices, transition=None, consumption=&#39;conventional&#39;) method of project.buildings.HousingStock instance
    Return segmented energy-life-cycle-cost discounted from segments, and energy prices year=yr.

    Energy LCC is calculated on an segment-specific horizon, and using a segment-specific discount rate.
    Because, time horizon depends of type of renovation (label, or heating energy), lcc needs to know which transition.
    NB: transition defined the investment horizon.
    Energy LCC depends on (Occupancy status, Housing type, Income class owner, Energy performance, Heating energy,
    and transition).

    Parameters
    ----------
    energy_prices: pd.DataFrame
    transition: list, default [&#39;Energy performance&#39;]
    consumption: {&#39;conventional&#39;, &#39;actual}

    Returns
    -------
    pd.Series

</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">energy_lcc</span> <span class="o">=</span> <span class="n">buildings</span><span class="o">.</span><span class="n">to_energy_lcc</span><span class="p">(</span><span class="n">energy_price</span><span class="p">,</span> <span class="n">transition</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Energy performance&#39;</span><span class="p">],</span> <span class="n">consumption</span><span class="o">=</span><span class="s1">&#39;conventional&#39;</span><span class="p">)</span>
<span class="n">energy_lcc</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Energy LCC&#39;</span>
<span class="n">display</span><span class="p">(</span><span class="n">energy_lcc</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.0f}</span><span class="s1">&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
</style><table id="T_f611c_" ><thead>    <tr>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank level0" ></th>        <th class="col_heading level0 col0" >Energy LCC</th>    </tr>    <tr>        <th class="index_name level0" >Housing type</th>        <th class="index_name level1" >Occupancy status</th>        <th class="index_name level2" >Income class</th>        <th class="index_name level3" >Heating energy</th>        <th class="index_name level4" >Energy performance</th>        <th class="index_name level5" >Income class owner</th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_f611c_level0_row0" class="row_heading level0 row0" rowspan="5">Multi-family</th>
                        <th id="T_f611c_level1_row0" class="row_heading level1 row0" rowspan="5">Homeowners</th>
                        <th id="T_f611c_level2_row0" class="row_heading level2 row0" rowspan="5">D1</th>
                        <th id="T_f611c_level3_row0" class="row_heading level3 row0" rowspan="5">Natural gas</th>
                        <th id="T_f611c_level4_row0" class="row_heading level4 row0" >A</th>
                        <th id="T_f611c_level5_row0" class="row_heading level5 row0" >D1</th>
                        <td id="T_f611c_row0_col0" class="data row0 col0" >10</td>
            </tr>
            <tr>
                                                        <th id="T_f611c_level4_row1" class="row_heading level4 row1" >B</th>
                        <th id="T_f611c_level5_row1" class="row_heading level5 row1" >D1</th>
                        <td id="T_f611c_row1_col0" class="data row1 col0" >13</td>
            </tr>
            <tr>
                                                        <th id="T_f611c_level4_row2" class="row_heading level4 row2" >C</th>
                        <th id="T_f611c_level5_row2" class="row_heading level5 row2" >D1</th>
                        <td id="T_f611c_row2_col0" class="data row2 col0" >21</td>
            </tr>
            <tr>
                                                        <th id="T_f611c_level4_row3" class="row_heading level4 row3" >D</th>
                        <th id="T_f611c_level5_row3" class="row_heading level5 row3" >D1</th>
                        <td id="T_f611c_row3_col0" class="data row3 col0" >32</td>
            </tr>
            <tr>
                                                        <th id="T_f611c_level4_row4" class="row_heading level4 row4" >E</th>
                        <th id="T_f611c_level5_row4" class="row_heading level5 row4" >D1</th>
                        <td id="T_f611c_row4_col0" class="data row4 col0" >50</td>
            </tr>
    </tbody></table></div>
</div>
</section>
<section id="Transition-life-cycle-cost">
<h3>Transition life-cycle cost<a class="headerlink" href="#Transition-life-cycle-cost" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">help</span><span class="p">(</span><span class="n">buildings</span><span class="o">.</span><span class="n">to_lcc_final</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Help on method to_lcc_final in module project.buildings:

to_lcc_final(energy_prices, cost_invest=None, cost_intangible=None, transition=None, consumption=&#39;conventional&#39;, policies=None) method of project.buildings.HousingStock instance
    Calculate life-cycle-cost of home-energy retrofits for every segment and every possible transition.

    Parameters
    ----------
    energy_prices: pd.DataFrame
        index are heating energy and columns are years.
    cost_invest: dict, optional
        keys are transition (cost_invest[&#39;Energy performance&#39;]) and item are pd.DataFrame
    cost_intangible: dict, optional
        keys are transition (cost_intangible[&#39;Energy performance&#39;]) and item are pd.DataFrame
    consumption: {&#39;conventional&#39;, &#39;actual&#39;}, default &#39;conventional
    transition: {[&#39;Energy performance&#39;], [&#39;Heating energy&#39;], [&#39;Energy performance&#39;, &#39;Heating energy&#39;]}, default [&#39;Energy performance&#39;]
        define transition. Transition can be defined as label transition, energy transition, or label-energy transition.
    policies: list, optional
        list of Policies object

    Returns
    -------
    pd.DataFrame
        life-cycle-cost DataFrame is structured for every initial state (index) to every final state defined by transition (columns).

</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">lcc_final</span> <span class="o">=</span> <span class="n">buildings</span><span class="o">.</span><span class="n">to_lcc_final</span><span class="p">(</span><span class="n">energy_price</span><span class="p">,</span> <span class="n">cost_invest</span><span class="o">=</span><span class="n">cost_invest</span><span class="p">,</span> <span class="n">cost_intangible</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                                   <span class="n">transition</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Energy performance&#39;</span><span class="p">],</span> <span class="n">consumption</span><span class="o">=</span><span class="s1">&#39;conventional&#39;</span><span class="p">,</span> <span class="n">policies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">lcc_final</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.0f}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">))</span>

<span class="n">lcc_final</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Data grouped by Energy performance initial:&#39;</span><span class="p">)</span>
<span class="n">lcc_final</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Energy performance&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
</style><table id="T_af6bb_" ><thead>    <tr>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="index_name level0" >Energy performance final</th>        <th class="col_heading level0 col0" >G</th>        <th class="col_heading level0 col1" >F</th>        <th class="col_heading level0 col2" >E</th>        <th class="col_heading level0 col3" >D</th>        <th class="col_heading level0 col4" >C</th>        <th class="col_heading level0 col5" >B</th>        <th class="col_heading level0 col6" >A</th>    </tr>    <tr>        <th class="index_name level0" >Housing type</th>        <th class="index_name level1" >Occupancy status</th>        <th class="index_name level2" >Income class</th>        <th class="index_name level3" >Heating energy</th>        <th class="index_name level4" >Energy performance</th>        <th class="index_name level5" >Income class owner</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_af6bb_level0_row0" class="row_heading level0 row0" rowspan="5">Single-family</th>
                        <th id="T_af6bb_level1_row0" class="row_heading level1 row0" rowspan="5">Social-housing</th>
                        <th id="T_af6bb_level2_row0" class="row_heading level2 row0" rowspan="5">D9</th>
                        <th id="T_af6bb_level3_row0" class="row_heading level3 row0" rowspan="5">Wood fuel</th>
                        <th id="T_af6bb_level4_row0" class="row_heading level4 row0" >C</th>
                        <th id="T_af6bb_level5_row0" class="row_heading level5 row0" >D10</th>
                        <td id="T_af6bb_row0_col0" class="data row0 col0" >-</td>
                        <td id="T_af6bb_row0_col1" class="data row0 col1" >-</td>
                        <td id="T_af6bb_row0_col2" class="data row0 col2" >-</td>
                        <td id="T_af6bb_row0_col3" class="data row0 col3" >-</td>
                        <td id="T_af6bb_row0_col4" class="data row0 col4" >-</td>
                        <td id="T_af6bb_row0_col5" class="data row0 col5" >160</td>
                        <td id="T_af6bb_row0_col6" class="data row0 col6" >254</td>
            </tr>
            <tr>
                                                        <th id="T_af6bb_level4_row1" class="row_heading level4 row1" >D</th>
                        <th id="T_af6bb_level5_row1" class="row_heading level5 row1" >D10</th>
                        <td id="T_af6bb_row1_col0" class="data row1 col0" >-</td>
                        <td id="T_af6bb_row1_col1" class="data row1 col1" >-</td>
                        <td id="T_af6bb_row1_col2" class="data row1 col2" >-</td>
                        <td id="T_af6bb_row1_col3" class="data row1 col3" >-</td>
                        <td id="T_af6bb_row1_col4" class="data row1 col4" >179</td>
                        <td id="T_af6bb_row1_col5" class="data row1 col5" >238</td>
                        <td id="T_af6bb_row1_col6" class="data row1 col6" >329</td>
            </tr>
            <tr>
                                                        <th id="T_af6bb_level4_row2" class="row_heading level4 row2" >E</th>
                        <th id="T_af6bb_level5_row2" class="row_heading level5 row2" >D10</th>
                        <td id="T_af6bb_row2_col0" class="data row2 col0" >-</td>
                        <td id="T_af6bb_row2_col1" class="data row2 col1" >-</td>
                        <td id="T_af6bb_row2_col2" class="data row2 col2" >-</td>
                        <td id="T_af6bb_row2_col3" class="data row2 col3" >225</td>
                        <td id="T_af6bb_row2_col4" class="data row2 col4" >249</td>
                        <td id="T_af6bb_row2_col5" class="data row2 col5" >305</td>
                        <td id="T_af6bb_row2_col6" class="data row2 col6" >392</td>
            </tr>
            <tr>
                                                        <th id="T_af6bb_level4_row3" class="row_heading level4 row3" >F</th>
                        <th id="T_af6bb_level5_row3" class="row_heading level5 row3" >D10</th>
                        <td id="T_af6bb_row3_col0" class="data row3 col0" >-</td>
                        <td id="T_af6bb_row3_col1" class="data row3 col1" >-</td>
                        <td id="T_af6bb_row3_col2" class="data row3 col2" >297</td>
                        <td id="T_af6bb_row3_col3" class="data row3 col3" >287</td>
                        <td id="T_af6bb_row3_col4" class="data row3 col4" >309</td>
                        <td id="T_af6bb_row3_col5" class="data row3 col5" >362</td>
                        <td id="T_af6bb_row3_col6" class="data row3 col6" >445</td>
            </tr>
            <tr>
                                                        <th id="T_af6bb_level4_row4" class="row_heading level4 row4" >G</th>
                        <th id="T_af6bb_level5_row4" class="row_heading level5 row4" >D10</th>
                        <td id="T_af6bb_row4_col0" class="data row4 col0" >-</td>
                        <td id="T_af6bb_row4_col1" class="data row4 col1" >424</td>
                        <td id="T_af6bb_row4_col2" class="data row4 col2" >373</td>
                        <td id="T_af6bb_row4_col3" class="data row4 col3" >361</td>
                        <td id="T_af6bb_row4_col4" class="data row4 col4" >379</td>
                        <td id="T_af6bb_row4_col5" class="data row4 col5" >428</td>
                        <td id="T_af6bb_row4_col6" class="data row4 col6" >508</td>
            </tr>
    </tbody></table></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Data grouped by Energy performance initial:
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Energy performance final</th>
      <th>G</th>
      <th>F</th>
      <th>E</th>
      <th>D</th>
      <th>C</th>
      <th>B</th>
      <th>A</th>
    </tr>
    <tr>
      <th>Energy performance</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>B</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>128.734990</td>
    </tr>
    <tr>
      <th>C</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>115.780906</td>
      <td>221.468639</td>
    </tr>
    <tr>
      <th>D</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>111.304517</td>
      <td>194.563845</td>
      <td>296.310345</td>
    </tr>
    <tr>
      <th>E</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>118.426355</td>
      <td>181.183190</td>
      <td>261.043466</td>
      <td>359.036412</td>
    </tr>
    <tr>
      <th>F</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>135.002242</td>
      <td>181.340099</td>
      <td>241.135797</td>
      <td>317.742992</td>
      <td>412.128355</td>
    </tr>
    <tr>
      <th>G</th>
      <td>NaN</td>
      <td>182.584127</td>
      <td>211.345370</td>
      <td>254.638677</td>
      <td>311.202148</td>
      <td>384.285172</td>
      <td>474.791862</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">lcc_final</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Energy performance&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">subplots</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">12.8</span><span class="p">,</span> <span class="mf">9.6</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
B         AxesSubplot(0.1,0.679412;0.363636x0.220588)
C    AxesSubplot(0.536364,0.679412;0.363636x0.220588)
D         AxesSubplot(0.1,0.414706;0.363636x0.220588)
E    AxesSubplot(0.536364,0.414706;0.363636x0.220588)
F             AxesSubplot(0.1,0.15;0.363636x0.220588)
G        AxesSubplot(0.536364,0.15;0.363636x0.220588)
dtype: object
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorials_48_1.png" src="_images/tutorials_48_1.png" />
</div>
</div>
</section>
</section>
<section id="Discrete-choice-model:-Market-share">
<h2>Discrete choice model: Market share<a class="headerlink" href="#Discrete-choice-model:-Market-share" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">help</span><span class="p">(</span><span class="n">buildings</span><span class="o">.</span><span class="n">to_market_share</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Help on method to_market_share in module project.buildings:

to_market_share(energy_prices, transition=None, consumption=&#39;conventional&#39;, cost_invest=None, cost_intangible=None, policies=None, nu=8.0) method of project.buildings.HousingStock instance
    Returns market share for each segment and each possible final state.

    Parameter nu characterizing the heterogeneity of preferences is set to 8 in the model.
    Intangible costs are calibrated so that the observed market shares are reproduced in the initial year.

    Parameters
    ----------
    energy_prices: pd.DataFrame
    cost_invest: dict, optional
    cost_intangible: dict, optional
    consumption: {&#39;conventional&#39;, &#39;actual&#39;}, default &#39;conventional
    transition: {[&#39;Energy performance&#39;], [&#39;Heating energy&#39;], [&#39;Energy performance&#39;, &#39;Heating energy&#39;]},
        default [&#39;Energy performance&#39;]
    policies: list, optional
        list of Policies object
    nu: float or int, default 8.0

    Returns
    -------
    pd.DataFrame
        market_share, lcc_final

</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">market_share</span><span class="p">,</span> <span class="n">lcc_final</span> <span class="o">=</span> <span class="n">buildings</span><span class="o">.</span><span class="n">to_market_share</span><span class="p">(</span><span class="n">energy_price</span><span class="p">,</span> <span class="n">transition</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Energy performance&#39;</span><span class="p">],</span> <span class="n">consumption</span><span class="o">=</span><span class="s1">&#39;conventional&#39;</span><span class="p">,</span> <span class="n">cost_invest</span><span class="o">=</span><span class="n">cost_invest</span><span class="p">,</span>
                                                    <span class="n">cost_intangible</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">policies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nu</span><span class="o">=</span><span class="mf">8.0</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">market_share</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.1%}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Data grouped by Energy performance initial:&#39;</span><span class="p">)</span>
<span class="n">market_share</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Energy performance&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.1%}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
</style><table id="T_ee423_" ><thead>    <tr>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="index_name level0" >Energy performance final</th>        <th class="col_heading level0 col0" >G</th>        <th class="col_heading level0 col1" >F</th>        <th class="col_heading level0 col2" >E</th>        <th class="col_heading level0 col3" >D</th>        <th class="col_heading level0 col4" >C</th>        <th class="col_heading level0 col5" >B</th>        <th class="col_heading level0 col6" >A</th>    </tr>    <tr>        <th class="index_name level0" >Housing type</th>        <th class="index_name level1" >Occupancy status</th>        <th class="index_name level2" >Income class</th>        <th class="index_name level3" >Heating energy</th>        <th class="index_name level4" >Energy performance</th>        <th class="index_name level5" >Income class owner</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_ee423_level0_row0" class="row_heading level0 row0" rowspan="5">Single-family</th>
                        <th id="T_ee423_level1_row0" class="row_heading level1 row0" rowspan="5">Social-housing</th>
                        <th id="T_ee423_level2_row0" class="row_heading level2 row0" rowspan="5">D9</th>
                        <th id="T_ee423_level3_row0" class="row_heading level3 row0" rowspan="5">Wood fuel</th>
                        <th id="T_ee423_level4_row0" class="row_heading level4 row0" >C</th>
                        <th id="T_ee423_level5_row0" class="row_heading level5 row0" >D10</th>
                        <td id="T_ee423_row0_col0" class="data row0 col0" >-</td>
                        <td id="T_ee423_row0_col1" class="data row0 col1" >-</td>
                        <td id="T_ee423_row0_col2" class="data row0 col2" >-</td>
                        <td id="T_ee423_row0_col3" class="data row0 col3" >-</td>
                        <td id="T_ee423_row0_col4" class="data row0 col4" >-</td>
                        <td id="T_ee423_row0_col5" class="data row0 col5" >97.6%</td>
                        <td id="T_ee423_row0_col6" class="data row0 col6" >2.4%</td>
            </tr>
            <tr>
                                                        <th id="T_ee423_level4_row1" class="row_heading level4 row1" >D</th>
                        <th id="T_ee423_level5_row1" class="row_heading level5 row1" >D10</th>
                        <td id="T_ee423_row1_col0" class="data row1 col0" >-</td>
                        <td id="T_ee423_row1_col1" class="data row1 col1" >-</td>
                        <td id="T_ee423_row1_col2" class="data row1 col2" >-</td>
                        <td id="T_ee423_row1_col3" class="data row1 col3" >-</td>
                        <td id="T_ee423_row1_col4" class="data row1 col4" >90.3%</td>
                        <td id="T_ee423_row1_col5" class="data row1 col5" >9.0%</td>
                        <td id="T_ee423_row1_col6" class="data row1 col6" >0.7%</td>
            </tr>
            <tr>
                                                        <th id="T_ee423_level4_row2" class="row_heading level4 row2" >E</th>
                        <th id="T_ee423_level5_row2" class="row_heading level5 row2" >D10</th>
                        <td id="T_ee423_row2_col0" class="data row2 col0" >-</td>
                        <td id="T_ee423_row2_col1" class="data row2 col1" >-</td>
                        <td id="T_ee423_row2_col2" class="data row2 col2" >-</td>
                        <td id="T_ee423_row2_col3" class="data row2 col3" >65.0%</td>
                        <td id="T_ee423_row2_col4" class="data row2 col4" >28.6%</td>
                        <td id="T_ee423_row2_col5" class="data row2 col5" >5.6%</td>
                        <td id="T_ee423_row2_col6" class="data row2 col6" >0.8%</td>
            </tr>
            <tr>
                                                        <th id="T_ee423_level4_row3" class="row_heading level4 row3" >F</th>
                        <th id="T_ee423_level5_row3" class="row_heading level5 row3" >D10</th>
                        <td id="T_ee423_row3_col0" class="data row3 col0" >-</td>
                        <td id="T_ee423_row3_col1" class="data row3 col1" >-</td>
                        <td id="T_ee423_row3_col2" class="data row3 col2" >30.6%</td>
                        <td id="T_ee423_row3_col3" class="data row3 col3" >39.6%</td>
                        <td id="T_ee423_row3_col4" class="data row3 col4" >22.4%</td>
                        <td id="T_ee423_row3_col5" class="data row3 col5" >6.3%</td>
                        <td id="T_ee423_row3_col6" class="data row3 col6" >1.2%</td>
            </tr>
            <tr>
                                                        <th id="T_ee423_level4_row4" class="row_heading level4 row4" >G</th>
                        <th id="T_ee423_level5_row4" class="row_heading level5 row4" >D10</th>
                        <td id="T_ee423_row4_col0" class="data row4 col0" >-</td>
                        <td id="T_ee423_row4_col1" class="data row4 col1" >9.1%</td>
                        <td id="T_ee423_row4_col2" class="data row4 col2" >25.1%</td>
                        <td id="T_ee423_row4_col3" class="data row4 col3" >33.0%</td>
                        <td id="T_ee423_row4_col4" class="data row4 col4" >22.3%</td>
                        <td id="T_ee423_row4_col5" class="data row4 col5" >8.4%</td>
                        <td id="T_ee423_row4_col6" class="data row4 col6" >2.1%</td>
            </tr>
    </tbody></table></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Data grouped by Energy performance initial:
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
</style><table id="T_b673d_" ><thead>    <tr>        <th class="index_name level0" >Energy performance final</th>        <th class="col_heading level0 col0" >G</th>        <th class="col_heading level0 col1" >F</th>        <th class="col_heading level0 col2" >E</th>        <th class="col_heading level0 col3" >D</th>        <th class="col_heading level0 col4" >C</th>        <th class="col_heading level0 col5" >B</th>        <th class="col_heading level0 col6" >A</th>    </tr>    <tr>        <th class="index_name level0" >Energy performance</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_b673d_level0_row0" class="row_heading level0 row0" >A</th>
                        <td id="T_b673d_row0_col0" class="data row0 col0" >-</td>
                        <td id="T_b673d_row0_col1" class="data row0 col1" >-</td>
                        <td id="T_b673d_row0_col2" class="data row0 col2" >-</td>
                        <td id="T_b673d_row0_col3" class="data row0 col3" >-</td>
                        <td id="T_b673d_row0_col4" class="data row0 col4" >-</td>
                        <td id="T_b673d_row0_col5" class="data row0 col5" >-</td>
                        <td id="T_b673d_row0_col6" class="data row0 col6" >-</td>
            </tr>
            <tr>
                        <th id="T_b673d_level0_row1" class="row_heading level0 row1" >B</th>
                        <td id="T_b673d_row1_col0" class="data row1 col0" >-</td>
                        <td id="T_b673d_row1_col1" class="data row1 col1" >-</td>
                        <td id="T_b673d_row1_col2" class="data row1 col2" >-</td>
                        <td id="T_b673d_row1_col3" class="data row1 col3" >-</td>
                        <td id="T_b673d_row1_col4" class="data row1 col4" >-</td>
                        <td id="T_b673d_row1_col5" class="data row1 col5" >-</td>
                        <td id="T_b673d_row1_col6" class="data row1 col6" >100.0%</td>
            </tr>
            <tr>
                        <th id="T_b673d_level0_row2" class="row_heading level0 row2" >C</th>
                        <td id="T_b673d_row2_col0" class="data row2 col0" >-</td>
                        <td id="T_b673d_row2_col1" class="data row2 col1" >-</td>
                        <td id="T_b673d_row2_col2" class="data row2 col2" >-</td>
                        <td id="T_b673d_row2_col3" class="data row2 col3" >-</td>
                        <td id="T_b673d_row2_col4" class="data row2 col4" >-</td>
                        <td id="T_b673d_row2_col5" class="data row2 col5" >99.3%</td>
                        <td id="T_b673d_row2_col6" class="data row2 col6" >0.7%</td>
            </tr>
            <tr>
                        <th id="T_b673d_level0_row3" class="row_heading level0 row3" >D</th>
                        <td id="T_b673d_row3_col0" class="data row3 col0" >-</td>
                        <td id="T_b673d_row3_col1" class="data row3 col1" >-</td>
                        <td id="T_b673d_row3_col2" class="data row3 col2" >-</td>
                        <td id="T_b673d_row3_col3" class="data row3 col3" >-</td>
                        <td id="T_b673d_row3_col4" class="data row3 col4" >97.8%</td>
                        <td id="T_b673d_row3_col5" class="data row3 col5" >2.1%</td>
                        <td id="T_b673d_row3_col6" class="data row3 col6" >0.2%</td>
            </tr>
            <tr>
                        <th id="T_b673d_level0_row4" class="row_heading level0 row4" >E</th>
                        <td id="T_b673d_row4_col0" class="data row4 col0" >-</td>
                        <td id="T_b673d_row4_col1" class="data row4 col1" >-</td>
                        <td id="T_b673d_row4_col2" class="data row4 col2" >-</td>
                        <td id="T_b673d_row4_col3" class="data row4 col3" >93.3%</td>
                        <td id="T_b673d_row4_col4" class="data row4 col4" >5.5%</td>
                        <td id="T_b673d_row4_col5" class="data row4 col5" >1.1%</td>
                        <td id="T_b673d_row4_col6" class="data row4 col6" >0.2%</td>
            </tr>
            <tr>
                        <th id="T_b673d_level0_row5" class="row_heading level0 row5" >F</th>
                        <td id="T_b673d_row5_col0" class="data row5 col0" >-</td>
                        <td id="T_b673d_row5_col1" class="data row5 col1" >-</td>
                        <td id="T_b673d_row5_col2" class="data row5 col2" >87.0%</td>
                        <td id="T_b673d_row5_col3" class="data row5 col3" >8.0%</td>
                        <td id="T_b673d_row5_col4" class="data row5 col4" >3.5%</td>
                        <td id="T_b673d_row5_col5" class="data row5 col5" >1.1%</td>
                        <td id="T_b673d_row5_col6" class="data row5 col6" >0.2%</td>
            </tr>
            <tr>
                        <th id="T_b673d_level0_row6" class="row_heading level0 row6" >G</th>
                        <td id="T_b673d_row6_col0" class="data row6 col0" >-</td>
                        <td id="T_b673d_row6_col1" class="data row6 col1" >76.8%</td>
                        <td id="T_b673d_row6_col2" class="data row6 col2" >12.3%</td>
                        <td id="T_b673d_row6_col3" class="data row6 col3" >5.6%</td>
                        <td id="T_b673d_row6_col4" class="data row6 col4" >3.5%</td>
                        <td id="T_b673d_row6_col5" class="data row6 col5" >1.4%</td>
                        <td id="T_b673d_row6_col6" class="data row6 col6" >0.4%</td>
            </tr>
    </tbody></table></div>
</div>
<p>Market share need to be calibrated in order to match observed data.</p>
</section>
<section id="Calibration">
<h2>Calibration<a class="headerlink" href="#Calibration" title="Permalink to this headline">¶</a></h2>
<section id="Market-share-observed-–&gt;-Cost-intangible">
<h3>Market share observed –&gt; Cost intangible<a class="headerlink" href="#Market-share-observed-–>-Cost-intangible" title="Permalink to this headline">¶</a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">help</span><span class="p">(</span><span class="n">buildings</span><span class="o">.</span><span class="n">calibration_market_share</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Help on method calibration_market_share in module project.buildings:

calibration_market_share(energy_prices, market_share_objective, folder_output=None, cost_invest=None, consumption=&#39;conventional&#39;, policies=None) method of project.buildings.HousingStock instance
    Returns intangible costs by calibrating market_share.

    Intangible costs are calibrated so that the observed market shares are reproduced in the initial year.
    Intangible costs are calibrated so that the life-cycle cost model, fed with the investment costs,
    matches the observed market shares.

    For each segment:
    LCC final is calculated (depends on Occupancy status, Housing type, Income class owner,
    Energy performance initial, Heating energy initial, transition), then Market Share.
    transition here is Energy performance
    NB: MS doesn&#39;t depend on Income class (tenant), so to fasten the function it can be first removed.
    Solver finds Intangible cost for each segment to match the observed market share.
    --&gt; Intangible cost(Occupancy status, Housing type, Income class owner, Energy performance initial,
    Heating energy initial, Energy performance final)

    NB: Observed market share only depends on Energy performance initial and Energy performance final.
    Each segment with the same performance transition need to match the same observed market shares.


    Parameters:
    -----------
    energy_prices: pd.DataFrame
    market_share_objective: pd.DataFrame
        observed market share to match
    folder_output: str, optional
        if not None, will dump cost_intangible in .pkl file
    cost_invest: pd.DataFrame, optional
    consumption: {&#39;conventional&#39;, &#39;actual&#39;}, default &#39;conventional&#39;
    policies: list, optional
        policies to consider in the market share

    Returns:
    --------
    pd.DataFrame
        Intangible cost,

</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Market share observed:&#39;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">ms_renovation_ini</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{:.0%}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Market share observed:
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
</style><table id="T_6b119_" ><thead>    <tr>        <th class="blank level0" ></th>        <th class="col_heading level0 col0" >G</th>        <th class="col_heading level0 col1" >F</th>        <th class="col_heading level0 col2" >E</th>        <th class="col_heading level0 col3" >D</th>        <th class="col_heading level0 col4" >C</th>        <th class="col_heading level0 col5" >B</th>        <th class="col_heading level0 col6" >A</th>    </tr>    <tr>        <th class="index_name level0" >Energy performance</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_6b119_level0_row0" class="row_heading level0 row0" >G</th>
                        <td id="T_6b119_row0_col0" class="data row0 col0" >-</td>
                        <td id="T_6b119_row0_col1" class="data row0 col1" >25%</td>
                        <td id="T_6b119_row0_col2" class="data row0 col2" >27%</td>
                        <td id="T_6b119_row0_col3" class="data row0 col3" >27%</td>
                        <td id="T_6b119_row0_col4" class="data row0 col4" >21%</td>
                        <td id="T_6b119_row0_col5" class="data row0 col5" >0%</td>
                        <td id="T_6b119_row0_col6" class="data row0 col6" >0%</td>
            </tr>
            <tr>
                        <th id="T_6b119_level0_row1" class="row_heading level0 row1" >F</th>
                        <td id="T_6b119_row1_col0" class="data row1 col0" >-</td>
                        <td id="T_6b119_row1_col1" class="data row1 col1" >-</td>
                        <td id="T_6b119_row1_col2" class="data row1 col2" >40%</td>
                        <td id="T_6b119_row1_col3" class="data row1 col3" >26%</td>
                        <td id="T_6b119_row1_col4" class="data row1 col4" >31%</td>
                        <td id="T_6b119_row1_col5" class="data row1 col5" >2%</td>
                        <td id="T_6b119_row1_col6" class="data row1 col6" >0%</td>
            </tr>
            <tr>
                        <th id="T_6b119_level0_row2" class="row_heading level0 row2" >E</th>
                        <td id="T_6b119_row2_col0" class="data row2 col0" >-</td>
                        <td id="T_6b119_row2_col1" class="data row2 col1" >-</td>
                        <td id="T_6b119_row2_col2" class="data row2 col2" >-</td>
                        <td id="T_6b119_row2_col3" class="data row2 col3" >66%</td>
                        <td id="T_6b119_row2_col4" class="data row2 col4" >28%</td>
                        <td id="T_6b119_row2_col5" class="data row2 col5" >6%</td>
                        <td id="T_6b119_row2_col6" class="data row2 col6" >0%</td>
            </tr>
            <tr>
                        <th id="T_6b119_level0_row3" class="row_heading level0 row3" >D</th>
                        <td id="T_6b119_row3_col0" class="data row3 col0" >-</td>
                        <td id="T_6b119_row3_col1" class="data row3 col1" >-</td>
                        <td id="T_6b119_row3_col2" class="data row3 col2" >-</td>
                        <td id="T_6b119_row3_col3" class="data row3 col3" >-</td>
                        <td id="T_6b119_row3_col4" class="data row3 col4" >95%</td>
                        <td id="T_6b119_row3_col5" class="data row3 col5" >5%</td>
                        <td id="T_6b119_row3_col6" class="data row3 col6" >0%</td>
            </tr>
            <tr>
                        <th id="T_6b119_level0_row4" class="row_heading level0 row4" >C</th>
                        <td id="T_6b119_row4_col0" class="data row4 col0" >-</td>
                        <td id="T_6b119_row4_col1" class="data row4 col1" >-</td>
                        <td id="T_6b119_row4_col2" class="data row4 col2" >-</td>
                        <td id="T_6b119_row4_col3" class="data row4 col3" >-</td>
                        <td id="T_6b119_row4_col4" class="data row4 col4" >-</td>
                        <td id="T_6b119_row4_col5" class="data row4 col5" >91%</td>
                        <td id="T_6b119_row4_col6" class="data row4 col6" >9%</td>
            </tr>
            <tr>
                        <th id="T_6b119_level0_row5" class="row_heading level0 row5" >B</th>
                        <td id="T_6b119_row5_col0" class="data row5 col0" >-</td>
                        <td id="T_6b119_row5_col1" class="data row5 col1" >-</td>
                        <td id="T_6b119_row5_col2" class="data row5 col2" >-</td>
                        <td id="T_6b119_row5_col3" class="data row5 col3" >-</td>
                        <td id="T_6b119_row5_col4" class="data row5 col4" >-</td>
                        <td id="T_6b119_row5_col5" class="data row5 col5" >-</td>
                        <td id="T_6b119_row5_col6" class="data row5 col6" >100%</td>
            </tr>
            <tr>
                        <th id="T_6b119_level0_row6" class="row_heading level0 row6" >A</th>
                        <td id="T_6b119_row6_col0" class="data row6 col0" >-</td>
                        <td id="T_6b119_row6_col1" class="data row6 col1" >-</td>
                        <td id="T_6b119_row6_col2" class="data row6 col2" >-</td>
                        <td id="T_6b119_row6_col3" class="data row6 col3" >-</td>
                        <td id="T_6b119_row6_col4" class="data row6 col4" >-</td>
                        <td id="T_6b119_row6_col5" class="data row6 col5" >-</td>
                        <td id="T_6b119_row6_col6" class="data row6 col6" >-</td>
            </tr>
    </tbody></table></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">cost_intangible</span> <span class="o">=</span> <span class="n">buildings</span><span class="o">.</span><span class="n">calibration_market_share</span><span class="p">(</span><span class="n">energy_price</span><span class="p">,</span> <span class="n">ms_renovation_ini</span><span class="p">,</span>
                                                     <span class="n">cost_invest</span><span class="o">=</span><span class="n">cost_invest</span><span class="p">,</span>
                                                     <span class="n">consumption</span><span class="o">=</span><span class="s1">&#39;conventional&#39;</span><span class="p">,</span>
                                                     <span class="n">policies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Calibration took </span><span class="si">{:.0f}</span><span class="s1">s&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Calibration took 55s
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">display</span><span class="p">(</span><span class="n">cost_intangible</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Data grouped by Energy performance initial:&#39;</span><span class="p">)</span>
<span class="n">cost_intangible_mean</span> <span class="o">=</span> <span class="n">cost_intangible</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Energy performance&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">cost_intangible_mean</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:,.1f}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cost intangible / Cost investment&#39;</span><span class="p">)</span>
<span class="p">(</span><span class="n">cost_intangible_mean</span> <span class="o">/</span> <span class="n">cost_invest</span><span class="p">[</span><span class="s1">&#39;Energy performance&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">performance_order</span><span class="p">,</span> <span class="n">performance_order</span><span class="p">]</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{:.0%}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
</style><table id="T_eb4fe_" ><thead>    <tr>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="index_name level0" >Energy performance final</th>        <th class="col_heading level0 col0" >B</th>        <th class="col_heading level0 col1" >A</th>        <th class="col_heading level0 col2" >C</th>        <th class="col_heading level0 col3" >D</th>        <th class="col_heading level0 col4" >E</th>        <th class="col_heading level0 col5" >F</th>    </tr>    <tr>        <th class="index_name level0" >Income class</th>        <th class="index_name level1" >Housing type</th>        <th class="index_name level2" >Occupancy status</th>        <th class="index_name level3" >Heating energy</th>        <th class="index_name level4" >Energy performance</th>        <th class="index_name level5" >Income class owner</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_eb4fe_level0_row0" class="row_heading level0 row0" rowspan="5">D1</th>
                        <th id="T_eb4fe_level1_row0" class="row_heading level1 row0" rowspan="5">Multi-family</th>
                        <th id="T_eb4fe_level2_row0" class="row_heading level2 row0" rowspan="5">Homeowners</th>
                        <th id="T_eb4fe_level3_row0" class="row_heading level3 row0" rowspan="5">Natural gas</th>
                        <th id="T_eb4fe_level4_row0" class="row_heading level4 row0" >C</th>
                        <th id="T_eb4fe_level5_row0" class="row_heading level5 row0" >D1</th>
                        <td id="T_eb4fe_row0_col0" class="data row0 col0" >27.1</td>
                        <td id="T_eb4fe_row0_col1" class="data row0 col1" >1.5</td>
                        <td id="T_eb4fe_row0_col2" class="data row0 col2" >-</td>
                        <td id="T_eb4fe_row0_col3" class="data row0 col3" >-</td>
                        <td id="T_eb4fe_row0_col4" class="data row0 col4" >-</td>
                        <td id="T_eb4fe_row0_col5" class="data row0 col5" >-</td>
            </tr>
            <tr>
                                                        <th id="T_eb4fe_level4_row1" class="row_heading level4 row1" >D</th>
                        <th id="T_eb4fe_level5_row1" class="row_heading level5 row1" >D1</th>
                        <td id="T_eb4fe_row1_col0" class="data row1 col0" >1.8</td>
                        <td id="T_eb4fe_row1_col1" class="data row1 col1" >80.5</td>
                        <td id="T_eb4fe_row1_col2" class="data row1 col2" >29.1</td>
                        <td id="T_eb4fe_row1_col3" class="data row1 col3" >-</td>
                        <td id="T_eb4fe_row1_col4" class="data row1 col4" >-</td>
                        <td id="T_eb4fe_row1_col5" class="data row1 col5" >-</td>
            </tr>
            <tr>
                                                        <th id="T_eb4fe_level4_row2" class="row_heading level4 row2" >E</th>
                        <th id="T_eb4fe_level5_row2" class="row_heading level5 row2" >D1</th>
                        <td id="T_eb4fe_row2_col0" class="data row2 col0" >0.2</td>
                        <td id="T_eb4fe_row2_col1" class="data row2 col1" >79.4</td>
                        <td id="T_eb4fe_row2_col2" class="data row2 col2" >0.1</td>
                        <td id="T_eb4fe_row2_col3" class="data row2 col3" >30.1</td>
                        <td id="T_eb4fe_row2_col4" class="data row2 col4" >-</td>
                        <td id="T_eb4fe_row2_col5" class="data row2 col5" >-</td>
            </tr>
            <tr>
                                                        <th id="T_eb4fe_level4_row3" class="row_heading level4 row3" >F</th>
                        <th id="T_eb4fe_level5_row3" class="row_heading level5 row3" >D1</th>
                        <td id="T_eb4fe_row3_col0" class="data row3 col0" >8.9</td>
                        <td id="T_eb4fe_row3_col1" class="data row3 col1" >105.2</td>
                        <td id="T_eb4fe_row3_col2" class="data row3 col2" >6.7</td>
                        <td id="T_eb4fe_row3_col3" class="data row3 col3" >1.8</td>
                        <td id="T_eb4fe_row3_col4" class="data row3 col4" >46.1</td>
                        <td id="T_eb4fe_row3_col5" class="data row3 col5" >-</td>
            </tr>
            <tr>
                                                        <th id="T_eb4fe_level4_row4" class="row_heading level4 row4" >G</th>
                        <th id="T_eb4fe_level5_row4" class="row_heading level5 row4" >D1</th>
                        <td id="T_eb4fe_row4_col0" class="data row4 col0" >85.6</td>
                        <td id="T_eb4fe_row4_col1" class="data row4 col1" >106.4</td>
                        <td id="T_eb4fe_row4_col2" class="data row4 col2" >0.8</td>
                        <td id="T_eb4fe_row4_col3" class="data row4 col3" >0.6</td>
                        <td id="T_eb4fe_row4_col4" class="data row4 col4" >24.6</td>
                        <td id="T_eb4fe_row4_col5" class="data row4 col5" >65.1</td>
            </tr>
    </tbody></table></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Data grouped by Energy performance initial:
</pre></div></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
</style><table id="T_c37d8_" ><thead>    <tr>        <th class="index_name level0" >Energy performance final</th>        <th class="col_heading level0 col0" >F</th>        <th class="col_heading level0 col1" >E</th>        <th class="col_heading level0 col2" >D</th>        <th class="col_heading level0 col3" >C</th>        <th class="col_heading level0 col4" >B</th>        <th class="col_heading level0 col5" >A</th>    </tr>    <tr>        <th class="index_name level0" >Energy performance</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_c37d8_level0_row0" class="row_heading level0 row0" >G</th>
                        <td id="T_c37d8_row0_col0" class="data row0 col0" >47.6</td>
                        <td id="T_c37d8_row0_col1" class="data row0 col1" >36.8</td>
                        <td id="T_c37d8_row0_col2" class="data row0 col2" >28.1</td>
                        <td id="T_c37d8_row0_col3" class="data row0 col3" >24.1</td>
                        <td id="T_c37d8_row0_col4" class="data row0 col4" >130.1</td>
                        <td id="T_c37d8_row0_col5" class="data row0 col5" >145.1</td>
            </tr>
            <tr>
                        <th id="T_c37d8_level0_row1" class="row_heading level0 row1" >F</th>
                        <td id="T_c37d8_row1_col0" class="data row1 col0" >-</td>
                        <td id="T_c37d8_row1_col1" class="data row1 col1" >37.8</td>
                        <td id="T_c37d8_row1_col2" class="data row1 col2" >20.8</td>
                        <td id="T_c37d8_row1_col3" class="data row1 col3" >11.0</td>
                        <td id="T_c37d8_row1_col4" class="data row1 col4" >40.8</td>
                        <td id="T_c37d8_row1_col5" class="data row1 col5" >117.2</td>
            </tr>
            <tr>
                        <th id="T_c37d8_level0_row2" class="row_heading level0 row2" >E</th>
                        <td id="T_c37d8_row2_col0" class="data row2 col0" >-</td>
                        <td id="T_c37d8_row2_col1" class="data row2 col1" >-</td>
                        <td id="T_c37d8_row2_col2" class="data row2 col2" >25.3</td>
                        <td id="T_c37d8_row2_col3" class="data row2 col3" >6.5</td>
                        <td id="T_c37d8_row2_col4" class="data row2 col4" >5.9</td>
                        <td id="T_c37d8_row2_col5" class="data row2 col5" >83.4</td>
            </tr>
            <tr>
                        <th id="T_c37d8_level0_row3" class="row_heading level0 row3" >D</th>
                        <td id="T_c37d8_row3_col0" class="data row3 col0" >-</td>
                        <td id="T_c37d8_row3_col1" class="data row3 col1" >-</td>
                        <td id="T_c37d8_row3_col2" class="data row3 col2" >-</td>
                        <td id="T_c37d8_row3_col3" class="data row3 col3" >18.7</td>
                        <td id="T_c37d8_row3_col4" class="data row3 col4" >8.2</td>
                        <td id="T_c37d8_row3_col5" class="data row3 col5" >68.8</td>
            </tr>
            <tr>
                        <th id="T_c37d8_level0_row4" class="row_heading level0 row4" >C</th>
                        <td id="T_c37d8_row4_col0" class="data row4 col0" >-</td>
                        <td id="T_c37d8_row4_col1" class="data row4 col1" >-</td>
                        <td id="T_c37d8_row4_col2" class="data row4 col2" >-</td>
                        <td id="T_c37d8_row4_col3" class="data row4 col3" >-</td>
                        <td id="T_c37d8_row4_col4" class="data row4 col4" >29.4</td>
                        <td id="T_c37d8_row4_col5" class="data row4 col5" >1.4</td>
            </tr>
    </tbody></table></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Cost intangible / Cost investment
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
</style><table id="T_6aeca_" ><thead>    <tr>        <th class="index_name level0" >Energy performance final</th>        <th class="col_heading level0 col0" >G</th>        <th class="col_heading level0 col1" >F</th>        <th class="col_heading level0 col2" >E</th>        <th class="col_heading level0 col3" >D</th>        <th class="col_heading level0 col4" >C</th>        <th class="col_heading level0 col5" >B</th>        <th class="col_heading level0 col6" >A</th>    </tr>    <tr>        <th class="index_name level0" >Energy performance</th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_6aeca_level0_row0" class="row_heading level0 row0" >G</th>
                        <td id="T_6aeca_row0_col0" class="data row0 col0" >-</td>
                        <td id="T_6aeca_row0_col1" class="data row0 col1" >60%</td>
                        <td id="T_6aeca_row0_col2" class="data row0 col2" >26%</td>
                        <td id="T_6aeca_row0_col3" class="data row0 col3" >13%</td>
                        <td id="T_6aeca_row0_col4" class="data row0 col4" >9%</td>
                        <td id="T_6aeca_row0_col5" class="data row0 col5" >36%</td>
                        <td id="T_6aeca_row0_col6" class="data row0 col6" >32%</td>
            </tr>
            <tr>
                        <th id="T_6aeca_level0_row1" class="row_heading level0 row1" >F</th>
                        <td id="T_6aeca_row1_col0" class="data row1 col0" >-</td>
                        <td id="T_6aeca_row1_col1" class="data row1 col1" >-</td>
                        <td id="T_6aeca_row1_col2" class="data row1 col2" >58%</td>
                        <td id="T_6aeca_row1_col3" class="data row1 col3" >15%</td>
                        <td id="T_6aeca_row1_col4" class="data row1 col4" >5%</td>
                        <td id="T_6aeca_row1_col5" class="data row1 col5" >14%</td>
                        <td id="T_6aeca_row1_col6" class="data row1 col6" >29%</td>
            </tr>
            <tr>
                        <th id="T_6aeca_level0_row2" class="row_heading level0 row2" >E</th>
                        <td id="T_6aeca_row2_col0" class="data row2 col0" >-</td>
                        <td id="T_6aeca_row2_col1" class="data row2 col1" >-</td>
                        <td id="T_6aeca_row2_col2" class="data row2 col2" >-</td>
                        <td id="T_6aeca_row2_col3" class="data row2 col3" >35%</td>
                        <td id="T_6aeca_row2_col4" class="data row2 col4" >4%</td>
                        <td id="T_6aeca_row2_col5" class="data row2 col5" >2%</td>
                        <td id="T_6aeca_row2_col6" class="data row2 col6" >24%</td>
            </tr>
            <tr>
                        <th id="T_6aeca_level0_row3" class="row_heading level0 row3" >D</th>
                        <td id="T_6aeca_row3_col0" class="data row3 col0" >-</td>
                        <td id="T_6aeca_row3_col1" class="data row3 col1" >-</td>
                        <td id="T_6aeca_row3_col2" class="data row3 col2" >-</td>
                        <td id="T_6aeca_row3_col3" class="data row3 col3" >-</td>
                        <td id="T_6aeca_row3_col4" class="data row3 col4" >23%</td>
                        <td id="T_6aeca_row3_col5" class="data row3 col5" >5%</td>
                        <td id="T_6aeca_row3_col6" class="data row3 col6" >24%</td>
            </tr>
            <tr>
                        <th id="T_6aeca_level0_row4" class="row_heading level0 row4" >C</th>
                        <td id="T_6aeca_row4_col0" class="data row4 col0" >-</td>
                        <td id="T_6aeca_row4_col1" class="data row4 col1" >-</td>
                        <td id="T_6aeca_row4_col2" class="data row4 col2" >-</td>
                        <td id="T_6aeca_row4_col3" class="data row4 col3" >-</td>
                        <td id="T_6aeca_row4_col4" class="data row4 col4" >-</td>
                        <td id="T_6aeca_row4_col5" class="data row4 col5" >30%</td>
                        <td id="T_6aeca_row4_col6" class="data row4 col6" >1%</td>
            </tr>
            <tr>
                        <th id="T_6aeca_level0_row5" class="row_heading level0 row5" >B</th>
                        <td id="T_6aeca_row5_col0" class="data row5 col0" >-</td>
                        <td id="T_6aeca_row5_col1" class="data row5 col1" >-</td>
                        <td id="T_6aeca_row5_col2" class="data row5 col2" >-</td>
                        <td id="T_6aeca_row5_col3" class="data row5 col3" >-</td>
                        <td id="T_6aeca_row5_col4" class="data row5 col4" >-</td>
                        <td id="T_6aeca_row5_col5" class="data row5 col5" >-</td>
                        <td id="T_6aeca_row5_col6" class="data row5 col6" >-</td>
            </tr>
            <tr>
                        <th id="T_6aeca_level0_row6" class="row_heading level0 row6" >A</th>
                        <td id="T_6aeca_row6_col0" class="data row6 col0" >-</td>
                        <td id="T_6aeca_row6_col1" class="data row6 col1" >-</td>
                        <td id="T_6aeca_row6_col2" class="data row6 col2" >-</td>
                        <td id="T_6aeca_row6_col3" class="data row6 col3" >-</td>
                        <td id="T_6aeca_row6_col4" class="data row6 col4" >-</td>
                        <td id="T_6aeca_row6_col5" class="data row6 col5" >-</td>
                        <td id="T_6aeca_row6_col6" class="data row6 col6" >-</td>
            </tr>
    </tbody></table></div>
</div>
<p>Which attributes impact most intangible cost?</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="n">cost_intangible</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">:</span>
    <span class="n">cost_intangible</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="p">)</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">subplots</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">12.8</span><span class="p">,</span> <span class="mf">9.6</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorials_60_0.png" src="_images/tutorials_60_0.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorials_60_1.png" src="_images/tutorials_60_1.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorials_60_2.png" src="_images/tutorials_60_2.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorials_60_3.png" src="_images/tutorials_60_3.png" />
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorials_60_4.png" src="_images/tutorials_60_4.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="_images/tutorials_60_5.png" src="_images/tutorials_60_5.png" />
</div>
</div>
<p>Graphically, Energy performance is where the dispersion is less important.</p>
</section>
</section>
<section id="Market-share-and-NPV">
<h2>Market share and NPV<a class="headerlink" href="#Market-share-and-NPV" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">help</span><span class="p">(</span><span class="n">buildings</span><span class="o">.</span><span class="n">to_market_share</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Help on method to_market_share in module project.buildings:

to_market_share(energy_prices, transition=None, consumption=&#39;conventional&#39;, cost_invest=None, cost_intangible=None, policies=None, nu=8.0) method of project.buildings.HousingStock instance
    Returns market share for each segment and each possible final state.

    Parameter nu characterizing the heterogeneity of preferences is set to 8 in the model.
    Intangible costs are calibrated so that the observed market shares are reproduced in the initial year.

    Parameters
    ----------
    energy_prices: pd.DataFrame
    cost_invest: dict, optional
    cost_intangible: dict, optional
    consumption: {&#39;conventional&#39;, &#39;actual&#39;}, default &#39;conventional
    transition: {[&#39;Energy performance&#39;], [&#39;Heating energy&#39;], [&#39;Energy performance&#39;, &#39;Heating energy&#39;]},
        default [&#39;Energy performance&#39;]
    policies: list, optional
        list of Policies object
    nu: float or int, default 8.0

    Returns
    -------
    pd.DataFrame
        market_share, lcc_final

</pre></div></div>
</div>
</section>
</section>
<section id="Stock-dynamics">
<h1>Stock dynamics<a class="headerlink" href="#Stock-dynamics" title="Permalink to this headline">¶</a></h1>
<div class="line-block">
<div class="line">An upgrade an initial label i is determined by its net present value (NPV), calculated as the sum of the life-cycle cost of the different options f∈{i+1,…,n}, weighted by their market share:</div>
</div>
<blockquote>
<div><div class="math notranslate nohighlight">
\[NPV_i=LCC_i - ∑_{f&gt;i} MS_{i,f} * LCC_{i,f}\]</div>
<p>The renovation rate <span class="math notranslate nohighlight">\(τ_i\)</span> of dwellings labelled i is then calculated as a logistic function of the NPV:</p>
<div class="math notranslate nohighlight">
\[τ_i = \frac{τ_{max}}{(1+(τ_{max}/τ_{min} -1) e^{-ρ(NPV_i-NPV_{min})}}\]</div>
<p>with:</p>
</div></blockquote>
<div class="line-block">
<div class="line">- <span class="math notranslate nohighlight">\(τ_{min}=0,001%\)</span>, - <span class="math notranslate nohighlight">\(NPV_{min}=-1,000€\)</span> - <span class="math notranslate nohighlight">\(τ_{max}=20%\)</span></div>
</div>
<div class="line-block">
<div class="line"><strong>TODO: add new calibration done by François</strong></div>
<div class="line">The logistic form captures heterogeneity in heating preference and habits, assuming they are normally distributed. Parameter ρ is calibrated, for each type of decision-maker and each initial label (i.e., 6x6=36 values), so that the NPVs calculated with the subsidies in effect in 2012 (see main article) reproduce the renovation rates described bellow.</div>
</div>
<section id="Specific-input">
<h2>Specific input<a class="headerlink" href="#Specific-input" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">rate_renovation_ini</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.2%}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
</style><table id="T_1e0a7_" ><thead>    <tr>        <th class="blank" ></th>        <th class="blank level0" ></th>        <th class="col_heading level0 col0" >Renovation rate</th>    </tr>    <tr>        <th class="index_name level0" >Occupancy status</th>        <th class="index_name level1" >Housing type</th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_1e0a7_level0_row0" class="row_heading level0 row0" rowspan="2">Homeowners</th>
                        <th id="T_1e0a7_level1_row0" class="row_heading level1 row0" >Single-family</th>
                        <td id="T_1e0a7_row0_col0" class="data row0 col0" >3.91%</td>
            </tr>
            <tr>
                                <th id="T_1e0a7_level1_row1" class="row_heading level1 row1" >Multi-family</th>
                        <td id="T_1e0a7_row1_col0" class="data row1 col0" >3.38%</td>
            </tr>
            <tr>
                        <th id="T_1e0a7_level0_row2" class="row_heading level0 row2" rowspan="2">Landlords</th>
                        <th id="T_1e0a7_level1_row2" class="row_heading level1 row2" >Single-family</th>
                        <td id="T_1e0a7_row2_col0" class="data row2 col0" >2.19%</td>
            </tr>
            <tr>
                                <th id="T_1e0a7_level1_row3" class="row_heading level1 row3" >Multi-family</th>
                        <td id="T_1e0a7_row3_col0" class="data row3 col0" >0.46%</td>
            </tr>
            <tr>
                        <th id="T_1e0a7_level0_row4" class="row_heading level0 row4" rowspan="2">Social-housing</th>
                        <th id="T_1e0a7_level1_row4" class="row_heading level1 row4" >Single-family</th>
                        <td id="T_1e0a7_row4_col0" class="data row4 col0" >2.87%</td>
            </tr>
            <tr>
                                <th id="T_1e0a7_level1_row5" class="row_heading level1 row5" >Multi-family</th>
                        <td id="T_1e0a7_row5_col0" class="data row5 col0" >1.80%</td>
            </tr>
    </tbody></table></div>
</div>
<div class="line-block">
<div class="line">Application:</div>
<div class="line"><strong>HousingStockRenovated</strong> is the class object to capture stocks dynamics: renovation and demolition.</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">buildings_dynamic</span> <span class="o">=</span> <span class="n">HousingStockRenovated</span><span class="p">(</span><span class="n">stock_ini_seg</span><span class="p">,</span> <span class="n">levels_dict</span><span class="p">,</span> <span class="mi">2018</span><span class="p">,</span>
                                          <span class="n">residual_rate</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span>
                                          <span class="n">destruction_rate</span><span class="o">=</span><span class="mf">0.0035</span><span class="p">,</span>
                                          <span class="n">rate_renovation_ini</span><span class="o">=</span><span class="n">rate_renovation_ini</span><span class="p">,</span>
                                          <span class="n">learning_year</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
                                          <span class="n">npv_min</span><span class="o">=-</span><span class="mi">1000</span><span class="p">,</span>
                                          <span class="n">rate_max</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span>
                                          <span class="n">rate_min</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">,</span>
                                          <span class="n">label2area</span><span class="o">=</span><span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2area&#39;</span><span class="p">],</span>
                                          <span class="n">label2horizon</span><span class="o">=</span><span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2horizon&#39;</span><span class="p">],</span>
                                          <span class="n">label2discount</span><span class="o">=</span><span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2discount&#39;</span><span class="p">],</span>
                                          <span class="n">label2income</span><span class="o">=</span><span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2income&#39;</span><span class="p">],</span>
                                          <span class="n">label2consumption</span><span class="o">=</span><span class="n">dict_label</span><span class="p">[</span><span class="s1">&#39;label2consumption&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</section>
<section id="Calibration-Renovation-rate-–&gt;-rho">
<h2>Calibration Renovation rate –&gt; rho<a class="headerlink" href="#Calibration-Renovation-rate-–>-rho" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">help</span><span class="p">(</span><span class="n">buildings_dynamic</span><span class="o">.</span><span class="n">calibration_renovation_rate</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Help on method calibration_renovation_rate in module project.buildings:

calibration_renovation_rate(energy_prices, renovation_rate_obj, consumption=&#39;conventional&#39;, cost_invest=None, cost_intangible=None, policies=None) method of project.buildings.HousingStockRenovated instance
    Calibration of ρ parameter of the renovation rate function (logistic function of the NPV).

    Renovation rate of dwellings labelled is calculated as a logistic function of the NPV.
    The logistic form captures heterogeneity in heating preference and habits,
    assuming they are normally distributed.

    Parameter ρ is calibrated, for each type of decision-maker and each initial label (i.e., 6x6=36 values),
    so that the NPVs calculated with the subsidies in effect in 2012 (see main article)
    reproduce the observed renovation rates.

    Renovation rate observed depends on (Occupancy status, Housing type)
    NPV that depends on MS and so LCC: (Energy performance initial, Energy performance final,
                                        Occupancy status, Housing type, Income class owner)
    So Parameter ρ should depend on  (Occupancy status, Housing type, Energy performance initial,
                                        Energy performance final, Heating energy intial)
    But, function removed Heating energy initial and Income class owner dependency.

    Parameters
    ----------
    energy_prices: pd.DataFrame
    renovation_rate_obj: pd.DataFrame
    consumption: {&#39;conventional&#39;, &#39;actual&#39;}, default &#39;conventional&#39;
    cost_invest: dict
    cost_intangible: dict
    policies: list

    Returns
    -------
    pd.Series
        ρ parameters by segment

</pre></div></div>
</div>
<p>Cost_intangible need to be a dict with transition for key. Here cost_intangible[‘Energy performance’]</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">temp</span> <span class="o">=</span> <span class="n">cost_intangible</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">cost_intangible</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="n">cost_intangible</span><span class="p">[</span><span class="s1">&#39;Energy performance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">rho</span> <span class="o">=</span> <span class="n">buildings_dynamic</span><span class="o">.</span><span class="n">calibration_renovation_rate</span><span class="p">(</span><span class="n">energy_price</span><span class="p">,</span> <span class="n">rate_renovation_ini</span><span class="p">,</span> <span class="n">consumption</span><span class="o">=</span><span class="s1">&#39;conventional&#39;</span><span class="p">,</span> <span class="n">cost_invest</span><span class="o">=</span><span class="n">cost_invest</span><span class="p">,</span> <span class="n">cost_intangible</span><span class="o">=</span><span class="n">cost_intangible</span><span class="p">)</span>
<span class="n">end</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Calibration took </span><span class="si">{:.1f}</span><span class="s1">s&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">end</span> <span class="o">-</span> <span class="n">start</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Calibration took 1.0s
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">rho</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.4f}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<style  type="text/css" >
</style><table id="T_28867_" ><thead>    <tr>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank" ></th>        <th class="blank level0" ></th>        <th class="col_heading level0 col0" >0</th>    </tr>    <tr>        <th class="index_name level0" >Housing type</th>        <th class="index_name level1" >Occupancy status</th>        <th class="index_name level2" >Income class</th>        <th class="index_name level3" >Heating energy</th>        <th class="index_name level4" >Energy performance</th>        <th class="index_name level5" >Income class owner</th>        <th class="blank" ></th>    </tr></thead><tbody>
                <tr>
                        <th id="T_28867_level0_row0" class="row_heading level0 row0" >Multi-family</th>
                        <th id="T_28867_level1_row0" class="row_heading level1 row0" >Social-housing</th>
                        <th id="T_28867_level2_row0" class="row_heading level2 row0" >D1</th>
                        <th id="T_28867_level3_row0" class="row_heading level3 row0" >Power</th>
                        <th id="T_28867_level4_row0" class="row_heading level4 row0" >A</th>
                        <th id="T_28867_level5_row0" class="row_heading level5 row0" >D10</th>
                        <td id="T_28867_row0_col0" class="data row0 col0" >0.0055</td>
            </tr>
            <tr>
                        <th id="T_28867_level0_row1" class="row_heading level0 row1" >Single-family</th>
                        <th id="T_28867_level1_row1" class="row_heading level1 row1" >Social-housing</th>
                        <th id="T_28867_level2_row1" class="row_heading level2 row1" >D1</th>
                        <th id="T_28867_level3_row1" class="row_heading level3 row1" >Power</th>
                        <th id="T_28867_level4_row1" class="row_heading level4 row1" >A</th>
                        <th id="T_28867_level5_row1" class="row_heading level5 row1" >D10</th>
                        <td id="T_28867_row1_col0" class="data row1 col0" >0.0059</td>
            </tr>
            <tr>
                        <th id="T_28867_level0_row2" class="row_heading level0 row2" >Multi-family</th>
                        <th id="T_28867_level1_row2" class="row_heading level1 row2" >Homeowners</th>
                        <th id="T_28867_level2_row2" class="row_heading level2 row2" >D1</th>
                        <th id="T_28867_level3_row2" class="row_heading level3 row2" >Power</th>
                        <th id="T_28867_level4_row2" class="row_heading level4 row2" >A</th>
                        <th id="T_28867_level5_row2" class="row_heading level5 row2" >D1</th>
                        <td id="T_28867_row2_col0" class="data row2 col0" >0.0063</td>
            </tr>
            <tr>
                        <th id="T_28867_level0_row3" class="row_heading level0 row3" >Single-family</th>
                        <th id="T_28867_level1_row3" class="row_heading level1 row3" >Homeowners</th>
                        <th id="T_28867_level2_row3" class="row_heading level2 row3" >D1</th>
                        <th id="T_28867_level3_row3" class="row_heading level3 row3" >Power</th>
                        <th id="T_28867_level4_row3" class="row_heading level4 row3" >A</th>
                        <th id="T_28867_level5_row3" class="row_heading level5 row3" >D1</th>
                        <td id="T_28867_row3_col0" class="data row3 col0" >0.0063</td>
            </tr>
            <tr>
                        <th id="T_28867_level0_row4" class="row_heading level0 row4" >Multi-family</th>
                        <th id="T_28867_level1_row4" class="row_heading level1 row4" >Social-housing</th>
                        <th id="T_28867_level2_row4" class="row_heading level2 row4" >D2</th>
                        <th id="T_28867_level3_row4" class="row_heading level3 row4" >Power</th>
                        <th id="T_28867_level4_row4" class="row_heading level4 row4" >A</th>
                        <th id="T_28867_level5_row4" class="row_heading level5 row4" >D10</th>
                        <td id="T_28867_row4_col0" class="data row4 col0" >0.0055</td>
            </tr>
    </tbody></table></div>
</div>
<p>Rho should depends on ‘Occupancy status’, ‘Housing type’, ‘Energy performance’, ‘Heating energy’, ‘Income class owner’ but finally depends only on ‘Occupancy status’, ‘Housing type’, ‘Energy performance’</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">rho</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;Occupancy status&#39;</span><span class="p">,</span> <span class="s1">&#39;Housing type&#39;</span><span class="p">,</span> <span class="s1">&#39;Energy performance&#39;</span><span class="p">,</span> <span class="s1">&#39;Heating energy&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Occupancy status  Housing type   Energy performance  Heating energy
Homeowners        Multi-family   A                   Natural gas       0.006292
                                                     Oil fuel          0.006292
                                                     Power             0.006292
                                                     Wood fuel         0.006292
                                 B                   Natural gas       0.006292
                                                                         ...
Social-housing    Single-family  F                   Wood fuel         0.005876
                                 G                   Natural gas       0.005876
                                                     Oil fuel          0.005876
                                                     Power             0.005876
                                                     Wood fuel         0.005876
Length: 168, dtype: float64
</pre></div></div>
</div>
<p>Need to update rho_seg attribute in order to calculate renovation rate with to_renovation_rate method.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">buildings_dynamic</span><span class="o">.</span><span class="n">rho_seg</span> <span class="o">=</span> <span class="n">rho</span>
</pre></div>
</div>
</div>
</section>
<section id="Investment-decision:-Renovation-rate">
<h2>Investment decision: Renovation rate<a class="headerlink" href="#Investment-decision:-Renovation-rate" title="Permalink to this headline">¶</a></h2>
<p>Decision to renovate captured implictly end-of-life and economic renovation.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">rho_test</span> <span class="o">=</span> <span class="n">rho</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">npv_min</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1000</span>
<span class="n">rate_max</span> <span class="o">=</span> <span class="mf">0.4</span>
<span class="n">rate_min</span> <span class="o">=</span> <span class="mf">0.0001</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;For the example we will use: </span><span class="si">{:.4f}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rho_test</span><span class="p">))</span>
<span class="n">npv_range</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">npv_min</span><span class="p">,</span> <span class="mi">10</span> <span class="o">*</span> <span class="nb">abs</span><span class="p">(</span><span class="n">npv_min</span><span class="p">),</span> <span class="mi">500</span><span class="p">))</span>
<span class="n">renovation_rate</span> <span class="o">=</span> <span class="p">[</span><span class="n">HousingStockRenovated</span><span class="o">.</span><span class="n">renovate_rate_func</span><span class="p">(</span><span class="n">npv</span><span class="p">,</span> <span class="n">rho</span><span class="o">=</span><span class="n">rho_test</span><span class="p">,</span> <span class="n">npv_min</span><span class="o">=</span><span class="n">npv_min</span><span class="p">,</span> <span class="n">rate_max</span><span class="o">=</span><span class="n">rate_max</span><span class="p">,</span> <span class="n">rate_min</span><span class="o">=</span><span class="n">rate_min</span><span class="p">)</span> <span class="k">for</span> <span class="n">npv</span> <span class="ow">in</span> <span class="n">npv_range</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
For the example we will use: 0.0053
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">AttributeError</span>                            Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-42-fb76e90fa2ae&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span> print<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;For the example we will use: {:.4f}&#39;</span><span class="ansi-blue-fg">.</span>format<span class="ansi-blue-fg">(</span>rho_test<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      6</span> npv_range <span class="ansi-blue-fg">=</span> pd<span class="ansi-blue-fg">.</span>Series<span class="ansi-blue-fg">(</span>range<span class="ansi-blue-fg">(</span>npv_min<span class="ansi-blue-fg">,</span> <span class="ansi-cyan-fg">10</span> <span class="ansi-blue-fg">*</span> abs<span class="ansi-blue-fg">(</span>npv_min<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span> <span class="ansi-cyan-fg">500</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">----&gt; 7</span><span class="ansi-red-fg"> </span>renovation_rate <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span>HousingStockRenovated<span class="ansi-blue-fg">.</span>renovate_rate_func<span class="ansi-blue-fg">(</span>npv<span class="ansi-blue-fg">,</span> rho<span class="ansi-blue-fg">=</span>rho_test<span class="ansi-blue-fg">,</span> npv_min<span class="ansi-blue-fg">=</span>npv_min<span class="ansi-blue-fg">,</span> rate_max<span class="ansi-blue-fg">=</span>rate_max<span class="ansi-blue-fg">,</span> rate_min<span class="ansi-blue-fg">=</span>rate_min<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">for</span> npv <span class="ansi-green-fg">in</span> npv_range<span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">      8</span>

<span class="ansi-green-fg">&lt;ipython-input-42-fb76e90fa2ae&gt;</span> in <span class="ansi-cyan-fg">&lt;listcomp&gt;</span><span class="ansi-blue-fg">(.0)</span>
<span class="ansi-green-intense-fg ansi-bold">      5</span> print<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;For the example we will use: {:.4f}&#39;</span><span class="ansi-blue-fg">.</span>format<span class="ansi-blue-fg">(</span>rho_test<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      6</span> npv_range <span class="ansi-blue-fg">=</span> pd<span class="ansi-blue-fg">.</span>Series<span class="ansi-blue-fg">(</span>range<span class="ansi-blue-fg">(</span>npv_min<span class="ansi-blue-fg">,</span> <span class="ansi-cyan-fg">10</span> <span class="ansi-blue-fg">*</span> abs<span class="ansi-blue-fg">(</span>npv_min<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">,</span> <span class="ansi-cyan-fg">500</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">----&gt; 7</span><span class="ansi-red-fg"> </span>renovation_rate <span class="ansi-blue-fg">=</span> <span class="ansi-blue-fg">[</span>HousingStockRenovated<span class="ansi-blue-fg">.</span>renovate_rate_func<span class="ansi-blue-fg">(</span>npv<span class="ansi-blue-fg">,</span> rho<span class="ansi-blue-fg">=</span>rho_test<span class="ansi-blue-fg">,</span> npv_min<span class="ansi-blue-fg">=</span>npv_min<span class="ansi-blue-fg">,</span> rate_max<span class="ansi-blue-fg">=</span>rate_max<span class="ansi-blue-fg">,</span> rate_min<span class="ansi-blue-fg">=</span>rate_min<span class="ansi-blue-fg">)</span> <span class="ansi-green-fg">for</span> npv <span class="ansi-green-fg">in</span> npv_range<span class="ansi-blue-fg">]</span>
<span class="ansi-green-intense-fg ansi-bold">      8</span>

<span class="ansi-green-fg">~/PycharmProjects/Res-IRF/project/buildings.py</span> in <span class="ansi-cyan-fg">renovate_rate_func</span><span class="ansi-blue-fg">(npv, rho, npv_min, rate_max, rate_min)</span>
<span class="ansi-green-intense-fg ansi-bold">   1285</span>             <span class="ansi-green-fg">return</span> float<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">&#39;nan&#39;</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">   1286</span>         <span class="ansi-green-fg">else</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">-&gt; 1287</span><span class="ansi-red-fg">             return logistic(npv.loc[0] - npv_min,
</span><span class="ansi-green-intense-fg ansi-bold">   1288</span>                             a<span class="ansi-blue-fg">=</span>rate_max <span class="ansi-blue-fg">/</span> rate_min <span class="ansi-blue-fg">-</span> <span class="ansi-cyan-fg">1</span><span class="ansi-blue-fg">,</span>
<span class="ansi-green-intense-fg ansi-bold">   1289</span>                             r<span class="ansi-blue-fg">=</span>rho_f<span class="ansi-blue-fg">,</span>

<span class="ansi-red-fg">AttributeError</span>: &#39;int&#39; object has no attribute &#39;loc&#39;
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">renovation_rate</span> <span class="o">=</span> <span class="n">buildings_dynamic</span><span class="o">.</span><span class="n">to_renovation_rate</span><span class="p">(</span><span class="n">energy_price</span><span class="p">,</span> <span class="n">transition</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">consumption</span><span class="o">=</span><span class="s1">&#39;conventional&#39;</span><span class="p">,</span> <span class="n">cost_invest</span><span class="o">=</span><span class="n">cost_invest</span><span class="p">,</span>
                                                       <span class="n">cost_intangible</span><span class="o">=</span><span class="n">cost_intangible</span><span class="p">,</span> <span class="n">policies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">display</span><span class="p">(</span><span class="n">renovation_rate</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.1%}</span><span class="s1">&#39;</span><span class="p">))</span>
<span class="n">renovation_rate_average</span> <span class="o">=</span> <span class="p">(</span><span class="n">renovation_rate</span> <span class="o">*</span> <span class="n">stock_ini_seg</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">stock_ini_seg</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Renovation rate average: </span><span class="si">{:.1%}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">renovation_rate_average</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">relation</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">((</span><span class="n">stock_ini_seg</span><span class="p">,</span> <span class="n">renovation_rate</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">relation</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Stock&#39;</span><span class="p">,</span> <span class="s1">&#39;Renovation rate&#39;</span><span class="p">]</span>
<span class="n">relation</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;Renovation rate&#39;</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">relation</span><span class="p">[</span><span class="s1">&#39;Stock cumulated&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">relation</span><span class="p">[</span><span class="s1">&#39;Stock&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">cumsum</span><span class="p">()</span>

<span class="n">simple_plot</span><span class="p">(</span><span class="n">relation</span><span class="p">[</span><span class="s1">&#39;Stock cumulated&#39;</span><span class="p">],</span> <span class="n">relation</span><span class="p">[</span><span class="s1">&#39;Renovation rate&#39;</span><span class="p">],</span> <span class="s1">&#39;Stock cumulated&#39;</span><span class="p">,</span> <span class="s1">&#39;Renovation rate&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">for</span> <span class="n">level</span> <span class="ow">in</span> <span class="n">renovation_rate</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">names</span><span class="p">:</span>
    <span class="n">renovation_rate</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="p">)</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">subplots</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">grid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">12.8</span><span class="p">,</span> <span class="mf">9.6</span><span class="p">))</span>
</pre></div>
</div>
</div>
</section>
<section id="Renovation-flow">
<h2>Renovation flow<a class="headerlink" href="#Renovation-flow" title="Permalink to this headline">¶</a></h2>
<p>HousingStockRenovated cla</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">flow_renovation</span> <span class="o">=</span> <span class="n">renovation_rate</span> <span class="o">*</span> <span class="n">stock_ini_seg</span>
<span class="n">flow_renovation</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Flow renovation&#39;</span>
<span class="n">display</span><span class="p">(</span><span class="n">flow_renovation</span><span class="o">.</span><span class="n">to_frame</span><span class="p">()</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Flow renovation total: </span><span class="si">{:,.0f}</span><span class="s1"> (i.e </span><span class="si">{:.1%}</span><span class="s1"> of total stock)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">flow_renovation</span><span class="o">.</span><span class="n">sum</span><span class="p">(),</span> <span class="n">flow_renovation</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">/</span> <span class="n">stock_ini_seg</span><span class="o">.</span><span class="n">sum</span><span class="p">()))</span>
</pre></div>
</div>
</div>
<section id="id1">
<h3>Discrete choice model: Market share<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">market_share</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">buildings_dynamic</span><span class="o">.</span><span class="n">to_market_share</span><span class="p">(</span><span class="n">energy_price</span><span class="p">,</span> <span class="n">transition</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Energy performance&#39;</span><span class="p">],</span> <span class="n">consumption</span><span class="o">=</span><span class="s1">&#39;conventional&#39;</span><span class="p">,</span> <span class="n">cost_invest</span><span class="o">=</span><span class="n">cost_invest</span><span class="p">,</span>
                                                 <span class="n">cost_intangible</span><span class="o">=</span><span class="n">cost_intangible</span><span class="p">,</span> <span class="n">policies</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nu</span><span class="o">=</span><span class="mf">8.0</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">market_share</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.1%}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</section>
<section id="Flow-renovation-by-energy-performance-final">
<h3>Flow renovation by energy performance final<a class="headerlink" href="#Flow-renovation-by-energy-performance-final" title="Permalink to this headline">¶</a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">flow_renovation_ep</span> <span class="o">=</span> <span class="p">(</span><span class="n">market_share</span><span class="o">.</span><span class="n">T</span> <span class="o">*</span> <span class="n">flow_renovation</span><span class="p">)</span><span class="o">.</span><span class="n">T</span>
<span class="n">display</span><span class="p">(</span><span class="n">flow_renovation_ep</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">flow_renovation_ep_grouped</span> <span class="o">=</span> <span class="n">flow_renovation_ep</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Energy performance&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="n">display</span><span class="p">(</span><span class="n">flow_renovation_ep_grouped</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">performance_order</span><span class="p">,</span> <span class="n">performance_order</span><span class="p">]</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:,.0f}</span><span class="s1">&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</section>
<section id="Flow-renovation-by-energy-performance-final-and-heating-energy-final">
<h3>Flow renovation by energy performance final and heating energy final<a class="headerlink" href="#Flow-renovation-by-energy-performance-final-and-heating-energy-final" title="Permalink to this headline">¶</a></h3>
<section id="Market-share-heating-energy-final">
<h4>Market share heating energy final<a class="headerlink" href="#Market-share-heating-energy-final" title="Permalink to this headline">¶</a></h4>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">market_share_he</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">buildings_dynamic</span><span class="o">.</span><span class="n">to_market_share</span><span class="p">(</span><span class="n">energy_price</span><span class="p">,</span>
                                                       <span class="n">transition</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Heating energy&#39;</span><span class="p">],</span>
                                                       <span class="n">cost_invest</span><span class="o">=</span><span class="n">cost_invest</span><span class="p">,</span>
                                                       <span class="n">consumption</span><span class="o">=</span><span class="s1">&#39;conventional&#39;</span><span class="p">,</span>
                                                       <span class="n">policies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">market_share_he</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.1%}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="Direct-functions">
<h3>Direct functions<a class="headerlink" href="#Direct-functions" title="Permalink to this headline">¶</a></h3>
<p>Direct functions are implemented in classes to fasten the access to specific output.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">flow_renovation_ep</span> <span class="o">=</span> <span class="n">buildings_dynamic</span><span class="o">.</span><span class="n">to_flow_renovation_label</span><span class="p">(</span><span class="n">energy_price</span><span class="p">,</span> <span class="n">consumption</span><span class="o">=</span><span class="s1">&#39;conventional&#39;</span><span class="p">,</span> <span class="n">cost_invest</span><span class="o">=</span><span class="n">cost_invest</span><span class="p">,</span>
                                                                <span class="n">cost_intangible</span><span class="o">=</span><span class="n">cost_intangible</span><span class="p">,</span> <span class="n">policies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">flow_renovation_ep</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">flow_renovation_ep_he</span> <span class="o">=</span> <span class="n">buildings_dynamic</span><span class="o">.</span><span class="n">to_flow_renovation_label_energy</span><span class="p">(</span><span class="n">energy_price</span><span class="p">,</span> <span class="n">consumption</span><span class="o">=</span><span class="s1">&#39;conventional&#39;</span><span class="p">,</span> <span class="n">cost_invest</span><span class="o">=</span><span class="n">cost_invest</span><span class="p">,</span>
                                                                          <span class="n">cost_intangible</span><span class="o">=</span><span class="n">cost_intangible</span><span class="p">,</span> <span class="n">policies</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">flow_renovation_ep_he</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.1f}</span><span class="s1">&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="Endougeneous-technical-change">
<h2>Endougeneous technical change<a class="headerlink" href="#Endougeneous-technical-change" title="Permalink to this headline">¶</a></h2>
<section id="Learning-by-doing">
<h3>Learning by doing<a class="headerlink" href="#Learning-by-doing" title="Permalink to this headline">¶</a></h3>
<div class="line-block">
<div class="line">Investment costs decrease exponentially with the cumulative sum of operations so as to capture the classical “learning-by-doing” process.</div>
<div class="line">The rate of cost reduction is set at 10% in renovation for a doubling of production.</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cost</span> <span class="o">=</span> <span class="n">cost_invest</span><span class="p">[</span><span class="s1">&#39;Energy performance&#39;</span><span class="p">]</span>
<span class="n">display</span><span class="p">(</span><span class="n">cost</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.0f}</span><span class="s1">&#39;</span><span class="p">))</span>

<span class="n">learning_rate</span> <span class="o">=</span> <span class="n">dict_parameters</span><span class="p">[</span><span class="s1">&#39;Learning by doing renovation&#39;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Learning rate: </span><span class="si">{:.0%}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">learning_rate</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">help</span><span class="p">(</span><span class="n">HousingStock</span><span class="o">.</span><span class="n">lbd</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">knowledge_range</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">lbd_range</span> <span class="o">=</span> <span class="p">[</span><span class="n">HousingStock</span><span class="o">.</span><span class="n">lbd</span><span class="p">(</span><span class="n">knowledge</span><span class="p">,</span> <span class="n">learning_rate</span><span class="o">=</span><span class="n">learning_rate</span><span class="p">)</span> <span class="k">for</span> <span class="n">knowledge</span> <span class="ow">in</span> <span class="n">knowledge_range</span><span class="p">]</span>

<span class="n">simple_plot</span><span class="p">(</span><span class="n">knowledge_range</span><span class="p">,</span> <span class="n">lbd_range</span><span class="p">,</span> <span class="s1">&#39;Knowledge&#39;</span><span class="p">,</span> <span class="s1">&#39;LBD factor&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">help</span><span class="p">(</span><span class="n">HousingStock</span><span class="o">.</span><span class="n">learning_by_doing</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">knowledge</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">cost</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="n">cost_learnt</span> <span class="o">=</span> <span class="n">HousingStock</span><span class="o">.</span><span class="n">learning_by_doing</span><span class="p">(</span><span class="n">knowledge</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">learning_rate</span><span class="p">)</span>
<span class="n">cost_learnt</span> <span class="o">=</span> <span class="n">cost_learnt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">performance_order</span><span class="p">]</span>
<span class="n">display</span><span class="p">(</span><span class="n">cost_learnt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.0f}</span><span class="s1">&#39;</span><span class="p">))</span>

<span class="n">knowledge</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">cost</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="n">cost_learnt</span> <span class="o">=</span> <span class="n">HousingStock</span><span class="o">.</span><span class="n">learning_by_doing</span><span class="p">(</span><span class="n">knowledge</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">learning_rate</span><span class="p">)</span>
<span class="n">cost_learnt</span> <span class="o">=</span> <span class="n">cost_learnt</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">performance_order</span><span class="p">]</span>
<span class="n">display</span><span class="p">(</span><span class="n">cost_learnt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.0f}</span><span class="s1">&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<p>We observe a 10% reduction of capital cost (based on learnig_rate).</p>
</section>
<section id="Information-rate">
<h3>Information rate<a class="headerlink" href="#Information-rate" title="Permalink to this headline">¶</a></h3>
<p>Intangible renovation costs decrease according to a logistic curve with the same cumulative production so as to capture peer effects and knowledge diffusion. The rate of decrease is set at 25% for a doubling of cumulative production.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">cost</span> <span class="o">=</span> <span class="n">cost_intangible</span><span class="p">[</span><span class="s1">&#39;Energy performance&#39;</span><span class="p">]</span>
<span class="n">display</span><span class="p">(</span><span class="n">cost</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.0f}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">))</span>

<span class="n">info_rate_max</span> <span class="o">=</span> <span class="n">dict_parameters</span><span class="p">[</span><span class="s1">&#39;Information rate max renovation&#39;</span><span class="p">]</span>
<span class="n">learning_info_rate</span> <span class="o">=</span> <span class="n">dict_parameters</span><span class="p">[</span><span class="s1">&#39;Learning information rate renovation&#39;</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Learning info rate: </span><span class="si">{:.0%}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">learning_info_rate</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Info rate max: </span><span class="si">{:.0%}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">info_rate_max</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">help</span><span class="p">(</span><span class="n">HousingStock</span><span class="o">.</span><span class="n">information_rate</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">knowledge_range</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">info_range</span> <span class="o">=</span> <span class="p">[</span><span class="n">HousingStock</span><span class="o">.</span><span class="n">information_rate</span><span class="p">(</span><span class="n">knowledge</span><span class="p">,</span> <span class="n">learning_info_rate</span><span class="p">,</span> <span class="n">info_rate_max</span><span class="p">)</span> <span class="k">for</span> <span class="n">knowledge</span> <span class="ow">in</span> <span class="n">knowledge_range</span><span class="p">]</span>

<span class="n">simple_plot</span><span class="p">(</span><span class="n">knowledge_range</span><span class="p">,</span> <span class="n">info_range</span><span class="p">,</span> <span class="s1">&#39;Knowledge&#39;</span><span class="p">,</span> <span class="s1">&#39;Info factor&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">help</span><span class="p">(</span><span class="n">HousingStock</span><span class="o">.</span><span class="n">learning_by_doing</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">knowledge</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">cost</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="n">cost_learnt</span> <span class="o">=</span> <span class="n">HousingStock</span><span class="o">.</span><span class="n">acceleration_information</span><span class="p">(</span><span class="n">knowledge</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">info_rate_max</span><span class="p">,</span> <span class="n">learning_info_rate</span><span class="p">)</span>
<span class="n">cost_learnt</span> <span class="o">=</span> <span class="n">cost_learnt</span>
<span class="n">display</span><span class="p">(</span><span class="n">cost_learnt</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Energy performance&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.0f}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">))</span>

<span class="n">knowledge</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">cost</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="n">cost_learnt</span> <span class="o">=</span> <span class="n">HousingStock</span><span class="o">.</span><span class="n">acceleration_information</span><span class="p">(</span><span class="n">knowledge</span><span class="p">,</span> <span class="n">cost</span><span class="p">,</span> <span class="n">info_rate_max</span><span class="p">,</span> <span class="n">learning_info_rate</span><span class="p">)</span>
<span class="n">cost_learnt</span> <span class="o">=</span> <span class="n">cost_learnt</span>
<span class="n">display</span><span class="p">(</span><span class="n">cost_learnt</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Energy performance&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.0f}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">na_rep</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">))</span>

</pre></div>
</div>
</div>
</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="future_development.html" class="btn btn-neutral float-left" title="Future developments" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Lucas Vivier.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>